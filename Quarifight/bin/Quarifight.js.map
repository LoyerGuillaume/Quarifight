{
"version":3,
"file":"Quarifight.js",
"sourceRoot":"file:///",
"sources":["C:/HaxeToolkit/haxe/std/js/_std/EReg.hx","C:/HaxeToolkit/haxe/std/js/_std/HxOverrides.hx","C:/HaxeToolkit/haxe/std/Lambda.hx","C:/HaxeToolkit/haxe/lib/perf,js/1,1,8/src/Perf.hx","C:/HaxeToolkit/haxe/std/js/_std/Reflect.hx","C:/HaxeToolkit/haxe/std/js/_std/Std.hx","C:/HaxeToolkit/haxe/std/StringTools.hx","C:/HaxeToolkit/haxe/std/js/_std/Type.hx","C:/HaxeToolkit/haxe/std/UInt.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/libs/MathPerso.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/libs/MouseController.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/libs/TimerDelay.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/Main.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/game/GameManager.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/game/LevelManager.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/GameObject.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/StateMachine.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/StateGraphic.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/game/sprites/Eat.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/game/sprites/Fish.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/game/sprites/LevelBackground.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/ui/CheatPanel.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/ui/UIComponent.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/ui/Screen.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/ui/GraphicLoader.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/ui/UIManager.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/ui/hud/Hud.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/ui/Popin.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/ui/popin/Confirm.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/gloyer/quarifight/ui/screens/TitleCard.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/Config.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/Debug.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/CollisionManager.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/GameStage.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/factory/AnimFactory.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/factory/FlumpMovieAnimFactory.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/factory/FlumpSpriteAnimFactory.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/game/factory/MovieClipAnimFactory.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/loader/GameLoader.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/sounds/SoundManager.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/system/DeviceCapabilities.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/ui/UIAsset.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/ui/UIBuilder.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/ui/UIPosition.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/DisplayObjectKey.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/MoviePlayer.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/json/FlumpJSON.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/FlumpLibrary.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/Keyframe.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/Label.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/Layer.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/Symbol.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/MovieSymbol.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/Point.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/Rectangle.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/flump/library/SpriteSymbol.hx","C:/HaxeToolkit/haxe/std/haxe/Timer.hx","C:/HaxeToolkit/haxe/std/haxe/ds/ArraySort.hx","C:/HaxeToolkit/haxe/std/js/_std/haxe/ds/ObjectMap.hx","C:/HaxeToolkit/haxe/std/js/_std/haxe/ds/StringMap.hx","C:/HaxeToolkit/haxe/std/js/Boot.hx","C:/HaxeToolkit/haxe/std/js/Browser.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/pixi/display/FlumpMovie.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/pixi/display/FlumpResource.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/pixi/display/FlumpSprite.hx","C:/HaxeToolkit/haxe/lib/pixi-flump-runtime/0,1,3/src/pixi/loaders/FlumpParser.hx","C:/HaxeToolkit/haxe/std/js/_std/Math.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/events/EventType.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/events/LoadEventType.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/events/MouseEventType.hx","D:/DEV/GIT_HUB/Quarifight/Quarifight/src/com/isartdigital/utils/events/TouchEventType.hx"],
"sourcesContent":["/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:coreApi class EReg {\n\n\tvar r : HaxeRegExp;\n\n\tpublic function new( r : String, opt : String ) : Void {\n\t\topt = opt.split(\"u\").join(\"\"); // 'u' (utf8) depends on page encoding\n\t\tthis.r = new HaxeRegExp(r, opt);\n\t}\n\n\tpublic function match( s : String ) : Bool {\n\t\tif( r.global ) r.lastIndex = 0;\n\t\tr.m = r.exec(s);\n\t\tr.s = s;\n\t\treturn (r.m != null);\n\t}\n\n\tpublic function matched( n : Int ) : String {\n\t\treturn if( r.m != null && n >= 0 && n < r.m.length ) r.m[n] else throw \"EReg::matched\";\n\t}\n\n\tpublic function matchedLeft() : String {\n\t\tif( r.m == null ) throw \"No string matched\";\n\t\treturn r.s.substr(0,r.m.index);\n\t}\n\n\tpublic function matchedRight() : String {\n\t\tif( r.m == null ) throw \"No string matched\";\n\t\tvar sz = r.m.index+r.m[0].length;\n\t\treturn r.s.substr(sz,r.s.length-sz);\n\t}\n\n\tpublic function matchedPos() : { pos : Int, len : Int } {\n\t\tif( r.m == null ) throw \"No string matched\";\n\t\treturn { pos : r.m.index, len : r.m[0].length };\n\t}\n\n\tpublic function matchSub( s : String, pos : Int, len : Int = -1):Bool {\n\t\treturn if (r.global) {\n\t\t\tr.lastIndex = pos;\n\t\t\tr.m = r.exec(len < 0 ? s : s.substr(0, pos + len));\n\t\t\tvar b = r.m != null;\n\t\t\tif (b) {\n\t\t\t\tr.s = s;\n\t\t\t}\n\t\t\tb;\n\t\t} else {\n\t\t\t// TODO: check some ^/$ related corner cases\n\t\t\tvar b = match( len < 0 ? s.substr(pos) : s.substr(pos,len) );\n\t\t\tif (b) {\n\t\t\t\tr.s = s;\n\t\t\t\tr.m.index += pos;\n\t\t\t}\n\t\t\tb;\n\t\t}\n\t}\n\n\tpublic function split( s : String ) : Array<String> {\n\t\t// we can't use directly s.split because it's ignoring the 'g' flag\n\t\tvar d = \"#__delim__#\";\n\t\treturn untyped s.replace(r,d).split(d);\n\t}\n\n\tpublic function replace( s : String, by : String ) : String {\n\t\treturn untyped s.replace(r,by);\n\t}\n\n\tpublic function map( s : String, f : EReg -> String ) : String {\n\t\tvar offset = 0;\n\t\tvar buf = new StringBuf();\n\t\tdo {\n\t\t\tif (offset >= s.length)\n\t\t\t\tbreak;\n\t\t\telse if (!matchSub(s, offset)) {\n\t\t\t\tbuf.add(s.substr(offset));\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tvar p = matchedPos();\n\t\t\tbuf.add(s.substr(offset, p.pos - offset));\n\t\t\tbuf.add(f(this));\n\t\t\tif (p.len == 0) {\n\t\t\t\tbuf.add(s.substr(p.pos, 1));\n\t\t\t\toffset = p.pos + 1;\n\t\t\t}\n\t\t\telse\n\t\t\t\toffset = p.pos + p.len;\n\t\t} while (r.global);\n\t\tif (!r.global && offset > 0 && offset < s.length)\n\t\t\tbuf.add(s.substr(offset));\n\t\treturn buf.toString();\n\t}\n}\n\n@:native(\"RegExp\")\nprivate extern class HaxeRegExp extends js.RegExp {\n\tvar m:js.RegExp.RegExpMatch;\n\tvar s:String;\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:noDoc\nclass HxOverrides {\n\n\tstatic function dateStr( date :Date ) : String {\n\t\tvar m = date.getMonth() + 1;\n\t\tvar d = date.getDate();\n\t\tvar h = date.getHours();\n\t\tvar mi = date.getMinutes();\n\t\tvar s = date.getSeconds();\n\t\treturn date.getFullYear()\n\t\t\t+\"-\"+(if( m < 10 ) \"0\"+m else \"\"+m)\n\t\t\t+\"-\"+(if( d < 10 ) \"0\"+d else \"\"+d)\n\t\t\t+\" \"+(if( h < 10 ) \"0\"+h else \"\"+h)\n\t\t\t+\":\"+(if( mi < 10 ) \"0\"+mi else \"\"+mi)\n\t\t\t+\":\"+(if( s < 10 ) \"0\"+s else \"\"+s);\n\t}\n\n\tstatic function strDate( s : String ) : Date {\n\t\tswitch( s.length ) {\n\t\tcase 8: // hh:mm:ss\n\t\t\tvar k = s.split(\":\");\n\t\t\tvar d : Date = untyped __new__(Date);\n\t\t\tuntyped d[\"setTime\"](0);\n\t\t\tuntyped d[\"setUTCHours\"](k[0]);\n\t\t\tuntyped d[\"setUTCMinutes\"](k[1]);\n\t\t\tuntyped d[\"setUTCSeconds\"](k[2]);\n\t\t\treturn d;\n\t\tcase 10: // YYYY-MM-DD\n\t\t\tvar k = s.split(\"-\");\n\t\t\treturn new Date(cast k[0],cast untyped k[1] - 1,cast k[2],0,0,0);\n\t\tcase 19: // YYYY-MM-DD hh:mm:ss\n\t\t\tvar k = s.split(\" \");\n\t\t\tvar y = k[0].split(\"-\");\n\t\t\tvar t = k[1].split(\":\");\n\t\t\treturn new Date(cast y[0],cast untyped y[1] - 1,cast y[2],cast t[0],cast t[1],cast t[2]);\n\t\tdefault:\n\t\t\tthrow \"Invalid date format : \" + s;\n\t\t}\n\t}\n\n\tstatic function cca( s : String, index : Int ) : Null<Int> {\n\t\tvar x = (cast s).charCodeAt(index);\n\t\tif( x != x ) // fast isNaN\n\t\t\treturn untyped undefined; // isNaN will still return true\n\t\treturn x;\n\t}\n\n\tstatic function substr( s : String, pos : Int, ?len : Int ) : String {\n\t\tif( pos != null && pos != 0 && len != null && len < 0 ) return \"\";\n\t\tif( len == null ) len = s.length;\n\t\tif( pos < 0 ){\n\t\t\tpos = s.length + pos;\n\t\t\tif( pos < 0 ) pos = 0;\n\t\t}else if( len < 0 ){\n\t\t\tlen = s.length + len - pos;\n\t\t}\n\n\t\treturn (untyped s).substr(pos, len);\n\t}\n\n\tstatic function indexOf<T>( a : Array<T>, obj : T, i : Int) {\n\t\tvar len = a.length;\n\t\tif (i < 0) {\n\t\t\ti += len;\n\t\t\tif (i < 0) i = 0;\n\t\t}\n\t\twhile (i < len)\n\t\t{\n\t\t\tif (untyped __js__(\"a[i] === obj\"))\n\t\t\t\treturn i;\n\t\t\ti++;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic function lastIndexOf<T>( a : Array<T>, obj : T, i : Int) {\n\t\tvar len = a.length;\n\t\tif (i >= len)\n\t\t\ti = len - 1;\n\t\telse if (i < 0)\n\t\t\ti += len;\n\t\twhile (i >= 0)\n\t\t{\n\t\t\tif (untyped __js__(\"a[i] === obj\"))\n\t\t\t\treturn i;\n\t\t\ti--;\n\t\t}\n\t\treturn -1;\n\t}\n\n\tstatic function remove<T>( a : Array<T>, obj : T ) {\n\t\tvar i = a.indexOf(obj);\n\t\tif( i == -1 ) return false;\n\t\ta.splice(i,1);\n\t\treturn true;\n\t}\n\n\tstatic function iter<T>( a : Array<T> ) : Iterator<T> untyped {\n\t\treturn {\n\t\t\tcur : 0,\n\t\t\tarr : a,\n\t\t\thasNext : function() {\n\t\t\t\treturn __this__.cur < __this__.arr.length;\n\t\t\t},\n\t\t\tnext : function() {\n\t\t\t\treturn __this__.arr[__this__.cur++];\n\t\t\t}\n\t\t};\n\t}\n\n\tstatic function __init__() untyped {\n#if !js_es5\n\t\t__feature__('HxOverrides.indexOf', if( Array.prototype.indexOf ) __js__(\"HxOverrides\").indexOf = function(a,o,i) return Array.prototype.indexOf.call(a, o, i));\n\t\t__feature__('HxOverrides.lastIndexOf', if( Array.prototype.lastIndexOf ) __js__(\"HxOverrides\").lastIndexOf = function(a,o,i) return Array.prototype.lastIndexOf.call(a, o, i));\n#end\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n/**\n\tThe `Lambda` class is a collection of methods to support functional\n\tprogramming. It is ideally used with 'using Lambda' and then acts as an\n\textension to Iterable types.\n\n\tOn static platforms, working with the Iterable structure might be slower\n\tthan performing the operations directly on known types, such as Array and\n\tList.\n\n\tIf the first argument to any of the methods is null, the result is\n\tunspecified.\n**/\nclass Lambda {\n\n\t/**\n\t\tCreates an Array from Iterable `it`.\n\n\t\tIf `it` is an Array, this function returns a copy of it.\n\t**/\n\tpublic static function array<A>( it : Iterable<A> ) : Array<A> {\n\t\tvar a = new Array<A>();\n\t\tfor(i in it)\n\t\t\ta.push(i);\n\t\treturn a;\n\t}\n\n\t/**\n\t\tCreates a List form Iterable `it`.\n\n\t\tIf `it` is a List, this function returns a copy of it.\n\t**/\n\tpublic static function list<A>( it : Iterable<A> ) : List<A> {\n\t\tvar l = new List<A>();\n\t\tfor(i in it)\n\t\t\tl.add(i);\n\t\treturn l;\n\t}\n\n\t/**\n\t\tCreates a new List by applying function `f` to all elements of `it`.\n\n\t\tThe order of elements is preserved.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function map<A,B>( it : Iterable<A>, f : A -> B ) : List<B> {\n\t\tvar l = new List<B>();\n\t\tfor( x in it )\n\t\t\tl.add(f(x));\n\t\treturn l;\n\t}\n\n\t/**\n\t\tSimilar to map, but also passes the index of each element to `f`.\n\n\t\tThe order of elements is preserved.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function mapi<A,B>( it : Iterable<A>, f : Int -> A -> B ) : List<B> {\n\t\tvar l = new List<B>();\n\t\tvar i = 0;\n\t\tfor( x in it )\n\t\t\tl.add(f(i++,x));\n\t\treturn l;\n\t}\n\n\t/**\n\t\tTells if `it` contains `elt`.\n\n\t\tThis function returns true as soon as an element is found which is equal\n\t\tto `elt` according to the `==` operator.\n\n\t\tIf no such element is found, the result is false.\n\t**/\n\tpublic static function has<A>( it : Iterable<A>, elt : A ) : Bool {\n\t\tfor( x in it )\n\t\t\tif( x == elt )\n\t\t\t\treturn true;\n\t\treturn false;\n\t}\n\n\t/**\n\t\tTells if `it` contains an element for which `f` is true.\n\n\t\tThis function returns true as soon as an element is found for which a\n\t\tcall to `f` returns true.\n\n\t\tIf no such element is found, the result is false.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function exists<A>( it : Iterable<A>, f : A -> Bool ) {\n\t\tfor( x in it )\n\t\t\tif( f(x) )\n\t\t\t\treturn true;\n\t\treturn false;\n\t}\n\n\t/**\n\t\tTells if `f` is true for all elements of `it`.\n\n\t\tThis function returns false as soon as an element is found for which a\n\t\tcall to `f` returns false.\n\n\t\tIf no such element is found, the result is true.\n\n\t\tIn particular, this function always returns true if `it` is empty.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function foreach<A>( it : Iterable<A>, f : A -> Bool ) {\n\t\tfor( x in it )\n\t\t\tif( !f(x) )\n\t\t\t\treturn false;\n\t\treturn true;\n\t}\n\n\t/**\n\t\tCalls `f` on all elements of `it`, in order.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function iter<A>( it : Iterable<A>, f : A -> Void ) {\n\t\tfor( x in it )\n\t\t\tf(x);\n\t}\n\n\t/**\n\t\tReturns a List containing those elements of `it` for which `f` returned\n\t\ttrue.\n\n\t\tIf `it` is empty, the result is the empty List even if `f` is null.\n\n\t\tOtherwise if `f` is null, the result is unspecified.\n\t**/\n\tpublic static function filter<A>( it : Iterable<A>, f : A -> Bool ) {\n\t\tvar l = new List<A>();\n\t\tfor( x in it )\n\t\t\tif( f(x) )\n\t\t\t\tl.add(x);\n\t\treturn l;\n\t}\n\n\t/**\n\t\tFunctional fold on Iterable `it`, using function `f` with start argument\n\t\t`first`.\n\n\t\tIf `it` has no elements, the result is `first`.\n\n\t\tOtherwise the first element of `it` is passed to `f` alongside `first`.\n\t\tThe result of that call is then passed to `f` with the next element of\n\t\t`it`, and so on until `it` has no more elements.\n\n\t\tIf `it` or `f` are null, the result is unspecified.\n\t**/\n\tpublic static function fold<A,B>( it : Iterable<A>, f : A -> B -> B, first : B ) : B {\n\t\tfor( x in it )\n\t\t\tfirst = f(x,first);\n\t\treturn first;\n\t}\n\n\t/**\n\t\tReturns the number of elements in `it` for which `pred` is true, or the\n\t\ttotal number of elements in `it` if `pred` is null.\n\n\t\tThis function traverses all elements.\n\t**/\n\tpublic static function count<A>( it : Iterable<A>, ?pred : A -> Bool ) {\n\t\tvar n = 0;\n\t\tif( pred == null )\n\t\t\tfor( _ in it )\n\t\t\t\tn++;\n\t\telse\n\t\t\tfor( x in it )\n\t\t\t\tif( pred(x) )\n\t\t\t\t\tn++;\n\t\treturn n;\n\t}\n\n\t/**\n\t\tTells if Iterable `it` does not contain any element.\n\t**/\n\tpublic static function empty<T>( it : Iterable<T> ) : Bool {\n\t\treturn !it.iterator().hasNext();\n\t}\n\n\t/**\n\t\tReturns the index of the first element `v` within Iterable `it`.\n\n\t\tThis function uses operator `==` to check for equality.\n\n\t\tIf `v` does not exist in `it`, the result is -1.\n\t**/\n\tpublic static function indexOf<T>( it : Iterable<T>, v : T ) : Int {\n\t\tvar i = 0;\n\t\tfor( v2 in it ) {\n\t\t\tif( v == v2 )\n\t\t\t\treturn i;\n\t\t\ti++;\n\t\t}\n\t\treturn -1;\n\t}\n\n\t/**\n\t\tReturns the first element of `it` for which `f` is true.\n\n\t\tThis function returns as soon as an element is found for which a call to\n\t\t`f` returns true.\n\n\t\tIf no such element is found, the result is null.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function find<T>( it : Iterable<T>, f : T -> Bool ) : Null<T> {\n\t\tfor( v in it ) {\n\t\t\tif(f(v)) return v;\n\t\t}\n\t\treturn null;\n\t}\n\n\t/**\n\t\tReturns a new List containing all elements of Iterable `a` followed by\n\t\tall elements of Iterable `b`.\n\n\t\tIf `a` or `b` are null, the result is unspecified.\n\t**/\n\tpublic static function concat<T>( a : Iterable<T>, b : Iterable<T> ) : List<T> {\n\t\tvar l = new List();\n\t\tfor( x in a )\n\t\t\tl.add(x);\n\t\tfor( x in b )\n\t\t\tl.add(x);\n\t\treturn l;\n\t}\n\n}\n","import js.html.Performance;\nimport js.html.DivElement;\nimport js.Browser;\n\n@:expose class Perf {\n\n\tpublic static var MEASUREMENT_INTERVAL:Int = 1000;\n\n\tpublic static var FONT_FAMILY:String = \"Helvetica,Arial\";\n\n\tpublic static var FPS_BG_CLR:String = \"#00FF00\";\n\tpublic static var FPS_WARN_BG_CLR:String = \"#FF8000\";\n\tpublic static var FPS_PROB_BG_CLR:String = \"#FF0000\";\n\n\tpublic static var MS_BG_CLR:String = \"#FFFF00\";\n\tpublic static var MEM_BG_CLR:String = \"#086A87\";\n\tpublic static var INFO_BG_CLR:String = \"#00FFFF\";\n\tpublic static var FPS_TXT_CLR:String = \"#000000\";\n\tpublic static var MS_TXT_CLR:String = \"#000000\";\n\tpublic static var MEM_TXT_CLR:String = \"#FFFFFF\";\n\tpublic static var INFO_TXT_CLR:String = \"#000000\";\n\n\tpublic static var TOP_LEFT:String = \"TL\";\n\tpublic static var TOP_RIGHT:String = \"TR\";\n\tpublic static var BOTTOM_LEFT:String = \"BL\";\n\tpublic static var BOTTOM_RIGHT:String = \"BR\";\n\n\tstatic var DELAY_TIME:Int = 4000;\n\n\tpublic var fps:DivElement;\n\tpublic var ms:DivElement;\n\tpublic var memory:DivElement;\n\tpublic var info:DivElement;\n\n\tpublic var lowFps:Float;\n\tpublic var avgFps:Float;\n\tpublic var currentFps:Float;\n\tpublic var currentMs:Float;\n\tpublic var currentMem:String;\n\n\tvar _time:Float;\n\tvar _startTime:Float;\n\tvar _prevTime:Float;\n\tvar _ticks:Int;\n\tvar _fpsMin:Float;\n\tvar _fpsMax:Float;\n\tvar _memCheck:Bool;\n\tvar _pos:String;\n\tvar _offset:Float;\n\tvar _measureCount:Int;\n\tvar _totalFps:Float;\n\n\tvar _perfObj:Performance;\n\tvar _memoryObj:Memory;\n\tvar _raf:Int;\n\n\tvar RAF:Dynamic;\n\tvar CAF:Dynamic;\n\n\tpublic function new(?pos = \"TR\", ?offset:Float = 0) {\n\t\t_perfObj = Browser.window.performance;\n\t\tif (Reflect.field(_perfObj, \"memory\") != null) _memoryObj = Reflect.field(_perfObj, \"memory\");\n\t\t_memCheck = (_perfObj != null && _memoryObj != null && _memoryObj.totalJSHeapSize > 0);\n\n\t\t_pos = pos;\n\t\t_offset = offset;\n\n\t\t_init();\n\t\t_createFpsDom();\n\t\t_createMsDom();\n\t\tif (_memCheck) _createMemoryDom();\n\n\t\tif (Browser.window.requestAnimationFrame != null) RAF = Browser.window.requestAnimationFrame;\n\t\telse if (untyped __js__(\"window\").mozRequestAnimationFrame != null) RAF = untyped __js__(\"window\").mozRequestAnimationFrame;\n\t\telse if (untyped __js__(\"window\").webkitRequestAnimationFrame != null) RAF = untyped __js__(\"window\").webkitRequestAnimationFrame;\n\t\telse if (untyped __js__(\"window\").msRequestAnimationFrame != null) RAF = untyped __js__(\"window\").msRequestAnimationFrame;\n\n\t\tif (Browser.window.cancelAnimationFrame != null) CAF = Browser.window.cancelAnimationFrame;\n\t\telse if (untyped __js__(\"window\").mozCancelAnimationFrame != null) CAF = untyped __js__(\"window\").mozCancelAnimationFrame;\n\t\telse if (untyped __js__(\"window\").webkitCancelAnimationFrame != null) CAF = untyped __js__(\"window\").webkitCancelAnimationFrame;\n\t\telse if (untyped __js__(\"window\").msCancelAnimationFrame != null) CAF = untyped __js__(\"window\").msCancelAnimationFrame;\n\n\t\tif (RAF != null) _raf = Reflect.callMethod(Browser.window, RAF, [_tick]);\n\t}\n\n\tinline function _init() {\n\t\tcurrentFps = 60;\n\t\tcurrentMs = 0;\n\t\tcurrentMem = \"0\";\n\n\t\tlowFps = 60;\n\t\tavgFps = 60;\n\n\t\t_measureCount = 0;\n\t\t_totalFps = 0;\n\t\t_time = 0;\n\t\t_ticks = 0;\n\t\t_fpsMin = 60;\n\t\t_fpsMax = 60;\n\t\t_startTime = _now();\n\t\t_prevTime = -MEASUREMENT_INTERVAL;\n\t}\n\n\tinline function _now():Float {\n\t\treturn (_perfObj != null && _perfObj.now != null) ? _perfObj.now() : Date.now().getTime();\n\t}\n\n\tfunction _tick(val:Float) {\n\t\tvar time = _now();\n\t\t_ticks++;\n\n\t\tif (_raf != null && time > _prevTime + MEASUREMENT_INTERVAL) {\n\t\t\tcurrentMs = Math.round(time - _startTime);\n\t\t\tms.innerHTML = \"MS: \" + currentMs;\n\n\t\t\tcurrentFps = Math.round((_ticks * 1000) / (time - _prevTime));\n\t\t\tif (currentFps > 0 && val > DELAY_TIME) {\n\t\t\t\t_measureCount++;\n\t\t\t\t_totalFps += currentFps;\n\t\t\t\tlowFps = _fpsMin = Math.min(_fpsMin, currentFps);\n\t\t\t\t_fpsMax = Math.max(_fpsMax, currentFps);\n\t\t\t\tavgFps = Math.round(_totalFps / _measureCount);\n\t\t\t}\n\n\t\t\tfps.innerHTML =  \"FPS: \" + currentFps + \" (\" + _fpsMin + \"-\" + _fpsMax + \")\";\n\n\t\t\tif (currentFps >= 30) fps.style.backgroundColor = FPS_BG_CLR;\n\t\t\telse if (currentFps >= 15) fps.style.backgroundColor = FPS_WARN_BG_CLR;\n\t\t\telse fps.style.backgroundColor = FPS_PROB_BG_CLR;\n\n\t\t\t_prevTime = time;\n\t\t\t_ticks = 0;\n\n\t\t\tif (_memCheck) {\n\t\t\t\tcurrentMem = _getFormattedSize(_memoryObj.usedJSHeapSize, 2);\n\t\t\t\tmemory.innerHTML = \"MEM: \" + currentMem;\n\t\t\t}\n\t\t}\n\t\t_startTime =  time;\n\n\t\tif (_raf != null) _raf = Reflect.callMethod(Browser.window, RAF, [_tick]);\n\t}\n\n\tfunction _createDiv(id:String, ?top:Float = 0):DivElement {\n\t\tvar div:DivElement = Browser.document.createDivElement();\n\t\tdiv.id = id;\n\t\tdiv.className = id;\n\t\tdiv.style.position = \"absolute\";\n\n\t\tswitch (_pos) {\n\t\t\tcase \"TL\":\n\t\t\t\tdiv.style.left = _offset + \"px\";\n\t\t\t\tdiv.style.top = top + \"px\";\n\t\t\tcase \"TR\":\n\t\t\t\tdiv.style.right = _offset + \"px\";\n\t\t\t\tdiv.style.top = top + \"px\";\n\t\t\tcase \"BL\":\n\t\t\t\tdiv.style.left = _offset + \"px\";\n\t\t\t\tdiv.style.bottom = ((_memCheck) ? 48 : 32) - top + \"px\";\n\t\t\tcase \"BR\":\n\t\t\t\tdiv.style.right = _offset + \"px\";\n\t\t\t\tdiv.style.bottom = ((_memCheck) ? 48 : 32) - top + \"px\";\n\t\t}\n\n\t\tdiv.style.width = \"80px\";\n\t\tdiv.style.height = \"12px\";\n\t\tdiv.style.lineHeight = \"12px\";\n\t\tdiv.style.padding = \"2px\";\n\t\tdiv.style.fontFamily = FONT_FAMILY;\n\t\tdiv.style.fontSize = \"9px\";\n\t\tdiv.style.fontWeight = \"bold\";\n\t\tdiv.style.textAlign = \"center\";\n\t\tBrowser.document.body.appendChild(div);\n\t\treturn div;\n\t}\n\n\tfunction _createFpsDom() {\n\t\tfps = _createDiv(\"fps\");\n\t\tfps.style.backgroundColor = FPS_BG_CLR;\n\t\tfps.style.zIndex = \"995\";\n\t\tfps.style.color = FPS_TXT_CLR;\n\t\tfps.innerHTML = \"FPS: 0\";\n\t}\n\n\tfunction _createMsDom() {\n\t\tms = _createDiv(\"ms\", 16);\n\t\tms.style.backgroundColor = MS_BG_CLR;\n\t\tms.style.zIndex = \"996\";\n\t\tms.style.color = MS_TXT_CLR;\n\t\tms.innerHTML = \"MS: 0\";\n\t}\n\n\tfunction _createMemoryDom() {\n\t\tmemory = _createDiv(\"memory\", 32);\n\t\tmemory.style.backgroundColor = MEM_BG_CLR;\n\t\tmemory.style.color = MEM_TXT_CLR;\n\t\tmemory.style.zIndex = \"997\";\n\t\tmemory.innerHTML = \"MEM: 0\";\n\t}\n\n\tfunction _getFormattedSize(bytes:Float, ?frac:Int = 0):String {\n\t\tvar sizes = [\"Bytes\", \"KB\", \"MB\", \"GB\", \"TB\"];\n\t\tif (bytes == 0) return \"0\";\n\t\tvar precision = Math.pow(10, frac);\n\t\tvar i = Math.floor(Math.log(bytes) / Math.log(1024));\n\t\treturn Math.round(bytes * precision / Math.pow(1024, i)) / precision + \" \" + sizes[i];\n\t}\n\n\tpublic function addInfo(val:String) {\n\t\tinfo = _createDiv(\"info\", (_memCheck) ? 48 : 32);\n\t\tinfo.style.backgroundColor = INFO_BG_CLR;\n\t\tinfo.style.color = INFO_TXT_CLR;\n\t\tinfo.style.zIndex = \"998\";\n\t\tinfo.innerHTML = val;\n\t}\n\n\tpublic function clearInfo() {\n\t\tif (info != null) {\n\t\t\tBrowser.document.body.removeChild(info);\n\t\t\tinfo = null;\n\t\t}\n\t}\n\n\tpublic function destroy() {\n\t\t_cancelRAF();\n\t\t_perfObj = null;\n\t\t_memoryObj = null;\n\t\tif (fps != null) {\n\t\t\tBrowser.document.body.removeChild(fps);\n\t\t\tfps = null;\n\t\t}\n\t\tif (ms != null) {\n\t\t\tBrowser.document.body.removeChild(ms);\n\t\t\tms = null;\n\t\t}\n\t\tif (memory != null) {\n\t\t\tBrowser.document.body.removeChild(memory);\n\t\t\tmemory = null;\n\t\t}\n\t\tclearInfo();\n\t\t_init();\n\t}\n\n\tinline function _cancelRAF() {\n\t\tReflect.callMethod(Browser.window, CAF, [_raf]);\n\t\t_raf = null;\n\t}\n}\n\ntypedef Memory = {\n\tvar usedJSHeapSize:Float;\n\tvar totalJSHeapSize:Float;\n\tvar jsHeapSizeLimit:Float;\n}","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n@:coreApi class Reflect {\n\n\tpublic inline static function hasField( o : Dynamic, field : String ) : Bool {\n\t\treturn untyped __js__('Object').prototype.hasOwnProperty.call(o, field);\n\t}\n\n\tpublic static function field( o : Dynamic, field : String ) : Dynamic {\n\t\ttry return untyped o[field] catch( e : Dynamic ) return null;\n\t}\n\n\tpublic inline static function setField( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\to[field] = value;\n\t}\n\n\tpublic static inline function getProperty( o : Dynamic, field : String ) : Dynamic untyped {\n\t\tvar tmp;\n\t\treturn if( o == null ) __define_feature__(\"Reflect.getProperty\",null) else if( o.__properties__ && (tmp=o.__properties__[\"get_\"+field]) ) o[tmp]() else o[field];\n\t}\n\n\tpublic static inline function setProperty( o : Dynamic, field : String, value : Dynamic ) : Void untyped {\n\t\tvar tmp;\n\t\tif( o.__properties__ && (tmp=o.__properties__[\"set_\"+field]) ) o[tmp](value) else o[field] = __define_feature__(\"Reflect.setProperty\",value);\n\t}\n\n\tpublic inline static function callMethod( o : Dynamic, func : haxe.Constraints.Function, args : Array<Dynamic> ) : Dynamic untyped {\n\t\treturn func.apply(o,args);\n\t}\n\n\tpublic static function fields( o : Dynamic ) : Array<String> {\n\t\tvar a = [];\n\t\tif (o != null) untyped {\n\t\t\tvar hasOwnProperty = __js__('Object').prototype.hasOwnProperty;\n\t\t\t__js__(\"for( var f in o ) {\");\n\t\t\tif( f != \"__id__\" && f != \"hx__closures__\" && hasOwnProperty.call(o, f) ) a.push(f);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn a;\n\t}\n\n\tpublic static function isFunction( f : Dynamic ) : Bool untyped {\n\t\treturn __js__(\"typeof(f)\") == \"function\" && !(js.Boot.isClass(f) || js.Boot.isEnum(f));\n\t}\n\n\tpublic static function compare<T>( a : T, b : T ) : Int {\n\t\treturn ( a == b ) ? 0 : (((cast a) > (cast b)) ? 1 : -1);\n\t}\n\n\tpublic static function compareMethods( f1 : Dynamic, f2 : Dynamic ) : Bool {\n\t\tif( f1 == f2 )\n\t\t\treturn true;\n\t\tif( !isFunction(f1) || !isFunction(f2) )\n\t\t\treturn false;\n\t\treturn f1.scope == f2.scope && f1.method == f2.method && f1.method != null;\n\t}\n\n\tpublic static function isObject( v : Dynamic ) : Bool untyped {\n\t\tif( v == null )\n\t\t\treturn false;\n\t\tvar t = __js__(\"typeof(v)\");\n\t\treturn (t == \"string\" || (t == \"object\" && v.__enum__ == null)) || (t == \"function\" && (js.Boot.isClass(v) || js.Boot.isEnum(v)) != null);\n\t}\n\n\tpublic static function isEnumValue( v : Dynamic ) : Bool {\n\t\treturn v != null && v.__enum__ != null;\n\t}\n\n\tpublic static function deleteField( o : Dynamic, field : String ) : Bool untyped {\n\t\tif( !hasField(o,field) ) return false;\n\t\t__js__(\"delete\")(o[field]);\n\t\treturn true;\n\t}\n\n\tpublic static function copy<T>( o : T ) : T {\n\t\tvar o2 : Dynamic = {};\n\t\tfor( f in Reflect.fields(o) )\n\t\t\tReflect.setField(o2,f,Reflect.field(o,f));\n\t\treturn o2;\n\t}\n\n\t@:overload(function( f : Array<Dynamic> -> Void ) : Dynamic {})\n\tpublic static function makeVarArgs( f : Array<Dynamic> -> Dynamic ) : Dynamic {\n\t\treturn function() {\n\t\t\tvar a = untyped Array.prototype.slice.call(__js__(\"arguments\"));\n\t\t\treturn f(a);\n\t\t};\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nimport js.Boot;\n\n@:keepInit\n@:coreApi class Std {\n\n\tpublic static inline function is( v : Dynamic, t : Dynamic ) : Bool {\n\t\treturn untyped js.Boot.__instanceof(v,t);\n\t}\n\n\tpublic static inline function instance<T:{},S:T>( value : T, c : Class<S> ) : S {\n\t\treturn untyped __instanceof__(value, c) ? cast value : null;\n\t}\n\n\tpublic static function string( s : Dynamic ) : String {\n\t\treturn untyped js.Boot.__string_rec(s,\"\");\n\t}\n\n\tpublic static inline function int( x : Float ) : Int {\n\t\treturn (cast x) | 0;\n\t}\n\n\tpublic static function parseInt( x : String ) : Null<Int> {\n\t\tvar v = untyped __js__(\"parseInt\")(x, 10);\n\t\t// parse again if hexadecimal\n\t\tif( v == 0 && (x.charCodeAt(1) == 'x'.code || x.charCodeAt(1) == 'X'.code) )\n\t\t\tv = untyped __js__(\"parseInt\")(x);\n\t\tif( untyped __js__(\"isNaN\")(v) )\n\t\t\treturn null;\n\t\treturn cast v;\n\t}\n\n\tpublic static inline function parseFloat( x : String ) : Float {\n\t\treturn untyped __js__(\"parseFloat\")(x);\n\t}\n\n\tpublic static function random( x : Int ) : Int {\n\t\treturn untyped x <= 0 ? 0 : Math.floor(Math.random()*x);\n\t}\n\n\tstatic function __init__() : Void untyped {\n\t\t__feature__(\"js.Boot.getClass\",String.prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"String\"] = String,String));\n\t\t__feature__(\"js.Boot.isClass\",String.__name__ = __feature__(\"Type.getClassName\",[\"String\"],true));\n\t\t__feature__(\"Type.resolveClass\",$hxClasses[\"Array\"] = Array);\n\t\t__feature__(\"js.Boot.isClass\",Array.__name__ = __feature__(\"Type.getClassName\",[\"Array\"],true));\n\t\t__feature__(\"Date.*\", {\n\t\t\t__feature__(\"js.Boot.getClass\",__js__('Date').prototype.__class__ = __feature__(\"Type.resolveClass\",$hxClasses[\"Date\"] = __js__('Date'),__js__('Date')));\n\t\t\t__feature__(\"js.Boot.isClass\",__js__('Date').__name__ = [\"Date\"]);\n\t\t});\n\t\t__feature__(\"Int.*\",{\n\t\t\tvar Int = __feature__(\"Type.resolveClass\", $hxClasses[\"Int\"] = { __name__ : [\"Int\"] }, { __name__ : [\"Int\"] });\n\t\t});\n\t\t__feature__(\"Dynamic.*\",{\n\t\t\tvar Dynamic = __feature__(\"Type.resolveClass\", $hxClasses[\"Dynamic\"] = { __name__ : [\"Dynamic\"] }, { __name__ : [\"Dynamic\"] });\n\t\t});\n\t\t__feature__(\"Float.*\",{\n\t\t\tvar Float = __feature__(\"Type.resolveClass\", $hxClasses[\"Float\"] = __js__(\"Number\"), __js__(\"Number\"));\n\t\t\tFloat.__name__ = [\"Float\"];\n\t\t});\n\t\t__feature__(\"Bool.*\",{\n\t\t\tvar Bool = __feature__(\"Type.resolveEnum\",$hxClasses[\"Bool\"] = __js__(\"Boolean\"), __js__(\"Boolean\"));\n\t\t\tBool.__ename__ = [\"Bool\"];\n\t\t});\n\t\t__feature__(\"Class.*\",{\n\t\t\tvar Class = __feature__(\"Type.resolveClass\", $hxClasses[\"Class\"] = { __name__ : [\"Class\"] }, { __name__ : [\"Class\"] });\n\t\t});\n\t\t__feature__(\"Enum.*\",{\n\t\t\tvar Enum = {};\n\t\t});\n\t\t__feature__(\"Void.*\",{\n\t\t\tvar Void = __feature__(\"Type.resolveEnum\", $hxClasses[\"Void\"] = { __ename__ : [\"Void\"] }, { __ename__ : [\"Void\"] });\n\t\t});\n\n#if !js_es5\n\t\t__feature__(\"Array.map\",\n\t\t\tif( Array.prototype.map == null )\n\t\t\t\tArray.prototype.map = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length )\n\t\t\t\t\t\ta[i] = f(__this__[i]);\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n\t\t__feature__(\"Array.filter\",\n\t\t\tif( Array.prototype.filter == null )\n\t\t\t\tArray.prototype.filter = function(f) {\n\t\t\t\t\tvar a = [];\n\t\t\t\t\tfor( i in 0...__this__.length ) {\n\t\t\t\t\t\tvar e = __this__[i];\n\t\t\t\t\t\tif( f(e) ) a.push(e);\n\t\t\t\t\t}\n\t\t\t\t\treturn a;\n\t\t\t\t}\n\t\t);\n#end\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n/**\n\tThis class provides advanced methods on Strings. It is ideally used with\n\t'using StringTools' and then acts as an extension to the String class.\n\n\tIf the first argument to any of the methods is null, the result is\n\tunspecified.\n**/\n#if cpp\nusing cpp.NativeString;\n#end\nclass StringTools {\n\t/**\n\t\tEncode an URL by using the standard format.\n\t**/\n\t#if (!java && !cpp) inline #end public static function urlEncode( s : String ) : String {\n\t\t#if flash\n\t\t\treturn untyped __global__[\"encodeURIComponent\"](s);\n\t\t#elseif neko\n\t\t\treturn untyped new String(_urlEncode(s.__s));\n\t\t#elseif js\n\t\t\treturn untyped encodeURIComponent(s);\n\t\t#elseif cpp\n\t\t\treturn untyped s.__URLEncode();\n\t\t#elseif java\n\t\t\ttry\n\t\t\t\treturn untyped __java__(\"java.net.URLEncoder.encode(s, \\\"UTF-8\\\")\")\n\t\t\tcatch (e:Dynamic) throw e;\n\t\t#elseif cs\n\t\t\treturn untyped cs.system.Uri.EscapeDataString(s);\n\t\t#elseif python\n\t\t\treturn python.lib.urllib.Parse.quote(s, \"\");\n\t\t#else\n\t\t\treturn null;\n\t\t#end\n\t}\n\n\t/**\n\t\tDecode an URL using the standard format.\n\t**/\n\t#if (!java && !cpp) inline #end public static function urlDecode( s : String ) : String {\n\t\t#if flash\n\t\t\treturn untyped __global__[\"decodeURIComponent\"](s.split(\"+\").join(\" \"));\n\t\t#elseif neko\n\t\t\treturn untyped new String(_urlDecode(s.__s));\n\t\t#elseif js\n\t\t\treturn untyped decodeURIComponent(s.split(\"+\").join(\" \"));\n\t\t#elseif cpp\n\t\t\treturn untyped s.__URLDecode();\n\t\t#elseif java\n\t\t\ttry\n\t\t\t\treturn untyped __java__(\"java.net.URLDecoder.decode(s, \\\"UTF-8\\\")\")\n\t\t\tcatch (e:Dynamic) throw e;\n\t\t#elseif cs\n\t\t\treturn untyped cs.system.Uri.UnescapeDataString(s);\n\t\t#elseif python\n\t\t\treturn python.lib.urllib.Parse.unquote(s);\n\t\t#else\n\t\t\treturn null;\n\t\t#end\n\t}\n\n\t/**\n\t\tEscapes HTML special characters of the string `s`.\n\n\t\tThe following replacements are made:\n\n\t\t- `&` becomes `&amp`;\n\t\t- `<` becomes `&lt`;\n\t\t- `>` becomes `&gt`;\n\n\t\tIf `quotes` is true, the following characters are also replaced:\n\n\t\t- `\"` becomes `&quot`;\n\t\t- `'` becomes `&#039`;\n\t**/\n\tpublic static function htmlEscape( s : String, ?quotes : Bool ) : String {\n\t\ts = s.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\n\t\treturn quotes ? s.split('\"').join(\"&quot;\").split(\"'\").join(\"&#039;\") : s;\n\t}\n\n\t/**\n\t\tUnescapes HTML special characters of the string `s`.\n\n\t\tThis is the inverse operation to htmlEscape, i.e. the following always\n\t\tholds: htmlUnescape(htmlEscape(s)) == s\n\n\t\tThe replacements follow:\n\n\t\t- `&amp;` becomes `&`\n\t\t- `&lt;` becomes `<`\n\t\t- `&gt;` becomes `>`\n\t\t- `&quot;` becomes `\"`\n\t\t- `&#039;` becomes `'`\n\t**/\n\tpublic static function htmlUnescape( s : String ) : String {\n\t\treturn s.split(\"&gt;\").join(\">\").split(\"&lt;\").join(\"<\").split(\"&quot;\").join('\"').split(\"&#039;\").join(\"'\").split(\"&amp;\").join(\"&\");\n\t}\n\n\t/**\n\t\tTells if the string `s` starts with the string `start`.\n\n\t\tIf `start` is null, the result is unspecified.\n\n\t\tIf `start` is the empty String \"\", the result is true.\n\t**/\n\tpublic static #if (cs || java) inline #end function startsWith( s : String, start : String ) : Bool {\n\t\t#if java\n\t\treturn untyped s.startsWith(start);\n\t\t#elseif cs\n\t\treturn untyped s.StartsWith(start);\n\t\t#elseif cpp\n\t\tif (s.length<start.length)\n\t\t\treturn false;\n\t\tvar p0 = s.c_str();\n\t\tvar p1 = start.c_str();\n\t\tfor(i in 0...start.length)\n\t\t\tif ( p0.at(i) != p1.at(i) )\n\t\t\t\treturn false;\n\t\treturn true;\n\t\t#else\n\t\treturn( s.length >= start.length && s.substr(0, start.length) == start );\n\t\t#end\n\t}\n\n\t/**\n\t\tTells if the string `s` ends with the string `end`.\n\n\t\tIf `end` is null, the result is unspecified.\n\n\t\tIf `end` is the empty String \"\", the result is true.\n\t**/\n\tpublic static #if (cs || java) inline #end function endsWith( s : String, end : String ) : Bool {\n\t\t#if java\n\t\treturn untyped s.endsWith(end);\n\t\t#elseif cs\n\t\treturn untyped s.EndsWith(end);\n\t\t#elseif cpp\n\t\tif (s.length<end.length)\n\t\t\treturn false;\n\t\tvar p0 = s.c_str().add( s.length-end.length );\n\t\tvar p1 = end.c_str();\n\t\tfor(i in 0...end.length)\n\t\t\tif ( p0.at(i) != p1.at(i) )\n\t\t\t\treturn false;\n\t\treturn true;\n\t\t#else\n\t\tvar elen = end.length;\n\t\tvar slen = s.length;\n\t\treturn( slen >= elen && s.substr(slen - elen, elen) == end );\n\t\t#end\n\t}\n\n\t/**\n\t\tTells if the character in the string `s` at position `pos` is a space.\n\n\t\tA character is considered to be a space character if its character code\n\t\tis 9,10,11,12,13 or 32.\n\n\t\tIf `s` is the empty String \"\", or if pos is not a valid position within\n\t\t`s`, the result is false.\n\t**/\n\tpublic static function isSpace( s : String, pos : Int ) : Bool {\n\t\t#if python\n\t\tif (s.length == 0 || pos < 0 || pos >= s.length) return false;\n\t\t#end\n\t\tvar c = s.charCodeAt( pos );\n\t\treturn (c > 8 && c < 14) || c == 32;\n\t}\n\n\t/**\n\t\tRemoves leading space characters of `s`.\n\n\t\tThis function internally calls isSpace() to decide which characters to\n\t\tremove.\n\n\t\tIf `s` is the empty String \"\" or consists only of space characters, the\n\t\tresult is the empty String \"\".\n\t**/\n\tpublic #if cs inline #end static function ltrim( s : String ) : String {\n\t\t#if cs\n\t\treturn untyped s.TrimStart();\n\t\t#else\n\t\tvar l = s.length;\n\t\tvar r = 0;\n\t\twhile( r < l && isSpace(s,r) ){\n\t\t\tr++;\n\t\t}\n\t\tif( r > 0 )\n\t\t\treturn s.substr(r, l-r);\n\t\telse\n\t\t\treturn s;\n\t\t#end\n\t}\n\n\t/**\n\t\tRemoves trailing space characters of `s`.\n\n\t\tThis function internally calls isSpace() to decide which characters to\n\t\tremove.\n\n\t\tIf `s` is the empty String \"\" or consists only of space characters, the\n\t\tresult is the empty String \"\".\n\t**/\n\tpublic #if cs inline #end static function rtrim( s : String ) : String {\n\t\t#if cs\n\t\treturn untyped s.TrimEnd();\n\t\t#else\n\t\tvar l = s.length;\n\t\tvar r = 0;\n\t\twhile( r < l && isSpace(s,l-r-1) ){\n\t\t\tr++;\n\t\t}\n\t\tif( r > 0 ){\n\t\t\treturn s.substr(0, l-r);\n\t\t}else{\n\t\t\treturn s;\n\t\t}\n\t\t#end\n\t}\n\n\t/**\n\t\tRemoves leading and trailing space characters of `s`.\n\n\t\tThis is a convenience function for ltrim(rtrim(s)).\n\t**/\n\tpublic #if (cs || java) inline #end static function trim( s : String ) : String {\n\t\t#if cs\n\t\treturn untyped s.Trim();\n\t\t#elseif java\n\t\treturn untyped s.trim();\n\t\t#else\n\t\treturn ltrim(rtrim(s));\n\t\t#end\n\t}\n\n\t/**\n\t\tConcatenates `c` to `s` until `s.length` is at least `l`.\n\n\t\tIf `c` is the empty String \"\" or if `l` does not exceed `s.length`,\n\t\t`s` is returned unchanged.\n\n\t\tIf `c.length` is 1, the resulting String length is exactly `l`.\n\n\t\tOtherwise the length may exceed `l`.\n\n\t\tIf `c` is null, the result is unspecified.\n\t**/\n\tpublic static function lpad( s : String, c : String, l : Int ) : String {\n\t\tif (c.length <= 0)\n\t\t\treturn s;\n\n\t\twhile (s.length < l) {\n\t\t\ts = c + s;\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t\tAppends `c` to `s` until `s.length` is at least `l`.\n\n\t\tIf `c` is the empty String \"\" or if `l` does not exceed `s.length`,\n\t\t`s` is returned unchanged.\n\n\t\tIf `c.length` is 1, the resulting String length is exactly `l`.\n\n\t\tOtherwise the length may exceed `l`.\n\n\t\tIf `c` is null, the result is unspecified.\n\t**/\n\tpublic static function rpad( s : String, c : String, l : Int ) : String {\n\t\tif (c.length <= 0)\n\t\t\treturn s;\n\n\t\twhile (s.length < l) {\n\t\t\ts = s + c;\n\t\t}\n\t\treturn s;\n\t}\n\n\t/**\n\t\tReplace all occurences of the String `sub` in the String `s` by the\n\t\tString `by`.\n\n\t\tIf `sub` is the empty String \"\", `by` is inserted after each character\n\t\tof `s`. If `by` is also the empty String \"\", `s` remains unchanged.\n\n\t\tThis is a convenience function for `s.split(sub).join(by)`.\n\n\t\tIf `sub` or `by` are null, the result is unspecified.\n\t**/\n\tpublic static function replace( s : String, sub : String, by : String ) : String {\n\t\t#if java\n\t\tif (sub.length == 0)\n\t\t\treturn s.split(sub).join(by);\n\t\telse\n\t\t\treturn untyped s.replace(sub, by);\n\t\t#elseif cs\n\t\tif (sub.length == 0)\n\t\t\treturn s.split(sub).join(by);\n\t\telse\n\t\t\treturn untyped s.Replace(sub, by);\n\t\t#else\n\t\treturn s.split(sub).join(by);\n\t\t#end\n\t}\n\n\t/**\n\t\tEncodes `n` into a hexadecimal representation.\n\n\t\tIf `digits` is specified, the resulting String is padded with \"0\" until\n\t\tits length equals `digits`.\n\t**/\n\tpublic static function hex( n : Int, ?digits : Int ) {\n\t\t#if flash\n\t\t\tvar n : UInt = n;\n\t\t\tvar s : String = untyped n.toString(16);\n\t\t\ts = s.toUpperCase();\n\t\t#else\n\t\t\tvar s = \"\";\n\t\t\tvar hexChars = \"0123456789ABCDEF\";\n\t\t\tdo {\n\t\t\t\ts = hexChars.charAt(n&15) + s;\n\t\t\t\tn >>>= 4;\n\t\t\t} while( n > 0 );\n\t\t#end\n\t\t#if python\n\t\tif (digits != null && s.length < digits) {\n\t\t\tvar diff = digits - s.length;\n\t\t\tfor (_ in 0...diff) {\n\t\t\t\ts = \"0\" + s;\n\t\t\t}\n\t\t}\n\t\t#else\n\t\tif( digits != null )\n\t\t\twhile( s.length < digits )\n\t\t\t\ts = \"0\"+s;\n\t\t#end\n\t\treturn s;\n\t}\n\n\t/**\n\t\tReturns the character code at position `index` of String `s`, or an\n\t\tend-of-file indicator at if `position` equals `s.length`.\n\n\t\tThis method is faster than String.charCodeAt() on some platforms, but\n\t\tthe result is unspecified if `index` is negative or greater than\n\t\t`s.length`.\n\n\t\tEnd of file status can be checked by calling `StringTools.isEof` with\n\t\tthe returned value as argument.\n\n\t\tThis operation is not guaranteed to work if `s` contains the \\0\n\t\tcharacter.\n\t**/\n\tpublic static inline function fastCodeAt( s : String, index : Int ) : Int {\n\t\t#if neko\n\t\treturn untyped __dollar__sget(s.__s, index);\n\t\t#elseif cpp\n\t\treturn untyped s.cca(index);\n\t\t#elseif flash\n\t\treturn untyped s.cca(index);\n\t\t#elseif java\n\t\treturn ( index < s.length ) ? cast(_charAt(s, index), Int) : -1;\n\t\t#elseif cs\n\t\treturn ( cast(index, UInt) < s.length ) ? cast(s[index], Int) : -1;\n\t\t#elseif js\n\t\treturn (untyped s).charCodeAt(index);\n\t\t#elseif python\n\t\treturn if (index >= s.length) -1 else python.internal.UBuiltins.ord(python.Syntax.arrayAccess(s, index));\n\t\t#else\n\t\treturn untyped s.cca(index);\n\t\t#end\n\t}\n\n\t/*\n\t\tTells if `c` represents the end-of-file (EOF) character.\n\t*/\n\t@:noUsing public static inline function isEof( c : Int ) : Bool {\n\t\t#if (flash || cpp)\n\t\treturn c == 0;\n\t\t#elseif js\n\t\treturn c != c; // fast NaN\n\t\t#elseif neko\n\t\treturn c == null;\n\t\t#elseif cs\n\t\treturn c == -1;\n\t\t#elseif java\n\t\treturn c == -1;\n\t\t#elseif python\n\t\treturn c == -1;\n\t\t#else\n\t\treturn false;\n\t\t#end\n\t}\n\n\t#if java\n\tprivate static inline function _charAt(str:String, idx:Int):java.StdTypes.Char16 return untyped str._charAt(idx);\n\t#end\n\n\t#if neko\n\tprivate static var _urlEncode = neko.Lib.load(\"std\",\"url_encode\",1);\n\tprivate static var _urlDecode = neko.Lib.load(\"std\",\"url_decode\",1);\n\t#end\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nenum ValueType {\n\tTNull;\n\tTInt;\n\tTFloat;\n\tTBool;\n\tTObject;\n\tTFunction;\n\tTClass( c : Class<Dynamic> );\n\tTEnum( e : Enum<Dynamic> );\n\tTUnknown;\n}\n\n@:coreApi class Type {\n\n\tpublic static inline function getClass<T>( o : T ) : Class<T> {\n\t\treturn if (o == null) null else @:privateAccess js.Boot.getClass(o);\n\t}\n\n\tpublic static function getEnum( o : EnumValue ) : Enum<Dynamic> untyped {\n\t\tif( o == null )\n\t\t\treturn null;\n\t\treturn o.__enum__;\n\t}\n\n\tpublic static function getSuperClass( c : Class<Dynamic> ) : Class<Dynamic> untyped {\n\t\treturn c.__super__;\n\t}\n\n\n\tpublic static function getClassName( c : Class<Dynamic> ) : String {\n\t\tvar a : Array<String> = untyped c.__name__;\n\t\tif (a == null)\n\t\t\treturn null;\n\t\treturn a.join(\".\");\n\t}\n\n\tpublic static function getEnumName( e : Enum<Dynamic> ) : String {\n\t\tvar a : Array<String> = untyped e.__ename__;\n\t\treturn a.join(\".\");\n\t}\n\n\tpublic static function resolveClass( name : String ) : Class<Dynamic> untyped {\n\t\tvar cl : Class<Dynamic> = $hxClasses[name];\n\t\t// ensure that this is a class\n\t\tif( cl == null || !js.Boot.isClass(cl) )\n\t\t\treturn null;\n\t\treturn cl;\n\t}\n\n\tpublic static function resolveEnum( name : String ) : Enum<Dynamic> untyped {\n\t\tvar e : Dynamic = $hxClasses[name];\n\t\t// ensure that this is an enum\n\t\tif( e == null || !js.Boot.isEnum(e) )\n\t\t\treturn null;\n\t\treturn e;\n\t}\n\n\tpublic static function createInstance<T>( cl : Class<T>, args : Array<Dynamic> ) : T untyped {\n\t\tswitch( args.length ) {\n\t\tcase 0:\n\t\t\treturn __new__(cl);\n\t\tcase 1:\n\t\t\treturn __new__(cl,args[0]);\n\t\tcase 2:\n\t\t\treturn __new__(cl,args[0],args[1]);\n\t\tcase 3:\n\t\t\treturn __new__(cl,args[0],args[1],args[2]);\n\t\tcase 4:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3]);\n\t\tcase 5:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4]);\n\t\tcase 6:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5]);\n\t\tcase 7:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6]);\n\t\tcase 8:\n\t\t\treturn __new__(cl,args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7]);\n\t\tdefault:\n\t\t\tthrow \"Too many arguments\";\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic static function createEmptyInstance<T>( cl : Class<T> ) : T untyped {\n\t\t__js__(\"function empty() {}; empty.prototype = cl.prototype\");\n\t\treturn __js__(\"new empty()\");\n\t}\n\n\tpublic static function createEnum<T>( e : Enum<T>, constr : String, ?params : Array<Dynamic> ) : T {\n\t\tvar f:Dynamic = Reflect.field(e,constr);\n\t\tif( f == null ) throw \"No such constructor \"+constr;\n\t\tif( Reflect.isFunction(f) ) {\n\t\t\tif( params == null ) throw \"Constructor \"+constr+\" need parameters\";\n\t\t\treturn Reflect.callMethod(e,f,params);\n\t\t}\n\t\tif( params != null && params.length != 0 )\n\t\t\tthrow \"Constructor \"+constr+\" does not need parameters\";\n\t\treturn f;\n\t}\n\n\tpublic static function createEnumIndex<T>( e : Enum<T>, index : Int, ?params : Array<Dynamic> ) : T {\n\t\tvar c : String = (untyped e.__constructs__)[index];\n\t\tif( c == null ) throw index+\" is not a valid enum constructor index\";\n\t\treturn createEnum(e,c,params);\n\t}\n\n\tpublic static function getInstanceFields( c : Class<Dynamic> ) : Array<String> {\n\t\tvar a = [];\n\t\tuntyped __js__(\"for(var i in c.prototype) a.push(i)\");\n\t\ta.remove(\"__class__\");\n\t\ta.remove(\"__properties__\");\n\t\treturn a;\n\t}\n\n\tpublic static function getClassFields( c : Class<Dynamic> ) : Array<String> {\n\t\tvar a = Reflect.fields(c);\n\t\ta.remove(\"__name__\");\n\t\ta.remove(\"__interfaces__\");\n\t\ta.remove(\"__properties__\");\n\t\ta.remove(\"__super__\");\n\t\ta.remove(\"__meta__\");\n\t\ta.remove(\"prototype\");\n\t\treturn a;\n\t}\n\n\tpublic static function getEnumConstructs( e : Enum<Dynamic> ) : Array<String> {\n\t\tvar a : Array<String> = untyped e.__constructs__;\n\t\treturn a.copy();\n\t}\n\n\tpublic static function typeof( v : Dynamic ) : ValueType untyped {\n\t\tswitch( __js__(\"typeof\")(v) ) {\n\t\tcase \"boolean\": return TBool;\n\t\tcase \"string\": return TClass(String);\n\t\tcase \"number\":\n\t\t\t// this should handle all cases : NaN, +/-Inf and Floats outside range\n\t\t\tif( Math.ceil(v) == v%2147483648.0 )\n\t\t\t\treturn TInt;\n\t\t\treturn TFloat;\n\t\tcase \"object\":\n\t\t\tif( v == null )\n\t\t\t\treturn TNull;\n\t\t\tvar e = v.__enum__;\n\t\t\tif( e != null )\n\t\t\t\treturn TEnum(e);\n\t\t\tvar c = js.Boot.getClass(v);\n\t\t\tif( c != null )\n\t\t\t\treturn TClass(c);\n\t\t\treturn TObject;\n\t\tcase \"function\":\n\t\t\tif( js.Boot.isClass(v) || js.Boot.isEnum(v) )\n\t\t\t\treturn TObject;\n\t\t\treturn TFunction;\n\t\tcase \"undefined\":\n\t\t\treturn TNull;\n\t\tdefault:\n\t\t\treturn TUnknown;\n\t\t}\n\t}\n\n\tpublic static function enumEq<T>( a : T, b : T ) : Bool untyped {\n\t\tif( a == b )\n\t\t\treturn true;\n\t\ttry {\n\t\t\tif( a[0] != b[0] )\n\t\t\t\treturn false;\n\t\t\tfor( i in 2...a.length )\n\t\t\t\tif( !enumEq(a[i],b[i]) )\n\t\t\t\t\treturn false;\n\t\t\tvar e = a.__enum__;\n\t\t\tif( e != b.__enum__ || e == null )\n\t\t\t\treturn false;\n\t\t} catch( e : Dynamic ) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tpublic inline static function enumConstructor( e : EnumValue ) : String {\n\t\treturn untyped e[0];\n\t}\n\n\tpublic inline static function enumParameters( e : EnumValue ) : Array<Dynamic> {\n\t\treturn untyped e.slice(2);\n\t}\n\n\tpublic inline static function enumIndex( e : EnumValue ) : Int {\n\t\treturn untyped e[1];\n\t}\n\n\tpublic static function allEnums<T>( e : Enum<T> ) : Array<T> {\n\t\treturn untyped e.__empty_constructs__;\n\t}\n\n}\n\n","/*\n * Copyright (C)2005-2013 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\n#if ((flash || flash9doc || cs) && !doc_gen)\n/**\n\tThe unsigned Int type is only defined for Flash and C#. It's currently\n\thandled the same as a normal Int.\n**/\n@:coreType\n@:notNull\n@:runtimeValue\n@:analyzer(no_const_propagation)\nabstract UInt to Int from Int\n{\n\t@:commutative @:op(A+B) private static function addI(lhs:UInt, rhs:Int):UInt;\n\t@:commutative @:op(A+B) private static function addF(lhs:UInt, rhs:Float):Float;\n\t@:op(A+B) private static function add(lhs:UInt, rhs:UInt):UInt;\n\n\t@:commutative @:op(A*B) private static function mulI(lhs:UInt, rhs:Int):UInt;\n\t@:commutative @:op(A*B) private static function mulF(lhs:UInt, rhs:Float):Float;\n\t@:op(A*B) private static function mul(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A%B) private static function modI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A%B) private static function modF(lhs:UInt, rhs:Float):Float;\n\t@:op(A%B) private static function mod(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A-B) private static function subI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A-B) private static function subF(lhs:UInt, rhs:Float):Float;\n\t@:op(A-B) private static function sub(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A/B) private static function divI(lhs:UInt, rhs:Int):Float;\n\t@:op(A/B) private static function divF(lhs:UInt, rhs:Float):Float;\n\t@:op(A/B) private static function div(lhs:UInt, rhs:UInt):Float;\n\n\t@:commutative @:op(A|B) private static function orI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A|B) private static function or(lhs:UInt, rhs:UInt):UInt;\n\n\t@:commutative @:op(A^B) private static function xorI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A^B) private static function xor(lhs:UInt, rhs:UInt):UInt;\n\n\t@:commutative @:op(A&B) private static function andI(lhs:UInt, rhs:Int):UInt;\n\t@:op(A&B) private static function and(lhs:UInt, rhs:UInt):UInt;\n\n\t@:op(A<<B) private static function shl(lhs:UInt, rhs:Int):UInt;\n\t@:op(A>>B) private static function shr(lhs:UInt, rhs:Int):UInt;\n\t@:op(A>>>B) private static function ushr(lhs:UInt, rhs:Int):UInt;\n\n\t@:op(A>B) private static function gt(lhs:UInt, rhs:UInt):Bool;\n\t@:op(A>=B) private static function gte(lhs:UInt, rhs:UInt):Bool;\n\t@:op(A<B) private static function lt(lhs:UInt, rhs:UInt):Bool;\n\t@:op(A<=B) private static function lte(lhs:UInt, rhs:UInt):Bool;\n\n\t@:op(A>B) private static function gtf(lhs:UInt, rhs:Float):Bool;\n\t@:op(A>B) private static function gtf(lhs:Float, rhs:UInt):Bool;\n\t@:op(A>=B) private static function gtef(lhs:UInt, rhs:Float):Bool;\n\t@:op(A>=B) private static function gtef(lhs:Float, rhs:UInt):Bool;\n\t@:op(A<B) private static function ltf(lhs:UInt, rhs:Float):Bool;\n\t@:op(A<B) private static function ltf(lhs:Float, rhs:UInt):Bool;\n\t@:op(A<=B) private static function ltef(lhs:UInt, rhs:Float):Bool;\n\t@:op(A<=B) private static function ltef(lhs:Float, rhs:UInt):Bool;\n\n\t@:op(~A) private static function bneg(t:UInt):UInt;\n\n\t@:commutative @:op(A == B) private static function equalsInt<T:Int>(a:UInt, b:T):Bool;\n\t@:commutative @:op(A != B) private static function notEqualsInt<T:Int>(a:UInt, b:T):Bool;\n\t@:commutative @:op(A == B) private static function equalsFloat<T:Float>(a:UInt, b:T):Bool;\n\t@:commutative @:op(A != B) private static function notEqualsFloat<T:Float>(a:UInt, b:T):Bool;\n\n\t@:op(++A) private function prefixIncrement():UInt;\n\t@:op(A++) private function postfixIncrement():UInt;\n\t@:op(--A) private function prefixDecrement():UInt;\n\t@:op(A--) private function postfixDecrement():UInt;\n}\n#else\n/**\n\tThe unsigned Int type is only defined for Flash and C#.\n\tSimulate it for other platforms.\n**/\nabstract UInt(Int) from Int to Int {\n\n\t@:op(A + B) private static inline function add(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() + b.toInt();\n\t}\n\n\t@:op(A / B) private static inline function div(a:UInt, b:UInt):Float {\n\t\treturn a.toFloat() / b.toFloat();\n\t}\n\n\t@:op(A * B) private static inline function mul(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() * b.toInt();\n\t}\n\n\t@:op(A - B) private static inline function sub(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() - b.toInt();\n\t}\n\n\t@:op(A > B) private static #if !js inline #end function gt(a:UInt, b:UInt):Bool {\n\t\tvar aNeg = a.toInt() < 0;\n\t\tvar bNeg = b.toInt() < 0;\n\t\treturn\n\t\t\tif( aNeg != bNeg ) aNeg;\n\t\t\telse a.toInt() > b.toInt();\n\t}\n\n\t@:op(A >= B) private static #if !js inline #end function gte(a:UInt, b:UInt):Bool {\n\t\tvar aNeg = a.toInt() < 0;\n\t\tvar bNeg = b.toInt() < 0;\n\t\treturn\n\t\t\tif( aNeg != bNeg ) aNeg;\n\t\t\telse a.toInt() >= b.toInt();\n\t}\n\n\t@:op(A < B) private static inline function lt(a:UInt, b:UInt):Bool {\n\t\treturn gt(b, a);\n\t}\n\n\t@:op(A <= B) private static inline function lte(a:UInt, b:UInt):Bool {\n\t\treturn gte(b, a);\n\t}\n\n\t@:op(A & B) private static inline function and(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() & b.toInt();\n\t}\n\n\t@:op(A | B) private static inline function or(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() | b.toInt();\n\t}\n\n\t@:op(A ^ B) private static inline function xor(a:UInt, b:UInt):UInt {\n\t\treturn a.toInt() ^ b.toInt();\n\t}\n\n\t@:op(A << B) private static inline function shl(a:UInt, b:Int):UInt {\n\t\treturn a.toInt() << b;\n\t}\n\n\t@:op(A >> B) private static inline function shr(a:UInt, b:Int):UInt {\n\t\treturn a.toInt() >> b;\n\t}\n\n\t@:op(A >>> B) private static inline function ushr(a:UInt, b:Int):UInt {\n\t\treturn a.toInt() >>> b;\n\t}\n\n\t@:op(A % B) private static inline function mod(a:UInt, b:UInt):UInt {\n\t\treturn Std.int( a.toFloat() % b.toFloat() );\n\t}\n\n\t@:commutative @:op(A + B) private static inline function addWithFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() + b;\n\t}\n\n\t@:commutative @:op(A * B) private static inline function mulWithFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() * b;\n\t}\n\n\t@:op(A / B) private static inline function divFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() / b;\n\t}\n\n\t@:op(A / B) private static inline function floatDiv(a:Float, b:UInt):Float {\n\t\treturn a / b.toFloat();\n\t}\n\n\t@:op(A - B) private static inline function subFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() - b;\n\t}\n\n\t@:op(A - B) private static inline function floatSub(a:Float, b:UInt):Float {\n\t\treturn a - b.toFloat();\n\t}\n\n\t@:op(A > B) private static inline function gtFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() > b;\n\t}\n\n\t@:commutative @:op(A == B) private static inline function equalsInt<T:Int>(a:UInt, b:T):Bool {\n\t\treturn a.toInt() == b;\n\t}\n\n\t@:commutative @:op(A != B) private static inline function notEqualsInt<T:Int>(a:UInt, b:T):Bool {\n\t\treturn a.toInt() != b;\n\t}\n\n\t@:commutative @:op(A == B) private static inline function equalsFloat<T:Float>(a:UInt, b:T):Bool {\n        return a.toFloat() == b;\n    }\n\n    @:commutative @:op(A != B) private static inline function notEqualsFloat<T:Float>(a:UInt, b:T):Bool {\n        return a.toFloat() != b;\n    }\n\n\t@:op(A >= B) private static inline function gteFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() >= b;\n\t}\n\n\n\t@:op(A > B) private static inline function floatGt(a:Float, b:UInt):Bool {\n\t\treturn a > b.toFloat();\n\t}\n\n\t@:op(A >= B) private static inline function floatGte(a:Float, b:UInt):Bool {\n\t\treturn a >= b.toFloat();\n\t}\n\n\t@:op(A < B) private static inline function ltFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() < b;\n\t}\n\n\t@:op(A <= B) private static inline function lteFloat(a:UInt, b:Float):Bool {\n\t\treturn a.toFloat() <= b;\n\t}\n\n\t@:op(A < B) private static inline function floatLt(a:Float, b:UInt):Bool {\n\t\treturn a < b.toFloat();\n\t}\n\n\t@:op(A <= B) private static inline function floatLte(a:Float, b:UInt):Bool {\n\t\treturn a <= b.toFloat();\n\t}\n\n\t@:op(A % B) private static inline function modFloat(a:UInt, b:Float):Float {\n\t\treturn a.toFloat() % b;\n\t}\n\n\t@:op(A % B) private static inline function floatMod(a:Float, b:UInt):Float {\n\t\treturn a % b.toFloat();\n\t}\n\n\t@:op(~A) private inline function negBits():UInt {\n\t\treturn ~this;\n\t}\n\n\t@:op(++A) private inline function prefixIncrement():UInt {\n\t\treturn ++this;\n\t}\n\n\t@:op(A++) private inline function postfixIncrement():UInt {\n\t\treturn this++;\n\t}\n\n\t@:op(--A) private inline function prefixDecrement():UInt {\n\t\treturn --this;\n\t}\n\n\t@:op(A--) private inline function postfixDecrement():UInt {\n\t\treturn this--;\n\t}\n\n\t// TODO: radix is just defined to deal with doc_gen issues\n\tprivate inline function toString(?radix:Int):String {\n\t\treturn Std.string(toFloat());\n\t}\n\n\tprivate inline function toInt():Int {\n\t\treturn this;\n\t}\n\n\t@:to private #if (!js || analyzer) inline #end function toFloat():Float {\n\t\tvar int = toInt();\n\t\tif (int < 0) {\n\t\t\treturn 4294967296.0 + int;\n\t\t}\n\t\telse {\n\t\t\t// + 0.0 here to make sure we promote to Float on some platforms\n\t\t\t// In particular, PHP was having issues when comparing to Int in the == op.\n\t\t\treturn int + 0.0;\n\t\t}\n\t}\n}\n#end\n","package com.gloyer.libs;\r\nimport pixi.core.math.Point;\r\n\r\n/**\r\n * ...\r\n * @author Loyer Guillaume\r\n */\r\nclass MathPerso\r\n{\r\n\t\r\n\tpublic static function getRandomFloat(pMin:Float, pMax:Float):Float {\r\n\t\treturn pMin + Math.random() * (pMax - pMin);\r\n\t}\r\n\t\r\n\tpublic static function getRandomInt(pMin:Float, pMax:Float):Int {\r\n\t\treturn Math.round(getRandomFloat(pMin, pMax));\r\n\t}\r\n\t\r\n\tpublic static function getRandomPoint(pMinX:Float, pMaxX:Float, pMinY:Float, pMaxY:Float):Point {\r\n\t\treturn new Point(getRandomInt(pMinX, pMaxX), getRandomInt(pMinY, pMaxY));\r\n\t}\r\n\t\r\n}","package com.gloyer.libs;\r\n\r\nimport com.isartdigital.utils.events.MouseEventType;\r\nimport com.isartdigital.utils.events.TouchEventType;\r\nimport eventemitter3.EventEmitter;\r\nimport js.html.TouchEvent;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.math.Point;\r\nimport pixi.interaction.EventTarget;\r\n\r\n\t\r\n/**\r\n * ...\r\n * @author Loyer Guillaume\r\n */\r\nclass MouseController extends EventEmitter\r\n{\r\n\t\r\n\tprivate var isMouseDown:Bool = false;\r\n\t\r\n\tprivate var scrollingMode:Bool = false;\r\n\t\r\n\tpublic static inline var MOUSE_MOVE_EVENT:String = \"MOUSE MOVE EVENT\";\r\n\tpublic static inline var MOUSE_DOWN_MOVE_EVENT:String = \"MOUSE DOWN MOVE EVENT\";\r\n\tpublic static inline var MOUSE_DOWN_EVENT:String = \"MOUSE DOWN EVENT\";\r\n\tpublic static inline var MOUSE_CLICK_EVENT:String = \"MOUSE CLICK EVENT\";\r\n\tpublic static inline var MOUSE_UP_EVENT:String = \"MOUSE UP EVENT\";\r\n\t\r\n\tpublic var currentPosition:Point;\r\n\t\r\n\t/**\r\n\t * Nombre d'appelle à l'event move lors d'un drag\r\n\t */\r\n\tpublic var numberOfMovementScroll:Int = 0;\r\n\t\r\n\t/**\r\n\t * Nombre d'appelle max, avant de considèrer le clic comme un scroll\r\n\t */\r\n\tprivate static inline var MAX_MOUSE_MOVEMENT_SCROLL_DEFAULT:Int = 10;\r\n\tprivate var maxMouseMovementScroll:Int;\r\n\t\r\n\t\r\n\t/**\r\n\t * instance unique de la classe ControllerMouse\r\n\t */\r\n\tprivate static var instance: MouseController;\r\n\t\r\n\tprivate var container:Container;\r\n\t\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): MouseController {\r\n\t\tif (instance == null) instance = new MouseController();\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\t/**\r\n\t * constructeur privé pour éviter qu'une instance soit créée directement\r\n\t */\r\n\tprivate function new() \r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Initialise les events de la souris\r\n\t */\r\n\tpublic function start(pContainer:Container, ?pMaxMouvementScroll:Int = MAX_MOUSE_MOVEMENT_SCROLL_DEFAULT):Void {\r\n\t\tmaxMouseMovementScroll = pMaxMouvementScroll;\r\n\t\tsetContainer(pContainer);\r\n\t\tinitEventDesktop();\r\n\t}\r\n\t\r\n\tprivate function initEventDesktop():Void {\r\n\t\tcontainer.on(MouseEventType.MOUSE_MOVE, onMove);\r\n\t\tcontainer.on(MouseEventType.MOUSE_OUT, onMouseOut);\r\n\t\tcontainer.on(MouseEventType.MOUSE_DOWN, onMouseDown);\r\n\t\tcontainer.on(MouseEventType.CLICK, onMouseClick);\r\n\t}\r\n\t\r\n\tpublic function setContainer(pContainer:Container):Void {\r\n\t\tcontainer = pContainer;\r\n\t\tcontainer.interactive = true;\r\n\t}\r\n\t\r\n\tprivate function onMouseOut(pEvent:EventTarget):Void {\r\n\t\tisMouseDown = false;\r\n\t}\r\n\t\r\n\tprivate function onMouseDown(pEvent:EventTarget):Void {\r\n\t\tisMouseDown = true;\r\n\t\tnumberOfMovementScroll = 0;\r\n\t\t\r\n\t\tvar positionMouse:Point = pEvent.data.getLocalPosition(container);\r\n\t\tcurrentPosition = new Point(positionMouse.x, positionMouse.y);\r\n\t\t\r\n\t\tcontainer.on(MouseEventType.MOUSE_UP, onMouseUp);\r\n\t\temit(MOUSE_DOWN_EVENT);\r\n\t}\r\n\t\r\n\tprivate function onMouseClick(pEvent:EventTarget):Void { // FIXME\r\n\t\tif (numberOfMovementScroll <= maxMouseMovementScroll) {\r\n\t\t\tvar positionMouse:Point = pEvent.data.getLocalPosition(container);\r\n\t\t\tcurrentPosition = new Point(positionMouse.x, positionMouse.y);\r\n\t\t\temit(MOUSE_CLICK_EVENT, currentPosition);\r\n\t\t}\r\n\t}\r\n\t\r\n\tprivate function onMouseUp(pEvent:EventTarget):Void {\r\n\t\tisMouseDown = false;\r\n\t\tcontainer.off(MouseEventType.MOUSE_UP, onMouseUp);\r\n\t\temit(MOUSE_UP_EVENT);\r\n\t}\r\n\t\r\n\tprivate function onMove(pEvent:EventTarget):Void {\r\n\t\tvar positionMouse:Point = pEvent.data.getLocalPosition(container);\r\n\t\t\r\n\t\tif (isMouseDown) {\r\n\t\t\tnumberOfMovementScroll++;\r\n\t\t\temit(MOUSE_DOWN_MOVE_EVENT, positionMouse);\r\n\t\t}\r\n\t\t\r\n\t\tcurrentPosition = new Point(positionMouse.x, positionMouse.y);\r\n\t\temit(MOUSE_MOVE_EVENT, currentPosition);\r\n\t}\r\n\t\r\n\t/**\r\n\t * détruit l'instance unique et met sa référence interne à null\r\n\t */\r\n\tpublic function destroy (): Void {\r\n\t\tinstance = null;\r\n\t}\r\n\r\n}","package com.gloyer.libs;\r\n\r\nimport com.gloyer.libs.typedefs.TimerDelayDef;\r\nimport eventemitter3.EventEmitter;\r\nimport haxe.Timer;\r\n\r\n\t\r\n/**\r\n * ...\r\n * @author Loyer Guillaume\r\n */\r\nclass TimerDelay extends EventEmitter \r\n{\r\n\t\r\n\t/**\r\n\t * instance unique de la classe TimerDelay\r\n\t */\r\n\tprivate static var instance: TimerDelay;\r\n\t\r\n\t\r\n\tpublic static inline var TIMER_DELAY_EVENT:String = \"TIMER DELAY EVENT\";\r\n\t\r\n\tprivate var listTimerDelay:Map<String, TimerDelayDef>;\r\n\t\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): TimerDelay {\r\n\t\tif (instance == null) instance = new TimerDelay();\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\t/**\r\n\t * constructeur privé pour éviter qu'une instance soit créée directement\r\n\t */\r\n\tprivate function new() \r\n\t{\r\n\t\tsuper();\r\n\t\tlistTimerDelay = new Map<String, TimerDelayDef>();\r\n\t}\r\n\t\r\n\t\r\n\tprivate function getNameEvent(pNameEvent:String):String {\r\n\t\treturn TIMER_DELAY_EVENT + \" \" + pNameEvent;\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Créer et lance un delay qui emitera la string retourné par la fonction et lancera la callback optionnel.\r\n\t * @param\tpNameEvent: nom de l'event \r\n\t * @param\tpDurationMs: durée en millisecond du delay\r\n\t * @param\tpCallback: (optionnel) sera lancé une fois le délais terminé\r\n\t * @return  le string de l'event qui sera emit\r\n\t */\r\n\tpublic function startDelay(pNameEvent:String, pDurationMs:Int, ?pCallback:Void->Void = null):String {\r\n\t\tvar lNameEvent:String = getNameEvent(pNameEvent);\r\n\t\t\r\n\t\taddTimerDelay(lNameEvent, pDurationMs, function () {\r\n\t\t\tif (pCallback != null) {\r\n\t\t\t\tpCallback();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstopDelay(lNameEvent);\r\n\t\t});\r\n\t\t\r\n\t\treturn lNameEvent;\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Créer un lance un delay qui se répètera jusqu'au stop de celui-ci. Emit la string retourner et lance la callback optionnel à chaque itération.\r\n\t * @param\tpNameEvent: Nom de l'event\r\n\t * @param\tpDurationRepeaterMs: Durée en millisecond entre chaque itération\r\n\t * @param\tpCallback: (optionnel) sera lancé à chaque itération\r\n\t * @return  le string de l'event qui sera emit\r\n\t */\r\n\tpublic function startRepeaterDelay(pNameEvent:String, pDurationRepeaterMs:Int, ?pCallback:Void->Void = null):String {\r\n\t\tvar lNameEvent:String = getNameEvent(pNameEvent);\r\n\t\t\r\n\t\taddTimerDelay(lNameEvent, pDurationRepeaterMs, function () {\r\n\t\t\tif (pCallback != null) {\r\n\t\t\t\tpCallback();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tstopDelay(lNameEvent);\r\n\t\t\t\r\n\t\t\tstartRepeaterDelay(pNameEvent, pDurationRepeaterMs, pCallback);\r\n\t\t});\r\n\t\t\r\n\t\treturn lNameEvent;\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Met en pause tout les timerdelay en cours\r\n\t */\r\n\tpublic function pauseAllDelay():Void {\r\n\t\tvar lNameDelay:String;\r\n\t\tfor (lNameDelay in listTimerDelay.keys()) {\r\n\t\t\tpauseDelay(lNameDelay);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Met en pause le timerDelay ayant comme string d'event pNameEvent\r\n\t * @param\tpNameEvent\r\n\t */\r\n\tpublic function pauseDelay(pNameEvent:String):Void {\r\n\t\tvar lTimerDelay:TimerDelayDef = listTimerDelay.get(pNameEvent);\r\n\t\tif (!lTimerDelay.inPause) {\r\n\t\t\tvar pNewDurationDelay:Int = Math.round(lTimerDelay.durationMs - (getStampInMillisecond() - lTimerDelay.startTimestampMs));\r\n\t\t\ttrace((getStampInMillisecond() - lTimerDelay.startTimestampMs));\r\n\t\t\tlTimerDelay.durationMs = pNewDurationDelay;\r\n\t\t\tlTimerDelay.timer.stop();\r\n\t\t\tlTimerDelay.timer = null;\r\n\t\t\tlTimerDelay.inPause = true;\t\t\t\r\n\t\t\ttrace(lTimerDelay);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Reprend tout les delay là où ils en étaient\r\n\t */\r\n\tpublic function resumeAllDelay():Void {\r\n\t\tvar lNameDelay:String;\r\n\t\tfor (lNameDelay in listTimerDelay.keys()) {\r\n\t\t\tresumeDelay(lNameDelay);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Reprend le delay ayant comme nom d'emit pNameDelay\r\n\t * @param\tpNameDelay\r\n\t */\r\n\tpublic function resumeDelay(pNameDelay:String):Void {\r\n\t\tvar lTimerDelay:TimerDelayDef = listTimerDelay.get(pNameDelay);\r\n\t\tif (lTimerDelay.inPause) {\r\n\t\t\tlTimerDelay.timer = createTimerDelay(pNameDelay, lTimerDelay.durationMs, lTimerDelay.callback);\r\n\t\t\tlTimerDelay.inPause = false;\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Stop et supprime tout les delay\r\n\t */\r\n\tpublic function stopAllDelay():Void {\r\n\t\tvar lNameDelay:String;\r\n\t\tfor (lNameDelay in listTimerDelay.keys()) {\r\n\t\t\tstopDelay(lNameDelay);\r\n\t\t}\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * Stop et supprime le delay ayant comme nom d'emit pNameEvent\r\n\t * @param\tpNameEvent\r\n\t */\r\n\tpublic function stopDelay(pNameEvent:String):Void {\r\n\t\tvar lTimerDelay:TimerDelayDef = listTimerDelay.get(pNameEvent);\r\n\t\tlTimerDelay.timer.stop();\r\n\t\tlistTimerDelay.remove(pNameEvent);\r\n\t}\r\n\t\r\n\t\r\n\tprivate function getStampInMillisecond():Int {\t\t\r\n\t\treturn Math.round(Timer.stamp() * 1000);\r\n\t}\r\n\t\r\n\t\r\n\tprivate function addTimerDelay(pNameEvent:String, pDurationMs:Int, pCallback:Void->Void):Void {\r\n\t\tlistTimerDelay.set(pNameEvent, {\r\n\t\t\tcallback:\t\t\tpCallback,\r\n\t\t\ttimer: \t\t\t\tcreateTimerDelay(pNameEvent, pDurationMs, pCallback),\r\n\t\t\tstartTimestampMs: \tgetStampInMillisecond(),\r\n\t\t\tdurationMs: \t\tpDurationMs,\r\n\t\t\tinPause: \t\t\tfalse\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\tprivate function createTimerDelay(pNameEvent:String, pDurationMs:Int, pCallback:Void->Void):Timer {\r\n\t\tvar lDelay:Timer = Timer.delay(function () {\r\n\t\t\temit(pNameEvent);\r\n\t\t\tpCallback();\r\n\t\t}, pDurationMs);\r\n\t\t\r\n\t\treturn lDelay;\r\n\t}\r\n\t\r\n\t\r\n\t/**\r\n\t * détruit l'instance unique et met sa référence interne à null\r\n\t */\r\n\tpublic function destroy (): Void {\r\n\t\tinstance = null;\r\n\t}\r\n\r\n}","package com.gloyer.quarifight;\n\nimport com.gloyer.quarifight.game.GameManager;\nimport com.gloyer.quarifight.ui.GraphicLoader;\nimport com.gloyer.quarifight.ui.screens.TitleCard;\nimport com.gloyer.quarifight.ui.UIManager;\nimport com.isartdigital.utils.Config;\nimport com.isartdigital.utils.Debug;\nimport com.isartdigital.utils.events.EventType;\nimport com.isartdigital.utils.events.LoadEventType;\nimport com.isartdigital.utils.game.GameStage;\nimport com.isartdigital.utils.game.GameStageScale;\nimport com.isartdigital.utils.game.StateGraphic;\nimport com.isartdigital.utils.game.factory.MovieClipAnimFactory;\nimport com.isartdigital.utils.loader.GameLoader;\nimport com.isartdigital.utils.system.DeviceCapabilities;\nimport eventemitter3.EventEmitter;\nimport js.Browser;\nimport pixi.core.display.Container;\nimport pixi.core.renderers.Detector;\nimport pixi.core.renderers.webgl.WebGLRenderer;\nimport pixi.interaction.EventTarget;\nimport pixi.loaders.Loader;\n\n/**\n * Classe d'initialisation et lancement du jeu\n * @author Mathieu ANTHOINE\n */\n\nclass Main extends EventEmitter\n{\n\t\n\t/**\n\t * chemin vers le fichier de configuration\n\t */\n\tprivate static var configPath:String = \"config.json\";\t\n\t\n\t/**\n\t * instance unique de la classe Main\n\t */\n\tprivate static var instance: Main;\n\t\n\t/**\n\t * renderer (WebGL ou Canvas)\n\t */\n\tpublic var renderer:WebGLRenderer;\n\t\n\t/**\n\t * Element racine de la displayList\n\t */\n\tpublic var stage:Container;\n\t\n\t/**\n\t * initialisation générale\n\t */\n\tprivate static function main ():Void {\n\t\tMain.getInstance();\n\t}\n\n\t/**\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\n\t * @return instance unique\n\t */\n\tpublic static function getInstance (): Main {\n\t\tif (instance == null) instance = new Main();\n\t\treturn instance;\n\t}\n\t\n\t/**\n\t * création du jeu et lancement du chargement du fichier de configuration\n\t */\n\tprivate function new () {\n\t\t\n\t\tsuper();\n\t\t\n\t\tvar lOptions:RenderingOptions = {};\n\t\t//lOptions.antialias = true;\n\t\t//lOptions.autoResize = true;\n\t\tlOptions.backgroundColor = 0x999999;\n\t\t//lOptions.resolution = 1;\n\t\t//lOptions.transparent = false;\n\t\t//lOptions.preserveDrawingBuffer (pour dataToURL)\n\t\t\n\t\trenderer = Detector.autoDetectRenderer(DeviceCapabilities.width, DeviceCapabilities.height,lOptions);\n\t\t\n\t\t//renderer.roundPixels = true;\n\t\t\n\t\tBrowser.document.body.appendChild(renderer.view);\n\n\t\tstage = new Container();\n\t\t\n\t\tvar lConfig:Loader = new Loader();\n\t\tconfigPath += \"?\" + Date.now().getTime();\n\t\tlConfig.add(configPath);\n\t\tlConfig.once(LoadEventType.COMPLETE, preloadAssets);\n\t\t\n\t\tlConfig.load();\n\n\t}\n\t\n\t/**\n\t * charge les assets graphiques du preloader principal\n\t */\n\tprivate function preloadAssets(pLoader:Loader):Void {\n\t\t\n\t\t// initialise les paramètres de configuration\n\t\tConfig.init(Reflect.field(pLoader.resources,configPath).data);\n\t\t\n\t\t// Active le mode debug\n\t\tif (Config.debug) Debug.getInstance().init();\n\t\t// défini l'alpha des Boxes de collision\n\t\tif (Config.debug && Config.data.boxAlpha != null) StateGraphic.boxAlpha = Config.data.boxAlpha;\n\t\t// défini l'alpha des anims\n\t\tif (Config.debug && Config.data.animAlpha != null) StateGraphic.animAlpha = Config.data.animAlpha;\n\t\t\n\t\t// défini le mode de redimensionnement du Jeu\n\t\tGameStage.getInstance().scaleMode = GameStageScale.SHOW_ALL;\n\t\t// initialise le GameStage et défini la taille de la safeZone\n\t\tGameStage.getInstance().init(render,2048, 1366,true);\n\t\t\n\t\t// affiche le bouton FullScreen quand c'est nécessaire\n\t\tDeviceCapabilities.displayFullScreenButton();\n\t\t\n\t\t// Ajoute le GameStage au stage\n\t\tstage.addChild(GameStage.getInstance());\n\t\t\n\t\t// ajoute Main en tant qu'écouteur des évenements de redimensionnement\n\t\tBrowser.window.addEventListener(EventType.RESIZE, resize);\n\t\tresize();\n\t\t\n\t\t// lance le chargement des assets graphiques du preloader\n\t\tvar lLoader:GameLoader = new GameLoader();\n\t\tlLoader.addAssetFile(\"black_bg.png\");\n\t\tlLoader.addAssetFile(\"preload.png\");\n\t\tlLoader.addAssetFile(\"preload_bg.png\");\n\t\t\n\t\tlLoader.once(LoadEventType.COMPLETE, loadAssets);\n\t\tlLoader.load();\n\t\t\n\t}\t\n\t\n\t/**\n\t * lance le chargement principal\n\t */\n\tprivate function loadAssets (pLoader:GameLoader): Void {\n\t\t\n\t\tvar lLoader:GameLoader = new GameLoader();\n\t\t\t\t\n\t\tlLoader.addTxtFile(\"boxes.json\");\n\t\tlLoader.addSoundFile(\"sounds.json\");\n\n\t\tlLoader.addAssetFile(\"alpha_bg.png\");\n\t\tlLoader.addAssetFile(\"TitleCard_bg.png\");\n\t\tlLoader.addAssetFile(\"Confirm.png\");\n\t\t//lLoader.addAssetFile(\"Template.json\");\n\t\tlLoader.addFontFile(\"fonts.css\");\n\n\t\tlLoader.on(LoadEventType.PROGRESS, onLoadProgress);\n\t\tlLoader.once(LoadEventType.COMPLETE, onLoadComplete);\n\t\t\n\t\tDeviceCapabilities.init();\n\t\tlLoader.addAssetFile(DeviceCapabilities.textureType+\"/ingame/library.json\");\n\t\tlLoader.addAssetFile(DeviceCapabilities.textureType+\"/ui/library.json\");\n\n\t\t// affiche l'écran de préchargement\n\t\tUIManager.getInstance().openScreen(GraphicLoader.getInstance());\n\t\t\n\t\tBrowser.window.requestAnimationFrame(gameLoop);\n\t\t\n\t\tlLoader.load();\n\t\t\n\t}\n\t\n\t/**\n\t * transmet les paramètres de chargement au préchargeur graphique\n\t * @param\tpEvent evenement de chargement\n\t */\n\tprivate function onLoadProgress (pLoader:GameLoader): Void {\n\t\tGraphicLoader.getInstance().update(pLoader.progress/100);\n\t}\n\t\n\t/**\n\t * initialisation du jeu\n\t * @param\tpEvent evenement de chargement\n\t */\n\tprivate function onLoadComplete (pLoader:GameLoader): Void {\n\t\t\n\t\tpLoader.off(LoadEventType.PROGRESS, onLoadProgress);\n\t\t\n\t\t// transmet à MovieClipAnimFactory la description des planches de Sprites utilisées par les anim MovieClip des instances de StateGraphic\n\t\t//MovieClipAnimFactory.addTextures(GameLoader.getContent(\"Template.json\"));\n\t\t\t\t\n\t\t// transmet au StateGraphic la description des boxes de collision utilisées par les instances de StateGraphic\n\t\t//StateGraphic.addBoxes(GameLoader.getContent(\"boxes.json\"));\n\t\t\n\t\t// Ouvre la TitleClard\n\t\t//UIManager.getInstance().openScreen(TitleCard.getInstance());\n\t\tGameManager.getInstance().start();\n\t\t\n\t}\n\t\n\t/**\n\t * game loop\n\t */\n\tprivate function gameLoop(pID:Float):Void {\n\t\tBrowser.window.requestAnimationFrame(gameLoop);\n\t\t\n\t\trender();\t\t\n\t\temit(EventType.GAME_LOOP);\n\t\t\n\t}\n\t\n\t/**\n\t * Ecouteur du redimensionnement\n\t * @param\tpEvent evenement de redimensionnement\n\t */\n\tpublic function resize (pEvent:EventTarget = null): Void {\n\t\trenderer.resize(DeviceCapabilities.width, DeviceCapabilities.height);\n\t\tGameStage.getInstance().resize();\n\t}\n\t\n\t/**\n\t * fait le rendu de l'écran\n\t */\n\tprivate function render (): Void {\n\t\trenderer.render(stage);\n\t}\n\t\t\n\t/**\n\t * détruit l'instance unique et met sa référence interne à null\n\t */\n\tpublic function destroy (): Void {\n\t\tBrowser.window.removeEventListener(EventType.RESIZE, resize);\n\t\tinstance = null;\n\t}\n\t\n}","package com.gloyer.quarifight.game;\n\n\nimport com.gloyer.quarifight.game.LevelManager;\nimport com.gloyer.quarifight.ui.CheatPanel;\nimport com.gloyer.quarifight.ui.UIManager;\nimport com.isartdigital.utils.events.EventType;\nimport com.isartdigital.utils.game.CollisionManager;\nimport com.isartdigital.utils.system.DeviceCapabilities;\nimport com.isartdigital.utils.game.GameStage;\nimport pixi.interaction.EventTarget;\nimport pixi.interaction.InteractionManager;\n\n/**\n * Manager (Singleton) en charge de gérer le déroulement d'une partie\n * @author Mathieu ANTHOINE\n */\nclass GameManager\n{\n\t\n\t/**\n\t * instance unique de la classe GameManager\n\t */\n\tprivate static var instance: GameManager;\n\t\n\t/**\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\n\t * @return instance unique\n\t */\n\tpublic static function getInstance (): GameManager {\n\t\tif (instance == null) instance = new GameManager();\n\t\treturn instance;\n\t}\n\t\n\tprivate function new() {\n\t\t\n\t}\n\t\n\tpublic function start (): Void {\n\t\t\n\t\t// demande au Manager d'interface de se mettre en mode \"jeu\"\n\t\tUIManager.getInstance().startGame();\t\n\t\t\n\t\t// début de l'initialisation du jeu\n\t\t//GameStage.getInstance().getGameContainer().addChild(Template.getInstance());\n\t\t//Template.getInstance().start();\t\n\t\tCheatPanel.getInstance().ingame();\t\n\t\t\n\t\tGameStage.getInstance().getGameContainer().addChild(LevelManager.getInstance().getContainer());\n\t\tLevelManager.getInstance().start();\n\t\t\n\t\t// enregistre le GameManager en tant qu'écouteur de la gameloop principale\n\t\tMain.getInstance().on(EventType.GAME_LOOP, gameLoop);\n\t\t\n\t}\n\t\n\t/**\n\t * boucle de jeu (répétée à la cadence du jeu en fps)\n\t */\n\tpublic function gameLoop (pEvent:EventTarget): Void {\n\t\tLevelManager.getInstance().gameLoopLevel();\n\t\t// le renderer possède une propriété plugins qui contient une propriété interaction de type InteractionManager\n\t\t// les instances d'InteractionManager fournissent un certain nombre d'informations comme les coordonnées globales de la souris\n\t\t//if (DeviceCapabilities.system==DeviceCapabilities.SYSTEM_DESKTOP) trace (CollisionManager.hitTestPoint(Template.getInstance().hitBox, cast(Main.getInstance().renderer.plugins.interaction,InteractionManager).mouse.global));\n\t}\n\t\n\t/**\n\t * détruit l'instance unique et met sa référence interne à null\n\t */\n\tpublic function destroy (): Void {\n\t\tMain.getInstance().off(EventType.GAME_LOOP,gameLoop);\n\t\tinstance = null;\n\t}\n\n}","package com.gloyer.quarifight.game;\r\nimport com.gloyer.libs.TimerDelay;\r\nimport com.gloyer.quarifight.game.sprites.Eat;\r\nimport com.gloyer.quarifight.game.sprites.Fish;\r\nimport com.gloyer.quarifight.game.sprites.LevelBackground;\r\nimport com.gloyer.libs.MouseController;\r\nimport com.isartdigital.utils.game.GameStage;\r\nimport haxe.Timer;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.math.Point;\r\nimport pixi.interaction.EventTarget;\r\n\r\n\t\r\n/**\r\n * ...\r\n * @author Loyer Guillaume\r\n */\r\nclass LevelManager \r\n{\r\n\t\r\n\t/**\r\n\t * instance unique de la classe LevelManager\r\n\t */\r\n\tprivate static var instance: LevelManager;\r\n\t\r\n\tpublic static var DISTANCE_TOP_GROUND:Int = 500;\r\n\t\r\n\tprivate var container:Container;\r\n\tprivate var containerEat:Container;\r\n\tprivate var containerFish:Container;\r\n\t\r\n\tprivate var listEat:Array<Eat>;\r\n\tprivate var listFish:Array<Fish>;\r\n\t\r\n\tprivate var currentLevel:Int;\r\n\tprivate var currentBackground:LevelBackground;\r\n\t\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): LevelManager {\r\n\t\tif (instance == null) instance = new LevelManager();\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\t/**\r\n\t * constructeur privé pour éviter qu'une instance soit créée directement\r\n\t */\r\n\tprivate function new() \r\n\t{\r\n\t\tcontainer     = new Container();\r\n\t\tcontainerEat  = new Container();\r\n\t\tcontainerFish = new Container();\r\n\t}\r\n\t\r\n\tpublic function getContainer():Container {\r\n\t\treturn container;\r\n\t}\r\n\t\r\n\tpublic function start():Void {\r\n\t\tstartLevel(1);\r\n\r\n\t\tinitContainer();\r\n\r\n\t\ttest();\r\n\t\t\r\n\t\tMouseController.getInstance().start(GameStage.getInstance().getGameContainer(), 100);\r\n\t\tinitEvent();\r\n\t}\r\n\t\r\n\tprivate function test():Void {\r\n\t\taddFish(new Point(50, 50));\r\n\t\taddFish(new Point(50, 50));\r\n\t\taddFish(new Point(50, 50));\r\n\t\taddFish(new Point(50, 50));\r\n\t\taddFish(new Point(50, 50));\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate function initContainer():Void {\r\n\t\tcontainer.addChild(currentBackground);\r\n\t\tcontainer.addChild(containerEat);\r\n\t\tcontainer.addChild(containerFish);\r\n\t}\r\n\t\r\n\t\r\n\tprivate function startLevel(pLevel:Int):Void {\r\n\t\tcurrentLevel = pLevel;\r\n\t\tresetParamLevel();\r\n\t\tchangeBackground();\r\n\t}\r\n\t\r\n\tprivate function resetParamLevel():Void {\r\n\t\tlistEat = new Array<Eat>();\r\n\t\tlistFish = new Array<Fish>();\r\n\t}\r\n\t\r\n\tprivate function changeBackground():Void {\r\n\t\tcurrentBackground = new LevelBackground(currentLevel); //FOR TEST\r\n\t}\r\n\t\r\n\tprivate function initEvent():Void {\r\n\t\tMouseController.getInstance().on(MouseController.MOUSE_CLICK_EVENT, clickInLevel);\r\n\t}\r\n\t\r\n\tprivate function clickInLevel(pPosition:Point):Void {\r\n\t\taddEat(pPosition);\r\n\t}\r\n\t\r\n\tprivate function addEat(pPosition:Point):Void {\r\n\t\tvar eat:Eat = new Eat(1);\r\n\t\tcontainerEat.addChild(eat);\r\n\t\teat.position.set(pPosition.x, pPosition.y);\r\n\t\teat.start();\r\n\t\tlistEat.push(eat);\r\n\t}\r\n\t\r\n\tprivate function addFish(pPosition:Point):Void {\r\n\t\tvar lFish:Fish = new Fish(1);\r\n\t\tcontainerFish.addChild(lFish);\r\n\t\tlFish.position.set(pPosition.x, pPosition.y);\r\n\t\tlFish.start();\r\n\t\tlistFish.push(lFish);\r\n\t}\r\n\t\r\n\tpublic function destroyEat(pEat:Eat):Void {\r\n\t\tlistEat.remove(pEat);\r\n\t\tcontainerEat.removeChild(pEat);\r\n\t\tpEat.destroy();\r\n\t}\r\n\t\r\n\tpublic function gameLoopLevel():Void {\r\n\t\tvar lEat:Eat;\r\n\t\tfor (lEat in listEat) {\r\n\t\t\tlEat.doAction();\r\n\t\t}\r\n\t\t\r\n\t\tvar lFish:Fish;\r\n\t\tfor (lFish in listFish) {\r\n\t\t\tlFish.doAction();\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * détruit l'instance unique et met sa référence interne à null\r\n\t */\r\n\tpublic function destroy (): Void {\r\n\t\tinstance = null;\r\n\t}\r\n\r\n}","package com.isartdigital.utils.game;\r\n\r\nimport com.isartdigital.utils.events.EventType;\r\nimport pixi.core.display.Container;\r\n\r\n/**\r\n * Classe de base des objets interactifs dans le jeu\r\n * Met à jour automatiquement ses données internes de position et transformation\r\n * \r\n * @author Mathieu ANTHOINE\r\n */\r\nclass GameObject extends Container\r\n{\r\n\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t\ton(EventType.ADDED, forceUpdateTransform);\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Force la mise à jour de la matrices de transformation des éléments constituant le GameObject\r\n\t */\r\n\tprivate function forceUpdateTransform (): Void {\r\n\t\tuntyped updateTransform();\r\n\t}\r\n\t\r\n\t/**\r\n\t * nettoie et détruit l'instance\r\n\t */\r\n\toverride public function destroy (): Void {\r\n\t\toff(EventType.ADDED, forceUpdateTransform);\r\n\t\tsuper.destroy(true);\r\n\t}\r\n\t\r\n}","package com.isartdigital.utils.game;\r\nimport pixi.core.display.Container;\r\n\r\n/**\r\n * Implémentation de base d'une Machine à état\r\n * expose de façon publique sa méthode doAction qui peut faire référence à différentes méthodes prévues (doActionVoid, doActionNormal) ou spécifiques définies par ses classes filles\r\n * Par convention le changement de référence de doAction se fait via des méthodes setMode (setModeVoid, setModeAction) qui peuvent aussi contenir des paramètres d'initialisation\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass StateMachine extends GameObject implements IStateMachine \r\n{\r\n\t\r\n\t/**\r\n\t * méthode appelée à chaque gameLoop. Elle peut faire référence à différentes méthodes au cours du temps\r\n\t */\r\n\tpublic var doAction:Void->Void;\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t\tsetModeVoid();\t\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * applique le mode \"ne fait rien\"\r\n\t */\r\n\tprivate function setModeVoid (): Void {\r\n\t\tdoAction = doActionVoid;\r\n\t}\r\n\t\r\n\t/**\r\n\t * fonction vide destinée à maintenir la référence de doAction sans rien faire\r\n\t */\r\n\tprivate function doActionVoid (): Void {}\r\n\r\n\t\r\n\t/**\r\n\t * applique le mode normal (mode par defaut)\r\n\t */\r\n\tprivate function setModeNormal(): Void {\r\n\t\tdoAction = doActionNormal;\r\n\t}\r\n\t\r\n\t/**\r\n\t * fonction destinée à appliquer un comportement par defaut\r\n\t */\r\n\tprivate function doActionNormal (): Void {}\r\n\t\r\n\t/**\r\n\t * Activation\r\n\t */\r\n\tpublic function start (): Void {\r\n\t\tsetModeNormal();\r\n\t}\r\n\t\r\n\t/**\r\n\t * nettoie et détruit l'instance\r\n\t */\r\n\toverride public function destroy (): Void {\r\n\t\tsetModeVoid();\r\n\t\tsuper.destroy();\r\n\t}\r\n\r\n\t\r\n}","package com.isartdigital.utils.game;\r\n\r\nimport com.isartdigital.utils.game.factory.AnimFactory;\r\nimport com.isartdigital.utils.system.DeviceCapabilities;\r\nimport haxe.Json;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.graphics.Graphics;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Circle;\r\nimport pixi.core.math.shapes.Ellipse;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * Classe de base des objets interactifs ayant plusieurs états graphiques\r\n * Gère la représentation graphique (anim) et les conteneurs utiles au gamePlay (box) qui peuvent être de simples boites de collision ou beaucoup plus\r\n * suivant l'implémentation faite par le développeur dans les classes filles\r\n * @author Mathieu ANTHOINE\r\n * @version 0.11.0\r\n */\r\nclass StateGraphic extends StateMachine\r\n{\r\n\r\n\t/**\r\n\t * Fabrique d'anim\r\n\t */\r\n\tprivate var factory:AnimFactory;\r\n\t \r\n\t/**\r\n\t * anim de l'état courant\r\n\t */\r\n\tprivate var anim:Container;\r\n\t\r\n\t/**\r\n\t * box de l'état courant\r\n\t */\r\n\tprivate var box:Container;\r\n\t\r\n\t/**\r\n\t * suffixe du nom d'export des symboles Animés\r\n\t */\r\n\tprivate var ANIM_SUFFIX (default,null):String = \"\";\r\n\t\r\n\t/**\r\n\t * suffixe du nom d'export des symboles Box\r\n\t */\r\n\tprivate var BOX_SUFFIX (default,null):String = \"box\";\t\r\n\t\r\n\t/**\r\n\t * etat par défaut\r\n\t */\r\n\tprivate var DEFAULT_STATE (default, null): String = \"\";\r\n\t\r\n\t/**\r\n\t * Nom de l'asset (sert à identifier les textures à utiliser)\r\n\t * Prend le nom de la classe Fille par défaut\r\n\t */\r\n\tprivate var assetName:String;\r\n\t\r\n\t/**\r\n\t * état en cours\r\n\t */\r\n\tprivate var state:String;\r\n\t\r\n\t/**\r\n\t * Type de box de collision\r\n\t * Si boxType est égal à BoxType.NONE, aucune collision ne se fait, il n'est pas nécessaire d'avoir une boite de collision définie\r\n\t * Si boxType est égal à BoxType.SIMPLE, seul un symbole sert de Box pour tous les états, son nom d'export etant assetName+\"_\"+BOX_SUFFIX\r\n\t * Si boxType est égal à BoxType.MULTIPLE, chaque state correspond à une boite de collision, chaque state va cherche la boite assetName+\"_\"+ANIM_SUFFIX+\"_\"+BOX_SUFFIX\r\n\t * Si boxType est égal à BoxType.SELF, hitBox retourne le MovieClip anim\r\n\t */\r\n\tprivate var boxType:BoxType=BoxType.NONE;\r\n\t\r\n\t/**\r\n\t * niveau d'alpha des anim\r\n\t */\r\n\tpublic static var animAlpha:Float = 1;\r\n\t\r\n\t/**\r\n\t * niveau d'alpha des Boxes\r\n\t */\r\n\tpublic static var boxAlpha:Float = 0;\r\n\t\r\n\t/**\r\n\t * cache des boxes de tous les StateGraphic\r\n\t */\r\n\tprivate static var boxesCache:Map<String,Map<String,Dynamic>>;\r\n\t\r\n\t/**\r\n\t * l'anim est-elle terminée ?\r\n\t */\r\n\tpublic var isAnimEnd (default, null):Bool;\r\n\t\r\n\tprivate function setAnimEnd ():Void {\r\n\t\tisAnimEnd = true;\r\n\t}\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\t/**\r\n\t * défini l'état courant du StateGraphic\r\n\t * @param\tpState nom de l'état (run, walk...)\r\n\t * @param\tpLoop l'anim boucle (isAnimEnd sera toujours false) ou pas\r\n\t * @param\tpAutoPlay lance l'anim automatiquement\r\n\t * @param\tpStart lance l'anim à cette frame\r\n\t */\r\n\tprivate function setState (pState:String, ?pLoop:Bool = false, ?pAutoPlay:Bool=true, ?pStart:UInt = 0): Void {\r\n\t\t\r\n\t\tvar lClassName:String = Type.getClassName(Type.getClass(this));\r\n\t\t\r\n\t\tif (factory == null) throw lClassName+\" :: propriété factory non définie\";\r\n\t\t\r\n\t\tif (state == pState) return;\r\n\t\t\r\n\t\tif (assetName == null) assetName = lClassName.split(\".\").pop();\r\n\t\t\r\n\t\tstate = pState;\r\n\t\t\r\n\t\tanim = factory.getAnim();\r\n\t\t\r\n\t\tif (anim == null) {\t\t\t\r\n\t\t\tif (boxType == BoxType.SELF) {\r\n\t\t\t\tif (box !=null) removeChild(box);\r\n\t\t\t\tbox = null;\r\n\t\t\t}\r\n\t\t\tanim = factory.create(getID(state));\r\n\t\t\tanim.scale.set(1 /DeviceCapabilities.textureRatio , 1 / DeviceCapabilities.textureRatio);\r\n\t\t\tif (animAlpha < 1) anim.alpha = animAlpha;\r\n\t\t\taddChild(anim);\r\n\t\t} else {\r\n\t\t\tfactory.update(getID(state));\r\n\t\t}\r\n\r\n\t\tisAnimEnd = false;\r\n\t\t\r\n\t\tuntyped anim.loop = pLoop;\r\n\t\tfactory.setFrame(pAutoPlay, pStart);\r\n\t\t\r\n\t\tif (box == null) {\r\n\t\t\tif (boxType == BoxType.SELF) {\r\n\t\t\t\tbox = anim;\r\n\t\t\t\treturn;\r\n\t\t\t} else {\r\n\t\t\t\tbox = new Container();\r\n\t\t\t\tif (boxType != BoxType.NONE) createBox();\r\n\t\t\t}\r\n\t\t\taddChild(box);\r\n\t\t} else if (boxType == BoxType.MULTIPLE) {\r\n\t\t\tremoveChild(box);\r\n\t\t\tbox = new Container();\r\n\t\t\tcreateBox();\r\n\t\t\taddChild(box);\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * retourne l'identifiant complet de l'animation\r\n\t * @param\tpState etat de l'anim\r\n\t * @return identifiant\r\n\t */\r\n\tprivate function getID(pState:String): String {\r\n\t\tif (pState == DEFAULT_STATE) return assetName+ANIM_SUFFIX;\r\n\t\treturn assetName+\"_\" + pState+ANIM_SUFFIX;\r\n\t}\r\n\t\r\n\t/**\r\n\t * crée la ou les box de collision de l'état\r\n\t */\r\n\tprivate function createBox ():Void {\r\n\t\tvar lBoxes:Map<String,Dynamic> = getBox((boxType == BoxType.MULTIPLE ? state+ \"_\": \"\" )  + BOX_SUFFIX);\r\n\t\tvar lChild:Graphics;\r\n\t\t\r\n\t\tfor (lBox in lBoxes.keys()) {\r\n\t\t\tlChild = new Graphics();\r\n\t\t\tlChild.beginFill(0xFF2222);\r\n\t\t\tif (Std.is(lBoxes[lBox], Rectangle)) {\r\n\t\t\t\tlChild.drawRect(lBoxes[lBox].x, lBoxes[lBox].y, lBoxes[lBox].width, lBoxes[lBox].height);\r\n\t\t\t}\r\n\t\t\telse if (Std.is(lBoxes[lBox], Ellipse)) {\r\n\t\t\t\tlChild.drawEllipse(lBoxes[lBox].x, lBoxes[lBox].y, lBoxes[lBox].width, lBoxes[lBox].height);\r\n\t\t\t}\r\n\t\t\telse if (Std.is(lBoxes[lBox], Circle)) {\r\n\t\t\t\tlChild.drawCircle(lBoxes[lBox].x,lBoxes[lBox].y,lBoxes[lBox].radius);\r\n\t\t\t}\r\n\t\t\telse if (Std.is(lBoxes[lBox], Point)) {\r\n\t\t\t\tlChild.drawCircle(0, 0, 10);\r\n\t\t\t}\r\n\t\t\tlChild.endFill();\r\n\t\t\t\r\n\t\t\tlChild.name = lBox;\r\n\t\t\tif (Std.is(lBoxes[lBox], Point)) lChild.position.set(lBoxes[lBox].x, lBoxes[lBox].y);\r\n\t\t\telse lChild.hitArea = lBoxes[lBox];\r\n\t\t\t \r\n\t\t\tbox.addChild(lChild);\r\n\t\t}\r\n\t\tif (boxAlpha == 0) box.renderable = false;\r\n\t\telse box.alpha= boxAlpha;\r\n\t}\t\t\r\n\t\r\n\t/**\r\n\t * Créer toutes les Boxes\r\n\t * @param\tpJson Nom du fichier contenant la description des boxes\r\n\t */\r\n\tstatic public function addBoxes (pJson:Json): Void {\r\n\t\t\r\n\t\tif (boxesCache == null) boxesCache = new Map<String,Map<String,Dynamic>>();\r\n\t\t\r\n\t\tvar lItem;\r\n\t\tvar lObj;\r\n\t\t\r\n\t\tfor (lName in Reflect.fields(pJson)) {\r\n\t\t\tlItem = Reflect.field(pJson, lName);\r\n\t\t\tboxesCache[lName] = new Map<String,Dynamic>();\t\t\t\r\n\t\t\t\r\n\t\t\tfor (lObjName in Reflect.fields(lItem)) {\r\n\t\t\t\tlObj = Reflect.field(lItem, lObjName);\r\n\t\t\t\t\r\n\t\t\t\tif (lObj.type == \"Rectangle\") boxesCache[lName][lObjName] = new Rectangle(lObj.x, lObj.y, lObj.width, lObj.height);\r\n\t\t\t\telse if (lObj.type == \"Ellipse\") boxesCache[lName][lObjName] = new Ellipse(lObj.x, lObj.y, lObj.width/2, lObj.height/2);\r\n\t\t\t\telse if (lObj.type == \"Circle\") boxesCache[lName][lObjName] = new Circle(lObj.x, lObj.y, lObj.radius);\r\n\t\t\t\telse if (lObj.type == \"Point\") boxesCache[lName][lObjName] = new Point(lObj.x, lObj.y);\r\n\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Cherche dans le cache général des boxes, celle correspondant au state demandé\r\n\t * @param\tpState State de l'instance\r\n\t * @return\tla box correspondante\r\n\t * @return\r\n\t */\r\n\tpublic function getBox (pState:String):Map<String,Dynamic> {\r\n\t\treturn boxesCache[assetName+\"_\" +pState];\r\n\t}\t\t\r\n\t\r\n\t/**\r\n\t * met en pause l'anim\r\n\t */\r\n\tpublic function pause ():Void {\r\n\t\tif (anim != null) untyped anim.stop();\r\n\t}\r\n\t\r\n\t/**\r\n\t * relance l'anim\r\n\t */\r\n\tpublic function resume ():Void {\r\n\t\tif (anim != null) untyped anim.play();\r\n\t}\r\n\t\r\n\t/**\r\n\t * retourne la zone de hit de l'objet\r\n\t */\r\n\tpublic var hitBox (get, null):Container;\r\n\t \r\n\tprivate function get_hitBox (): Container {\r\n\t\treturn box;\r\n\t\t// Si on veut cibler une box plus précise: return box.getChildByName(\"nom d'instance du MovieClip de type Rectangle ou Circle dans Flash IDE\");\r\n\t}\r\n\r\n\t/**\r\n\t * retourne un tableau de points de collision dont les coordonnées sont exprimées dans le systeme global\r\n\t */\r\n\tpublic var hitPoints (get, null): Array<Point>;\r\n\t \r\n\tprivate function get_hitPoints (): Array<Point> {\r\n\t\treturn null;\r\n\t\t// liste de Points : return [box.toGlobal(box.getChildByName(\"nom d'instance du MovieClip de type Point dans Flash IDE\").position,box.toGlobal(box.getChildByName(\"nom d'instance du MovieClip de type Point dans Flash IDE\").position];\r\n\t}\r\n\t\r\n\t/**\r\n\t * nettoyage et suppression de l'instance\r\n\t */\r\n\toverride public function destroy (): Void {\r\n\t\tif (untyped anim.stop!=null) untyped anim.stop();\r\n\t\tremoveChild(anim);\r\n\t\tanim.destroy();\t\t\r\n\t\tif (box != anim) {\r\n\t\t\tremoveChild(box);\r\n\t\t\tbox.destroy();\r\n\t\t\tbox = null;\r\n\t\t}\r\n\t\tanim = null;\r\n\t\t\r\n\t\tsuper.destroy();\r\n\t}\r\n\t\r\n}","package com.gloyer.quarifight.game.sprites;\r\n\r\nimport com.gloyer.libs.TimerDelay;\r\nimport com.isartdigital.utils.game.BoxType;\r\nimport com.isartdigital.utils.game.factory.FlumpMovieAnimFactory;\r\nimport com.isartdigital.utils.game.StateGraphic;\r\nimport haxe.Timer;\r\nimport com.greensock.TweenLite;\r\nimport pixi.core.math.Point;\r\nimport pixi.display.FlumpMovie;\r\nimport tween.easing.Power0;\r\n\r\n/**\r\n * ...\r\n * @author Loyer Guillaume\r\n */\r\nclass Eat extends StateGraphic\r\n{\r\n\tprivate var level:Int;\r\n\t\r\n\tprivate static var idEat:Int = 0;\r\n\tprivate static var DEFAULT_SCALE:Float = 0.6;\r\n\tprivate static var SPEED_FALL:Int = 2;\r\n\tprivate static var DURATION_ALIVE:Int = 8;\r\n\tprivate static var DURATION_ALPHA_ZERO:Int = 1;\r\n\tprivate static var SPEED_ANIMATION:Float = 0.7;\r\n\t\r\n\tpublic function new(pLevel:Int) \r\n\t{\r\n\t\tsuper();\r\n\t\tfactory = new FlumpMovieAnimFactory();\r\n\t\t\r\n\t\t\r\n\t\tlevel = pLevel;\r\n\t\t\r\n\t\t//FIXME\r\n\t\tscale = new Point(DEFAULT_SCALE, DEFAULT_SCALE);\r\n\t\t\r\n\t\tTimerDelay.getInstance().startDelay(\"startDestroyEat\" + idEat++, DURATION_ALIVE * 1000, startDestroyEat);\r\n\t\t//boxType = BoxType.SIMPLE;\r\n\t}\r\n\t\r\n\tprivate function changeSpeedAnimation():Void {\r\n\t\tcast(anim, FlumpMovie).animationSpeed = SPEED_ANIMATION;\r\n\t}\r\n\t\r\n\tprivate function startDestroyEat():Void {\r\n\t\tvar lTween:TweenLite =  TweenLite.fromTo(this, DURATION_ALPHA_ZERO, { alpha: 1 }, { alpha: 0, ease: Power0.easeIn, onComplete:destroyMe});\r\n\t}\r\n\t\r\n\tprivate function destroyMe():Void {\r\n\t\tLevelManager.getInstance().destroyEat(this);\r\n\t}\r\n\t\r\n\tprivate function fall():Void {\r\n\t\tif (y < LevelManager.DISTANCE_TOP_GROUND) {\r\n\t\t\tposition.y += SPEED_FALL;\t\t\t\r\n\t\t}\r\n\t}\r\n\t\r\n\toverride public function start():Void \r\n\t{\r\n\t\tsuper.start();\r\n\t\tchangeSpeedAnimation();\r\n\t\t\r\n\t}\r\n\r\n\toverride function doActionNormal():Void {\r\n\t\tfall();\r\n\t}\r\n\t\r\n\toverride private function setModeNormal():Void {\r\n\t\tsetState('lvl'+level, true);\r\n\t\tsuper.setModeNormal();\r\n\t}\r\n\t\r\n}","package com.gloyer.quarifight.game.sprites;\r\n\r\nimport com.gloyer.libs.MathPerso;\r\nimport com.gloyer.libs.TimerDelay;\r\nimport com.greensock.TweenLite;\r\nimport com.isartdigital.utils.game.factory.FlumpMovieAnimFactory;\r\nimport com.isartdigital.utils.game.StateGraphic;\r\nimport pixi.core.math.Point;\r\nimport pixi.display.FlumpMovie;\r\nimport tween.easing.Back;\r\nimport tween.easing.Circ;\r\nimport tween.easing.Power1;\r\nimport tween.easing.Power2;\r\n\r\n/**\r\n * ...\r\n * @author Loyer Guillaume\r\n */\r\nclass Fish extends StateGraphic\r\n{\r\n\tprivate var level:Int;\r\n\t\r\n\tprivate static var idFish:Int = 0;\r\n\tprivate var id:Int;\r\n\t\r\n\tprivate static inline var SPEED_ANIMATION:Float = 0.7;\r\n\tprivate static inline var DEFAULT_SCALE:Float = 0.8;\r\n\t\r\n\tprivate static inline var MIN_DURATION_MOVEMENT:Float = 3;\r\n\tprivate static inline var MAX_DURATION_MOVEMENT:Float = 6;\r\n\t\r\n\tprivate static inline var MIN_DURATION_WAIT_MOVEMENT:Float = 1;\r\n\tprivate static inline var MAX_DURATION_WAIT_MOVEMENT:Float = 2;\r\n\t\r\n\t//FIXME : Use Bounding box mais pas dans le poisson\r\n\tprivate static inline var MIN_MOVEMENT_X:Int = -1200;\r\n\tprivate static inline var MIN_MOVEMENT_Y:Int = -450;\r\n\tprivate static inline var MAX_MOVEMENT_X:Int = 1200;\r\n\tprivate static inline var MAX_MOVEMENT_Y:Int = 500;\r\n\t\r\n\tprivate var orientationLeft:Bool;\r\n\t\r\n\tprivate var tweenMovement:TweenLite;\r\n\r\n\tpublic function new(pLevel:Int) \r\n\t{\r\n\t\tsuper();\r\n\t\tfactory = new FlumpMovieAnimFactory();\r\n\t\t\r\n\t\t//FIXME\r\n\t\tscale = new Point(DEFAULT_SCALE, DEFAULT_SCALE);\r\n\t\t\r\n\t\tlevel = pLevel;\r\n\t\tid = idFish++;\r\n\t\t\r\n\t\torientationLeft = true;\r\n\t}\r\n\t\r\n\t\r\n\tprivate function changeSpeedAnimation():Void {\r\n\t\tcast(anim, FlumpMovie).animationSpeed = SPEED_ANIMATION;\r\n\t}\r\n\t\r\n\tprivate function changeOrientation():Void {\r\n\t\tanim.scale.x *= -1;\r\n\t}\r\n\t\r\n\tprivate function startRandomTargetMovement():Void {\r\n\t\tvar lPositionTarget:Point = getRandomPositionMovement();\r\n\t\t\r\n\t\ttrace((lPositionTarget.x - x));\r\n\t\tvar nextOrientationIsLeft:Bool = (lPositionTarget.x - x) <= 0; //FIXME: Obliger de décaller le résultat parce que l'origine est au centre de l'écran\r\n\t\tif (nextOrientationIsLeft != orientationLeft) {\r\n\t\t\tchangeOrientation();\r\n\t\t\torientationLeft = nextOrientationIsLeft;\r\n\t\t}\r\n\t\t\r\n\t\ttweenMovement = TweenLite.fromTo(this, getRandomDurationMovement(), {x: x, y: y}, {x: lPositionTarget.x, y: lPositionTarget.y, ease: Power1.easeInOut, onComplete: waitForMove});\r\n\t}\r\n\t\r\n\tprivate function waitForMove():Void {\r\n\t\tTimerDelay.getInstance().startDelay(\"Movement Fish \" + id, getRandomDurationWaitMovement(), startRandomTargetMovement);\r\n\t}\r\n\t\r\n\tprivate function getRandomDurationWaitMovement():Int {\r\n\t\treturn MathPerso.getRandomInt(MIN_DURATION_WAIT_MOVEMENT, MAX_DURATION_WAIT_MOVEMENT) * 1000;\r\n\t}\r\n\t\r\n\tprivate function getRandomDurationMovement():Float {\r\n\t\treturn MathPerso.getRandomFloat(MIN_DURATION_MOVEMENT, MAX_DURATION_MOVEMENT);\r\n\t}\r\n\t\r\n\tprivate function getRandomPositionMovement():Point {\r\n\t\tvar lPosition:Point = MathPerso.getRandomPoint(MIN_MOVEMENT_X, MAX_MOVEMENT_X, MIN_MOVEMENT_Y, MAX_MOVEMENT_Y);\r\n\t\treturn lPosition;\r\n\t\t//return new Point(MathPerso.getRandomInt(MIN_MOVEMENT_X, MAX_MOVEMENT_X), MathPerso.getRandomInt(MIN_MOVEMENT_Y, MAX_MOVEMENT_Y));\r\n\t}\r\n\t\r\n\t\r\n\toverride public function start():Void \r\n\t{\r\n\t\tsuper.start();\r\n\t\tstartRandomTargetMovement();\r\n\t\tchangeSpeedAnimation();\r\n\t}\r\n\t\r\n\toverride private function setModeNormal():Void {\r\n\t\tsetState('lvl'+level, true);\r\n\t\tsuper.setModeNormal();\r\n\t}\r\n\t\r\n}","package com.gloyer.quarifight.game.sprites;\r\n\r\nimport com.isartdigital.utils.game.factory.FlumpMovieAnimFactory;\r\nimport com.isartdigital.utils.game.StateGraphic;\r\n\r\n/**\r\n * ...\r\n * @author Loyer Guillaume\r\n */\r\nclass LevelBackground extends StateGraphic\r\n{\r\n\t\r\n\tprivate var level:Int;\r\n\r\n\tpublic function new(pLevel:Int) \r\n\t{\r\n\t\tsuper();\r\n\t\tfactory = new FlumpMovieAnimFactory();\r\n\t\tlevel = pLevel;\r\n\t\tstart();\r\n\t}\r\n\t\r\n\toverride private function setModeNormal():Void {\r\n\t\tsetState(Std.string(level), true);\r\n\t\tsuper.setModeNormal();\r\n\t}\r\n\t\r\n}","package com.gloyer.quarifight.ui;\r\nimport com.isartdigital.utils.Config;\r\nimport dat.gui.GUI;\r\nimport com.isartdigital.utils.system.DeviceCapabilities;\r\n\r\n\t\r\n/**\r\n * Classe permettant de manipuler des parametres du projet au runtime\r\n * Si la propriété Config.debug et à false ou que la propriété Config.data.cheat est à false, aucun code n'est executé.\r\n * Il n'est pas nécessaire de retirer ou commenter le code du CheatPanel dans la version \"release\" du jeu\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass CheatPanel \r\n{\r\n\t\r\n\t/**\r\n\t * instance unique de la classe CheatPanel\r\n\t */\r\n\tprivate static var instance: CheatPanel;\r\n\t\r\n\t/**\r\n\t * instance de dat.GUI composée par le CheatPanel\r\n\t */\r\n\tprivate var gui:GUI;\r\n\t\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): CheatPanel {\r\n\t\tif (instance == null) instance = new CheatPanel();\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\t/**\r\n\t * constructeur privé pour éviter qu'une instance soit créée directement\r\n\t */\r\n\tprivate function new() \r\n\t{\r\n\t\tinit();\r\n\t}\r\n\t\r\n\tprivate function init():Void {\r\n\t\tif (Config.debug && Config.data.cheat && !DeviceCapabilities.isCocoonJS) gui = new GUI();\r\n\t}\r\n\t\r\n\t// exemple de méthode configurant le panneau de cheat suivant le contexte\r\n\tpublic function ingame (): Void {\r\n\t\t// ATTENTION: toujours intégrer cette ligne dans chacune de vos méthodes pour ignorer le reste du code si le CheatPanel doit être désactivé\r\n\t\tif (gui == null) return;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * vide le CheatPanel\r\n\t */\r\n\tpublic function clear ():Void {\r\n\t\tif (gui == null) return;\r\n\t\tgui.destroy();\r\n\t\tinit();\r\n\t}\t\r\n\t\r\n\t/**\r\n\t * détruit l'instance unique et met sa référence interne à null\r\n\t */\r\n\tpublic function destroy (): Void {\r\n\t\tinstance = null;\r\n\t}\r\n\r\n}","package com.isartdigital.utils.ui;\r\n\r\nimport com.isartdigital.utils.events.EventType;\r\nimport com.isartdigital.utils.events.MouseEventType;\r\nimport com.isartdigital.utils.events.TouchEventType;\r\nimport com.isartdigital.utils.game.GameObject;\r\nimport com.isartdigital.utils.game.GameStage;\r\nimport com.isartdigital.utils.ui.UIPositionable;\r\nimport haxe.Timer;\r\nimport pixi.core.sprites.Sprite;\r\nimport pixi.core.textures.Texture;\r\nimport pixi.interaction.EventTarget;\r\n\r\n/**\r\n * Base de tous les conteneurs d'interface\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass UIComponent extends GameObject\r\n{\r\n\r\n\tprivate var positionables:Array<UIPositionable> = [];\r\n\t\r\n\tprivate var isOpened:Bool;\r\n\t\r\n\tprivate var modalZone:Sprite;\r\n\t\r\n\tprivate var _modal:Bool = true;\r\n\t\r\n\t// TODO: pouvoir le varier dynamiquement\r\n\tpublic var modalImage:String=\"assets/alpha_bg.png\";\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\t/**\r\n\t * permet de construire l'UIComponent à partir de l'UIBuilder\r\n\t */\r\n\tpublic function build () : Void {\r\n\t\tvar lClassName = Type.getClassName(Type.getClass(this));\r\n\t\tlClassName = lClassName.substring(lClassName.lastIndexOf(\".\") + 1);\r\n\t\t\r\n\t\tvar lItems:Array<UIPositionable> = UIBuilder.build(lClassName);\r\n\t\t\r\n\t\tfor (lItem in lItems) {\r\n\t\t\taddChild(lItem.item);\r\n\t\t\tif (lItem.align != \"\") positionables.push(lItem);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic function open (): Void {\r\n\t\tif (isOpened) return;\r\n\t\tisOpened = true;\r\n\t\tmodal = _modal;\r\n\t\tGameStage.getInstance().on(EventType.RESIZE, onResize);\r\n\t\tonResize();\r\n\t}\r\n\t\r\n\t//TODO: verifier si y a besoin d'une variable privée ou si on peut utiliser modal direct\r\n\t\r\n\tpublic var modal (get, set):Bool;\r\n\t\r\n\tprivate function get_modal ():Bool {\r\n\t\treturn _modal;\r\n\t}\r\n\t\r\n\tprivate function set_modal (pModal:Bool):Bool {\r\n\t\t_modal = pModal;\r\n\t\t\r\n\t\tif (_modal) {\r\n\t\t\tif (modalZone == null) {\r\n\t\t\t\tmodalZone = new Sprite(Texture.fromImage(Config.url(modalImage)));\r\n\t\t\t\tmodalZone.interactive = true;\r\n\t\t\t\tmodalZone.on(MouseEventType.CLICK, stopPropagation);\r\n\t\t\t\tmodalZone.on(TouchEventType.TAP, stopPropagation);\r\n\t\t\t\tpositionables.unshift({ item:modalZone, align:UIPosition.FIT_SCREEN, offsetX:0, offsetY:0});\r\n\t\t\t}\r\n\t\t\tif (parent != null) parent.addChildAt(modalZone, parent.getChildIndex(this));\r\n\t\t} else {\t\r\n\t\t\tif (modalZone != null) {\r\n\t\t\t\tif (modalZone.parent != null) modalZone.parent.removeChild(modalZone);\r\n\t\t\t\tmodalZone.off(MouseEventType.CLICK, stopPropagation);\r\n\t\t\t\tmodalZone.off(TouchEventType.TAP, stopPropagation);\r\n\t\t\t\tmodalZone = null;\r\n\t\t\t\tif (positionables[0].item == modalZone) positionables.shift();\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn _modal;\r\n\t}\r\n\t\r\n\tprivate function stopPropagation (pEvent:EventTarget): Void {}\r\n\t\r\n\tpublic function close ():Void {\r\n\t\tif (!isOpened) return;\r\n\t\tisOpened = false;\r\n\t\tmodal = false;\r\n\t\tdestroy();\r\n\t}\r\n\t\r\n\t/**\r\n\t * déclenche le positionnement des objets\r\n\t * @param pEvent\r\n\t */\r\n\tprivate function onResize (pEvent:EventTarget = null): Void {\r\n\t\tfor (lObj in positionables) {\r\n\t\t\tif (lObj.update) {\r\n\t\t\t\tif (lObj.align==UIPosition.TOP || lObj.align==UIPosition.TOP_LEFT || lObj.align==UIPosition.TOP_RIGHT) {\r\n\t\t\t\t\tlObj.offsetY = parent.y + lObj.item.y;\r\n\t\t\t\t} else if (lObj.align==UIPosition.BOTTOM || lObj.align==UIPosition.BOTTOM_LEFT || lObj.align==UIPosition.BOTTOM_RIGHT) {\t\r\n\t\t\t\t\tlObj.offsetY = GameStage.getInstance().safeZone.height - parent.y - lObj.item.y;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (lObj.align==UIPosition.LEFT || lObj.align==UIPosition.TOP_LEFT || lObj.align==UIPosition.BOTTOM_LEFT) {\r\n\t\t\t\t\tlObj.offsetX = parent.x + lObj.item.x;\r\n\t\t\t\t} else if (lObj.align==UIPosition.RIGHT || lObj.align==UIPosition.TOP_RIGHT || lObj.align==UIPosition.BOTTOM_RIGHT) {\t\r\n\t\t\t\t\tlObj.offsetX = GameStage.getInstance().safeZone.width - parent.x - lObj.item.x;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlObj.update = false;\r\n\t\t\t}\r\n\t\t\tUIPosition.setPosition(lObj.item, lObj.align, lObj.offsetX, lObj.offsetY);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * nettoie l'instance\r\n\t */\r\n\toverride public function destroy (): Void {\r\n\t\tclose();\r\n\t\tGameStage.getInstance().off(EventType.RESIZE, onResize);\r\n\t\tsuper.destroy();\r\n\t}\r\n\t\r\n}","package com.isartdigital.utils.ui;\r\n\r\n\r\n/**\r\n * Classe de base des Ecrans\r\n * Tous les écrans d'interface héritent de cette classe\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass Screen extends UIComponent \r\n{\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t\tmodalImage = \"assets/black_bg.png\";\r\n\t\t\r\n\t}\r\n\t\r\n}","package com.gloyer.quarifight.ui;\n\nimport com.isartdigital.utils.Config;\nimport com.isartdigital.utils.ui.Screen;\nimport pixi.core.sprites.Sprite;\nimport pixi.core.textures.Texture;\n\n/**\n * Preloader Graphique principal\n * @author Mathieu ANTHOINE\n */\nclass GraphicLoader extends Screen \n{\n\t\n\t/**\n\t * instance unique de la classe GraphicLoader\n\t */\n\tprivate static var instance: GraphicLoader;\n\n\tprivate var loaderBar:Sprite;\n\n\tpublic function new() \n\t{\n\t\tsuper();\n\t\tvar lBg:Sprite = new Sprite(Texture.fromImage(Config.url(Config.assetsPath+\"preload_bg.png\")));\n\t\tlBg.anchor.set(0.5, 0.5);\n\t\taddChild(lBg);\n\t\t\n\t\tloaderBar = new Sprite (Texture.fromImage(Config.url(Config.assetsPath+\"preload.png\")));\n\t\tloaderBar.anchor.y = 0.5;\n\t\tloaderBar.x = -loaderBar.width / 2;\n\t\taddChild(loaderBar);\n\t\tloaderBar.scale.x = 0;\n\t}\n\t\n\t/**\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\n\t * @return instance unique\n\t */\n\tpublic static function getInstance (): GraphicLoader {\n\t\tif (instance == null) instance = new GraphicLoader();\n\t\treturn instance;\n\t}\n\t\n\t/**\n\t * mise à jour de la barre de chargement\n\t * @param\tpProgress\n\t */\n\tpublic function update (pProgress:Float): Void {\n\t\tloaderBar.scale.x = pProgress;\n\t}\n\t\n\t/**\n\t * détruit l'instance unique et met sa référence interne à null\n\t */\n\toverride public function destroy (): Void {\n\t\tinstance = null;\n\t\tsuper.destroy();\n\t}\n\n}","package com.gloyer.quarifight.ui;\n\nimport com.gloyer.quarifight.ui.hud.Hud;\nimport com.isartdigital.utils.game.GameStage;\nimport com.isartdigital.utils.ui.Popin;\nimport com.isartdigital.utils.ui.Screen;\nimport pixi.core.display.Container;\n\n/**\n * Manager (Singleton) en charge de gérer les écrans d'interface\n * @author Mathieu ANTHOINE\n */\nclass UIManager \n{\n\t\n\t/**\n\t * instance unique de la classe UIManager\n\t */\n\tprivate static var instance: UIManager;\n\t\n\t\n\t/**\n\t * tableau des popins ouverts\n\t */\n\tprivate var popins:Array<Popin>;\n\n\tpublic function new() \n\t{\n\t\tpopins = [];\n\t}\n\t\n\t/**\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\n\t * @return instance unique\n\t */\n\tpublic static function getInstance (): UIManager {\n\t\tif (instance == null) instance = new UIManager();\n\t\treturn instance;\n\t}\n\t\n\t/**\n\t * Ajoute un écran dans le conteneur de Screens en s'assurant qu'il n'y en a pas d'autres\n\t * @param\tpScreen Screen à ouvrir\n\t */\n\tpublic function openScreen (pScreen: Screen): Void {\n\t\tcloseScreens();\n\t\tGameStage.getInstance().getScreensContainer().addChild(pScreen);\n\t\tpScreen.open();\n\t}\n\t\n\t/**\n\t * Supprime les écrans dans le conteneur de Screens\n\t */\n\tpublic function closeScreens (): Void {\n\t\tvar lContainer:Container = GameStage.getInstance().getScreensContainer();\n\t\twhile (lContainer.children.length > 0) {\n\t\t\tvar lCurrent:Screen = cast(lContainer.getChildAt(lContainer.children.length - 1), Screen);\n\t\t\tlCurrent.interactive = false;\n\t\t\tlContainer.removeChild(lCurrent);\n\t\t\tlCurrent.close();\n\t\t}\n\t}\n\t\n\t/**\n\t * Ajoute un popin dans le conteneur de Popin\n\t * @param\tpPopin Popin à ouvrir\n\t */\n\tpublic function openPopin (pPopin: Popin): Void {\n\t\tpopins.push(pPopin);\n\t\tGameStage.getInstance().getPopinsContainer().addChild(pPopin);\n\t\tpPopin.open();\n\t}\n\t\n\t/**\n\t * Supprime le popin dans le conteneur de Screens\n\t */\n\tpublic function closeCurrentPopin (): Void {\n\t\tif (popins.length == 0) return;\n\t\tvar lCurrent:Popin = popins.pop();\n\t\tlCurrent.interactive = false;\n\t\tGameStage.getInstance().getPopinsContainer().removeChild(lCurrent);\n\t\tlCurrent.close();\n\t\t\n\t}\n\t\n\t/**\n\t * Ajoute le hud dans le conteneur de Hud\n\t */\n\tpublic function openHud (): Void {\n\t\tGameStage.getInstance().getHudContainer().addChild(Hud.getInstance());\n\t\tHud.getInstance().open();\n\t}\n\t\n\t/**\n\t * Retire le hud du conteneur de Hud\n\t */\n\tpublic function closeHud (): Void {\n\t\tGameStage.getInstance().getHudContainer().removeChild(Hud.getInstance());\n\t\tHud.getInstance().close();\n\t}\n\t\n\t/**\n\t * met l'interface en mode jeu\n\t */\n\t public function startGame (): Void {\n\t\tcloseScreens();\n\t\topenHud();\n\t}\n\t\n\t/**\n\t * détruit l'instance unique et met sa référence interne à null\n\t */\n\tpublic function destroy (): Void {\n\t\tinstance = null;\n\t}\n\n}","package com.gloyer.quarifight.ui.hud;\n\nimport com.isartdigital.utils.Config;\nimport com.isartdigital.utils.system.DeviceCapabilities;\nimport com.isartdigital.utils.ui.Screen;\nimport com.isartdigital.utils.ui.UIPosition;\nimport pixi.core.display.Container;\nimport pixi.core.sprites.Sprite;\nimport pixi.core.text.Text;\nimport pixi.core.textures.Texture;\nimport pixi.interaction.EventTarget;\n\n/**\n * Classe en charge de gérer les informations du Hud\n * @author Mathieu ANTHOINE\n */\nclass Hud extends Screen \n{\n\t\n\t/**\n\t * instance unique de la classe Hud\n\t */\n\tprivate static var instance: Hud;\n\t\n\tprivate var hudTopLeft:Sprite;\n\tprivate var hudBottomLeft:Container;\n\n\t/**\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\n\t * @return instance unique\n\t */\n\tpublic static function getInstance (): Hud {\n\t\tif (instance == null) instance = new Hud();\n\t\treturn instance;\n\t}\t\n\t\n\tpublic function new() \n\t{\n\t\tsuper();\n\t\t_modal = false;\n\t\t//hudTopLeft = new Sprite(Texture.fromImage(Config.url(Config.assetsPath + \"HudLeft.png\")));\n\t\t//\n\t\t//hudBottomLeft = new Container();\n\t\t\t//\n\t\t//// affichage de textes utilisant des polices de caractères chargées\n\t\t//var lTxt:Text = new Text((DeviceCapabilities.system==DeviceCapabilities.SYSTEM_DESKTOP ? \"Click\" : \"Tap\" )+ \" to move\", { font: \"80px MyFont\", fill: \"#FFFFFF\", align: \"left\" } );\n\t\t//lTxt.position.set(20, -220);\n\t\t//hudBottomLeft.addChild(lTxt);\n\t\t//\n\t\t//var lTxt2:Text = new Text(\"or use cheat panel\", { font: \"100px MyOtherFont\", fill: \"#000000\", align: \"left\" } );\n\t\t//lTxt2.position.set(20, -120);\n\t\t//hudBottomLeft.addChild(lTxt2);\t\t\n\t\t//\n\t\t//addChild(hudTopLeft);\n\t\t//addChild(hudBottomLeft);\n//\n\t\t//positionables.push({ item:hudTopLeft, align:UIPosition.TOP_LEFT, offsetX:0, offsetY:0});\n\t\t//positionables.push({ item:hudBottomLeft, align:UIPosition.BOTTOM_LEFT, offsetX:0, offsetY:0});\n\n\t}\n\t\n\t/**\n\t * détruit l'instance unique et met sa référence interne à null\n\t */\n\toverride public function destroy (): Void {\n\t\tinstance = null;\n\t\tsuper.destroy();\n\t}\n\n}","package com.isartdigital.utils.ui;\r\n\r\n/**\r\n * Classe de base des PopIn\r\n * Toutes les popin d'interface héritent de cette classe\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass Popin extends UIComponent\r\n{\r\n\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\t\r\n}","package com.gloyer.quarifight.ui.popin;\r\n\r\nimport com.gloyer.quarifight.game.GameManager;\r\nimport com.isartdigital.utils.Config;\r\nimport com.isartdigital.utils.events.MouseEventType;\r\nimport com.isartdigital.utils.events.TouchEventType;\r\nimport com.isartdigital.utils.sounds.SoundManager;\r\nimport com.isartdigital.utils.ui.Popin;\r\nimport pixi.core.sprites.Sprite;\r\nimport pixi.core.textures.Texture;\r\nimport pixi.interaction.EventTarget;\r\n\r\n\t\r\n/**\r\n * Exemple de classe héritant de Popin\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass Confirm extends Popin \r\n{\r\n\t\r\n\tprivate var background:Sprite;\r\n\t\r\n\t/**\r\n\t * instance unique de la classe Confirm\r\n\t */\r\n\tprivate static var instance: Confirm;\r\n\t\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): Confirm {\r\n\t\tif (instance == null) instance = new Confirm();\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\t/**\r\n\t * constructeur privé pour éviter qu'une instance soit créée directement\r\n\t */\r\n\tprivate function new() \r\n\t{\r\n\t\tsuper();\r\n\t\tbackground = new Sprite(Texture.fromImage(Config.url(Config.assetsPath+\"Confirm.png\")));\r\n\t\tbackground.anchor.set(0.5, 0.5);\r\n\t\taddChild(background);\r\n\t\tinteractive = true;\r\n\t\tbuttonMode = true;\r\n\t\t\r\n\t\tonce(MouseEventType.CLICK,onClick);\r\n\t\tonce(TouchEventType.TAP,onClick);\r\n\t\t\r\n\t}\r\n\t\r\n\tprivate function test (pEvent:EventTarget):Void {\r\n\t\ttrace (pEvent);\r\n\t}\r\n\t\r\n\tprivate function onClick (pEvent:EventTarget): Void {\r\n\t\tSoundManager.getSound(\"click\").play();\r\n\t\tUIManager.getInstance().closeCurrentPopin();\r\n\t\tGameManager.getInstance().start();\r\n\t}\r\n\t\r\n\t/**\r\n\t * détruit l'instance unique et met sa référence interne à null\r\n\t */\r\n\toverride public function destroy (): Void {\r\n\t\tinstance = null;\r\n\t\tsuper.destroy();\r\n\t}\r\n\r\n}","package com.gloyer.quarifight.ui.screens;\r\n\r\nimport com.gloyer.quarifight.ui.popin.Confirm;\r\nimport com.isartdigital.utils.Config;\r\nimport com.isartdigital.utils.events.MouseEventType;\r\nimport com.isartdigital.utils.events.TouchEventType;\r\nimport com.isartdigital.utils.sounds.SoundManager;\r\nimport com.isartdigital.utils.ui.Screen;\r\nimport pixi.core.sprites.Sprite;\r\nimport pixi.core.textures.Texture;\r\nimport pixi.interaction.EventTarget;\r\n\r\n\t\r\n/**\r\n * Exemple de classe héritant de Screen\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass TitleCard extends Screen \r\n{\r\n\tprivate var background:Sprite;\r\n\t\r\n\t/**\r\n\t * instance unique de la classe TitleCard\r\n\t */\r\n\tprivate static var instance: TitleCard;\r\n\t\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): TitleCard {\r\n\t\tif (instance == null) instance = new TitleCard();\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\t/**\r\n\t * constructeur privé pour éviter qu'une instance soit créée directement\r\n\t */\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t\tbackground = new Sprite(Texture.fromImage(Config.url(Config.assetsPath+\"TitleCard_bg.png\")));\r\n\t\tbackground.anchor.set(0.5, 0.5);\r\n\t\taddChild(background);\r\n\t\tinteractive = true;\r\n\t\tbuttonMode = true;\r\n\t\t\r\n\t\tonce(MouseEventType.CLICK,onClick);\r\n\t\tonce(TouchEventType.TAP,onClick);\r\n\t}\r\n\t\r\n\tprivate function onClick (pEvent:EventTarget): Void {\r\n\t\tSoundManager.getSound(\"click\").play();\r\n\t\tUIManager.getInstance().openPopin(Confirm.getInstance());\r\n\t}\r\n\t\r\n\t/**\r\n\t * détruit l'instance unique et met sa référence interne à null\r\n\t */\r\n\toverride public function destroy (): Void {\r\n\t\tinstance = null;\r\n\t\tsuper.destroy();\r\n\t}\r\n\r\n}","package com.isartdigital.utils ;\r\nimport haxe.Json;\r\nimport js.Browser;\r\nimport js.html.Storage;\r\n\r\n/**\r\n * Classe utilitaire contenant les données de configuration du jeu\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass Config \r\n{\r\n\t\r\n\t/**\r\n\t * nom du jeu\r\n\t */\r\n\tpublic static var gameName (get,never):String;\r\n\t\r\n\t/**\r\n\t * version de l'application\r\n\t */\r\n\tpublic static var version (get,never):String;\r\n\t\r\n\t/**\r\n\t * langue courante\r\n\t */\r\n\tpublic static var language (get,never): String;\r\n\t\r\n\t/**\r\n\t * langues disponibles\r\n\t */\r\n\tpublic static var languages (get,never): Array<String>;\r\n\t\r\n\t/**\r\n\t * défini si le jeu est en mode \"debug\" ou pas (si prévu dans le code du jeu)\r\n\t */\r\n\tpublic static var debug (get, never): Bool;\r\n\t\r\n\t/**\r\n\t * défini si il faut afficher les fps ou non\r\n\t */\r\n\tpublic static var fps (get,never): Bool;\r\n\r\n\t/**\r\n\t * défini si il faut afficher le qrcode ou non\r\n\t */\r\n\tpublic static var qrcode (get, never): Bool;\t\r\n\t\r\n\t/** \r\n\t * chemin du dossier de langues\r\n\t */\r\n\tpublic static var langPath (get, never): String;\r\n\t\r\n\t/** \r\n\t * chemin du dossier des fichiers textes\r\n\t */\r\n\tpublic static var txtsPath (get, never): String;\r\n\t\r\n\t/** \r\n\t * chemin du dossier d'assets graphiques\r\n\t */\r\n\tpublic static var assetsPath (get, never): String;\r\n\t\r\n\t/** \r\n\t * chemin du dossier de sons\r\n\t */\r\n\tpublic static var soundsPath (get, never): String;\r\n\r\n\t/** \r\n\t * chemin du dossier des polices de caractères\r\n\t */\r\n\tpublic static var fontsPath (get, never): String;\t\r\n\t\r\n\t/*\r\n\t * utiliser le cache du navigateur ou non\r\n\t */\r\n\tpublic static var cache(default, null):Bool = true;\r\n\t\r\n\t/**\r\n\t * conteneur des données de configuration\r\n\t */\r\n\tpublic static var data (get, never):Dynamic;\r\n\tprivate static var _data:Dynamic={};\r\n\t\r\n\tpublic static function init(pConfig:Json): Void {\t\t\r\n\t\tfor (i in Reflect.fields(pConfig)) Reflect.setField(_data, i, Reflect.field(pConfig, i));\t\r\n\t\t\r\n\t\tif (_data.version == null || _data.version==\"\") _data.version = \"0.0.0\";\r\n\t\tif (_data.gameName == null) _data.gameName = \"\";\r\n\t\t\r\n\t\tvar lStorage:Storage = Browser.getLocalStorage();\r\n\t\t\r\n\t\tvar lVersion:String = lStorage.getItem(gameName)==null ? null : Json.parse(lStorage.getItem(gameName)).version;\r\n\t\tif (lVersion != null) cache = version == lVersion;\r\n\t\tlStorage.setItem(gameName, Json.stringify({version:version}));\r\n\t\t\t\t\r\n\t\tif (_data.language == null || _data.language==\"\") _data.language = Browser.window.navigator.language.substr(0, 2);\r\n\t\tif (_data.languages==\"\" || _data.languages == []) _data.languages.push(_data.language);\r\n\t\tif (_data.debug == null || _data.debug==\"\") _data.debug = false;\r\n\t\tif (_data.fps == null || _data.fps==\"\") _data.fps = false;\r\n\t\tif (_data.qrcode == null || _data.qrcode==\"\") _data.qrcode = false;\r\n\r\n\t\tif (_data.langPath == null) _data.langPath = \"\";\r\n\t\tif (_data.txtsPath == null) _data.txtsPath = \"\";\r\n\t\tif (_data.assetsPath == null) _data.assetsPath = \"\";\r\n\t\tif (_data.fontsPath == null) _data.fontsPath = \"\";\r\n\t\tif (_data.soundsPath == null) _data.soundsPath = \"\";\r\n\t\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Retourne l'url complète (chemin+version)\r\n\t * @return url complète\r\n\t */\r\n\tpublic static function url (pPath:String):String {\r\n\t\treturn pPath + \"?\" + version;\r\n\t}\r\n\t\r\n\tprivate static function get_data ():Dynamic {\r\n\t\treturn _data;\r\n\t}\r\n\r\n\tprivate static function get_gameName ():String {\r\n\t\treturn _data.gameName;\r\n\t}\t\r\n\t\r\n\tprivate static function get_version ():String {\r\n\t\treturn _data.version;\r\n\t}\r\n\t\r\n\tprivate static function get_language ():String {\r\n\t\treturn data.language;\r\n\t}\r\n\t\r\n\tprivate static function get_languages ():Array<String> {\r\n\t\treturn data.languages;\r\n\t}\r\n\t\r\n\tprivate static function get_debug ():Bool {\r\n\t\treturn data.debug;\r\n\t}\r\n\t\r\n\tprivate static function get_fps ():Bool {\r\n\t\treturn data.fps;\r\n\t}\r\n\t\r\n\tprivate static function get_qrcode ():Bool {\r\n\t\treturn data.qrcode;\r\n\t}\r\n\t\r\n\tprivate static function get_langPath ():String {\r\n\t\treturn _data.langPath;\r\n\t}\r\n\r\n\tprivate static function get_txtsPath ():String {\r\n\t\treturn _data.txtsPath;\r\n\t}\t\r\n\t\r\n\tprivate static function get_assetsPath ():String {\r\n\t\treturn _data.assetsPath;\r\n\t}\r\n\t\r\n\tprivate static function get_fontsPath ():String {\r\n\t\treturn _data.fontsPath;\r\n\t}\r\n\t\r\n\tprivate static function get_soundsPath ():String {\r\n\t\treturn _data.soundsPath;\r\n\t}\r\n\r\n}","package com.isartdigital.utils;\r\n\r\nimport com.isartdigital.utils.system.DeviceCapabilities;\r\nimport js.Browser;\r\nimport js.html.Image;\r\n\r\n\r\n/**\r\n * Classe de Debug\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass Debug\r\n{\r\n\r\n\t/**\r\n\t * instance unique de la classe Main\r\n\t */\r\n\tprivate static var instance: Debug;\t\r\n\t\r\n\tpublic var fps:Perf;\r\n\tprivate static inline var QR_SIZE:Float = 0.35;\r\n\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): Debug {\r\n\t\tif (instance == null) instance = new Debug();\r\n\t\treturn instance;\r\n\t}\t\r\n\t\r\n\tprivate function new() {}\r\n\t\r\n\t/**\r\n\t * initialisation du débogueur\r\n\t * @param\tpGameDispatcher\r\n\t */\r\n\tpublic function init():Void \r\n\t{\r\n\t\tif (Config.fps) fps = new Perf(\"TL\");\r\n\t\t\r\n\t\tif (Config.qrcode && !DeviceCapabilities.isCocoonJS) \r\n\t\t{\r\n\t\t\tvar lQr:Image = new Image();\r\n\t\t\tlQr.style.position = 'absolute';\r\n\t\t\tlQr.style.right = '0px';\r\n\t\t\tlQr.style.bottom = '0px';\r\n\t\t\tvar lSize:Int = Std.int(QR_SIZE * DeviceCapabilities.getSizeFactor());\r\n\t\t\tlQr.src = 'https://chart.googleapis.com/chart?chs='+lSize+'x'+lSize+'&cht=qr&chl=' + Browser.location.href + '&choe=UTF-8';\r\n\t\t\tBrowser.document.body.appendChild(lQr);\r\n\t\t}\r\n\t}\r\n\t\r\n\tpublic static function error (pArg:Dynamic): Void {\r\n\t\tBrowser.console.error(pArg);\r\n\t}\r\n\t\r\n\tpublic static function warn (pArg:Dynamic): Void {\r\n\t\tBrowser.console.warn (pArg);\r\n\t}\r\n\r\n\tpublic static function table (pArg:Dynamic): Void {\r\n\t\tBrowser.console.table (pArg);\r\n\t}\r\n\r\n\tpublic static function info (pArg:Dynamic): Void {\r\n\t\tBrowser.console.info (pArg);\r\n\t}\r\n\t\r\n\tpublic function destroy (): Void {}\r\n\r\n}","package com.isartdigital.utils.game;\r\n\r\nimport pixi.core.display.Container;\r\nimport pixi.core.display.DisplayObject;\r\nimport pixi.core.graphics.Graphics;\r\nimport pixi.core.graphics.GraphicsData;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Rectangle;\r\nimport pixi.core.sprites.Sprite;\r\n\r\n/**\r\n * Classe utilitaire permettant de tester diverses collisions entre boites, formes et points\r\n * @author Mathieu ANTHOINE\r\n * @version 0.9.0\r\n */\r\nclass CollisionManager \r\n{\r\n\r\n\tprivate function new() {}\r\n\t\t\r\n\t/**\r\n\t * test la collision entre les boites englobantes de deux DisplayObject\r\n\t * @param\tpObjectA objet à tester\r\n\t * @param\tpObjectB objet à tester\r\n\t * @return résultat du test de collision\r\n\t */\r\n\tpublic static function hitTestObject(pObjectA:DisplayObject, pObjectB:DisplayObject):Bool {\r\n\t\t\r\n\t\treturn getIntersection(pObjectA.getBounds(), pObjectB.getBounds());\r\n\r\n\t}\r\n\t\r\n\t/**\r\n\t * test la collision entre l'objet et un point (prend en compte la hitArea si elle est définie). Légère adaptation de la méthode hitTest de la classe InteractionManager\r\n\t * @param\tpObject objet à tester\r\n\t * @param\tpPoint point exprimé en coordonnées globales\r\n\t * @return\trésultat du test de collision\r\n\t */\r\n\tpublic static function hitTestPoint (pItem:DisplayObject, pGlobalPoint:Point):Bool {\r\n\r\n\t\tvar lPoint:Point=pItem.toLocal(pGlobalPoint);\r\n\t\tvar x:Float = lPoint.x;\r\n\t\tvar y:Float = lPoint.y;\r\n\t\t\r\n\t\tif (pItem.hitArea != null && pItem.hitArea.contains != null) {\r\n\t\t\treturn pItem.hitArea.contains(x, y);\t\t\r\n\t\t}\r\n\t\telse if (Std.is(pItem, Sprite)) {\t\r\n\t\t\t\r\n\t\t\tvar lSprite:Sprite = cast(pItem, Sprite);\r\n\t\t\t\r\n\t\t\tvar lWidth:Float = lSprite.texture.frame.width;\r\n\t\t\tvar lHeight:Float = lSprite.texture.frame.height;\r\n\t\t\tvar lX1:Float = -lWidth * lSprite.anchor.x;\r\n\t\t\tvar lY1:Float;\r\n\t \r\n\t\t\tif (x > lX1 && x < lX1 + lWidth)\r\n\t\t\t{\r\n\t\t\t\tlY1 = -lHeight * lSprite.anchor.y;\r\n\t\t\t\tif (y > lY1 && y < lY1 + lHeight) return true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (Std.is(pItem, Graphics)) {\r\n\t\t\tvar lGraphicsData:Array<GraphicsData> = untyped pItem.graphicsData;\t\t\r\n\t\t\tfor (i in 0...lGraphicsData.length) {\r\n\t\t\t\tvar lData = lGraphicsData[i];\r\n\t\t\t\t // only deal with fills..\r\n\t\t\t\tif (! untyped lData.fill) continue;\t\t\t\r\n\t\t\t\tif(lData.shape!=null && lData.shape.contains(x, y)) return true;\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (Std.is (pItem, Container)) {\r\n\t\t\tvar lContainer:Container = cast(pItem, Container);\r\n\t\t\tvar lLength:Int = lContainer.children.length;\r\n\t\t\tfor (i in 0...lLength) {\r\n\t\t\t\tif (hitTestPoint(lContainer.children[i], pGlobalPoint)) {\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * \r\n\t * @param\tpHitBoxA boite englobante principale\r\n\t * @param\tpHitBoxB boite englobante principale\r\n\t * @param\tpPointsA liste de points de collision\r\n\t * @param\tpPointsB liste de points de collision\r\n\t * @return  résultat de la collision\r\n\t */\r\n\tpublic static function hasCollision (pHitBoxA:DisplayObject, pHitBoxB:DisplayObject, pPointsA:Array<Point> = null, pPointsB:Array<Point> = null): Bool {\r\n\t\tif (pHitBoxA == null || pHitBoxB == null) return false;\r\n\t\t\r\n\t\t// test des boites de collision principale\r\n\t\tif (!hitTestObject(pHitBoxA,pHitBoxB)) return false;\r\n\t\t\r\n\t\t// si il n'y a pas de boites de collision plus précises on valide\r\n\t\tif (pPointsA == null && pPointsB == null) return true;\t\t\t\r\n\t\t\r\n\t\t// test points vers la forme de la boite principale \r\n\t\tif (pPointsA!=null) return testPoints(pPointsA, pHitBoxB);\r\n\t\tif (pPointsB!=null) return testPoints(pPointsB, pHitBoxA);\r\n\t\t\r\n\t\treturn false;\r\n\r\n\t}\r\n\t\r\n\t/**\r\n\t * teste l'intersection des boites englobantes\r\n\t * @param\tpRectA rectangle à tester\r\n\t * @param\tpRectB rectangle à tester\r\n\t * @return résultat de l'intersection\r\n\t */\r\n\tprivate static function getIntersection (pRectA:Rectangle, pRectB:Rectangle): Bool {\r\n\t\treturn !(pRectB.x > (pRectA.x + pRectA.width) || (pRectB.x + pRectB.width) < pRectA.x || pRectB.y > (pRectA.y + pRectA.height) || (pRectB.y + pRectB.height) < pRectA.y);\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t * @param\tpHitPoints liste de points de collision (dont le repère est déjà converti en global)\r\n\t * @param\tpHitBox boite englobante\r\n\t * @return  résultat de la collision\r\n\t */\r\n\tprivate static function testPoints (pHitPoints:Array<Point>, pHitBox:DisplayObject): Bool {\r\n\t\tvar lLength:Int = pHitPoints.length;\r\n\t\tfor (i in 0...lLength) {\r\n\t\t\tif (hitTestPoint(pHitBox,pHitPoints[i])) return true;\r\n\t\t}\r\n\t\t\t\r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n\t\r\n}","package com.isartdigital.utils.game;\r\n\r\nimport com.isartdigital.utils.events.EventType;\r\nimport com.isartdigital.utils.system.DeviceCapabilities;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * Classe en charge de mettre en place la structure graphique du jeu (conteneurs divers)\r\n * et la gestion du redimensionnement de la zone de jeu en fonction du contexte\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass GameStage extends Container\r\n{\r\n\t\r\n\t/**\r\n\t * instance unique de la classe GameStage\r\n\t */\r\n\tprivate static var instance: GameStage;\r\n\r\n\tprivate var _alignMode: GameStageAlign = GameStageAlign.CENTER;\t\r\n\r\n\tprivate var _scaleMode: GameStageScale = GameStageScale.SHOW_ALL;\r\n\t\r\n\tprivate var _safeZone:Rectangle= new Rectangle(0,0,SAFE_ZONE_WIDTH,SAFE_ZONE_HEIGHT);\r\n\r\n\t/**\r\n\t * callback de render\r\n\t */\r\n\tprivate var _render:Void->Void;\t\r\n\t\r\n\t/**\r\n\t * largeur minimum pour le contenu visible par défaut\r\n\t */\r\n\tprivate static inline var SAFE_ZONE_WIDTH: Int = 2048;\r\n\r\n\t/**\r\n\t * hauteur minimum pour le contenu visible par défaut\r\n\t */\r\n\tprivate static inline var SAFE_ZONE_HEIGHT: Int = 1366;\r\n\t\t\r\n\t/**\r\n\t * conteneur des pop-in\r\n\t */\r\n\tprivate var popinsContainer:Container;\r\n\t\r\n\t/**\r\n\t * conteneur du Hud\r\n\t */\r\n\tprivate var hudContainer:Container;\r\n\t\r\n\t/**\r\n\t * conteneur des écrans d'interface\r\n\t */\r\n\tprivate var screensContainer:Container;\r\n\t\r\n\t/**\r\n\t * conteneur du jeu\r\n\t */\r\n\tprivate var gameContainer:Container;\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t\t\t\t\r\n\t\tgameContainer = new Container();\t\t\r\n\t\taddChild(gameContainer);\r\n\t\t\r\n\t\tscreensContainer = new Container();\r\n\t\taddChild(screensContainer);\r\n\t\t\r\n\t\thudContainer = new Container();\r\n\t\taddChild(hudContainer);\r\n\t\t\r\n\t\tpopinsContainer = new Container();\r\n\t\taddChild(popinsContainer);\r\n\r\n\t}\r\n\t\r\n\t/**\r\n\t * Initialisation de la zone de jeu\r\n\t * @param   pRender Callback qui fait le rendu pour mettre à jour le système de coordonnées avant de reconstruire d'éventuels éléments\r\n\t * @param\tpSafeZoneWidth largeur de la safeZone\r\n\t * @param\tpSafeZoneHeight hauteur de la safeZone\r\n\t * @param\tcenterGameContainer centrer ou pas le conteneur des élements InGame\r\n\t * @param\tcenterScreensContainer centrer ou pas le conteneur des Ecrans\r\n\t * @param\tcenterPopinContainer centrer ou pas le conteneur des Popins\r\n\t */\r\n\tpublic function init (pRender:Void->Void, ?pSafeZoneWidth:UInt = SAFE_ZONE_WIDTH, ?pSafeZoneHeight:UInt = SAFE_ZONE_WIDTH, ?pCenterGameContainer:Bool = false, ?pCenterScreensContainer:Bool = true, ?pCenterPopinContainer:Bool = true):Void {\r\n\t\t\r\n\t\t_safeZone = new Rectangle (0, 0, pSafeZoneWidth, pSafeZoneHeight);\r\n\t\t\r\n\t\tif (pCenterGameContainer) {\r\n\t\t\tgameContainer.x = safeZone.width / 2;\r\n\t\t\tgameContainer.y = safeZone.height / 2;\r\n\t\t}\r\n\t\t\r\n\t\tif (pCenterScreensContainer) {\r\n\t\t\tscreensContainer.x = safeZone.width / 2;\r\n\t\t\tscreensContainer.y = safeZone.height / 2;\r\n\t\t}\r\n\t\t\r\n\t\tif (pCenterPopinContainer) {\r\n\t\t\tpopinsContainer.x = safeZone.width / 2;\r\n\t\t\tpopinsContainer.y = safeZone.height / 2;\r\n\t\t}\r\n\t\t\r\n\t\t_render = pRender;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Retourne l'instance unique de la classe, et la crée si elle n'existait pas au préalable\r\n\t * @return instance unique\r\n\t */\r\n\tpublic static function getInstance (): GameStage {\r\n\t\tif (instance == null) instance = new GameStage();\r\n\t\treturn instance;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Redimensionne la scène du jeu en fonction de la taille disponible pour l'affichage\r\n\t */\r\n\tpublic function resize (): Void {\r\n\t\t\r\n\t\tvar lWidth:UInt = DeviceCapabilities.width;\r\n\t\tvar lHeight:UInt = DeviceCapabilities.height;\r\n\t\t\t\t\r\n\t\tvar lRatio:Float = Math.round(10000 * Math.min( lWidth / safeZone.width, lHeight / safeZone.height)) / 10000;\r\n\t\t\r\n\t\tif (scaleMode == GameStageScale.SHOW_ALL) scale.set(lRatio, lRatio);\r\n\t\telse scale.set (DeviceCapabilities.textureRatio, DeviceCapabilities.textureRatio);\r\n\t\t\r\n\t\tif (alignMode == GameStageAlign.LEFT || alignMode == GameStageAlign.TOP_LEFT || alignMode == GameStageAlign.BOTTOM_LEFT) x = 0;\r\n\t\telse if (alignMode == GameStageAlign.RIGHT || alignMode == GameStageAlign.TOP_RIGHT || alignMode == GameStageAlign.BOTTOM_RIGHT) x = lWidth - safeZone.width * scale.x;\r\n\t\telse x = (lWidth - safeZone.width * scale.x) / 2;\r\n\t\t\r\n\t\tif (alignMode == GameStageAlign.TOP || alignMode == GameStageAlign.TOP_LEFT || alignMode == GameStageAlign.TOP_RIGHT) y = 0;\r\n\t\telse if (alignMode == GameStageAlign.BOTTOM || alignMode == GameStageAlign.BOTTOM_LEFT || alignMode == GameStageAlign.BOTTOM_RIGHT) y = lHeight - safeZone.height * scale.y;\r\n\t\telse y = (lHeight - safeZone.height * scale.y) / 2;\r\n\t\t\r\n\t\t\r\n\t\trender();\r\n\t\t\r\n\t\temit (EventType.RESIZE, { width:lWidth, height:lHeight } );\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * fait le rendu de l'écran\r\n\t */\r\n\tpublic function render (): Void {\r\n\t\tif (_render!=null) _render();\r\n\t}\t\r\n\t\r\n\t/*\r\n\t * style d'alignement au sein de l'écran\r\n\t */\r\n\tpublic var alignMode (get, set) : GameStageAlign;\r\n\t\r\n\tprivate function get_alignMode( ) { \r\n\t\treturn _alignMode;\r\n\t}\r\n\t\r\n\tprivate function set_alignMode(pAlign:GameStageAlign) {\r\n\t\t_alignMode = pAlign;\r\n\t\tresize();\r\n\t\treturn _alignMode;\r\n\t}\r\n\r\n\t/*\r\n\t * style de redimensionnement au sein de l'écran\r\n\t */\r\n\tpublic var scaleMode (get, set) : GameStageScale;\r\n\t\r\n\tprivate function get_scaleMode( ) { \r\n\t\treturn _scaleMode;\r\n\t}\r\n\t\r\n\tprivate function set_scaleMode(pScale:GameStageScale) {\r\n\t\t_scaleMode = pScale;\r\n\t\tresize();\r\n\t\treturn _scaleMode;\r\n\t}\t\r\n\t\r\n\t/**\r\n\t * Rectangle délimitant le contenu minimum visible\r\n\t */\r\n\tpublic var safeZone (get, never):Rectangle;\r\n\t\r\n\tprivate function get_safeZone () {\r\n\t\treturn _safeZone;\r\n\t}\r\n\r\n\t/**\r\n\t * accès en lecture au conteneur de jeu\r\n\t * @return gameContainer\r\n\t */\r\n\tpublic function getGameContainer (): Container {\r\n\t\treturn gameContainer;\r\n\t}\r\n\t\r\n\t/**\r\n\t * accès en lecture au conteneur d'écrans\r\n\t * @return screensContainer\r\n\t */\r\n\tpublic function getScreensContainer (): Container {\r\n\t\treturn screensContainer;\r\n\t}\r\n\t\r\n\t/**\r\n\t * accès en lecture au conteneur de hud\r\n\t * @return hudContainer\r\n\t */\r\n\tpublic function getHudContainer (): Container {\r\n\t\treturn hudContainer;\r\n\t}\r\n\t\r\n\t/**\r\n\t * accès en lecture au conteneur de PopIn\r\n\t * @return popinContainer\r\n\t */\r\n\tpublic function getPopinsContainer (): Container {\r\n\t\treturn popinsContainer;\r\n\t}\r\n\t\t\t\t\r\n\t/**\r\n\t * détruit l'instance unique et met sa référence interne à null\r\n\t */\r\n\toverride public function destroy (): Void {\r\n\t\tinstance = null;\r\n\t\tsuper.destroy(true);\r\n\t}\r\n\r\n}","package com.isartdigital.utils.game.factory;\r\n\r\nimport pixi.core.display.Container;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu Anthoine\r\n */\r\nclass AnimFactory\r\n{\r\n\r\n\tprivate var anim:Container;\r\n\t\r\n\tprivate function new() \r\n\t{\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic function getAnim ():Container {\r\n\t\treturn anim;\r\n\t}\r\n\t\r\n\tpublic function create (pID:String):Container {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\tpublic function update (pId:String):Void {\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic function setFrame (?pAutoPlay:Bool=true, ?pStart:UInt = 0): Void {\r\n\r\n\t}\r\n\t\r\n}","package com.isartdigital.utils.game.factory;\r\n\r\nimport pixi.core.display.Container;\r\nimport pixi.display.FlumpMovie;\r\n\r\n\t\r\n/**\r\n * ...\r\n * @author Mathieu Anthoine\r\n */\r\nclass FlumpMovieAnimFactory extends AnimFactory \r\n{\r\n\t\r\n\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\toverride public function getAnim ():Container {\r\n\t\tif (anim !=null) {\r\n\t\t\tanim.parent.removeChild(anim);\r\n\t\t\tanim.destroy();\r\n\t\t\tanim = null;\r\n\t\t}\r\n\t\treturn super.getAnim();\r\n\t}\r\n\t\r\n\toverride public function create (pID:String):Container {\r\n\t\tanim = new FlumpMovie(pID);\r\n\t\treturn anim;\r\n\t}\r\n\t\r\n\toverride public function setFrame (?pAutoPlay:Bool=true, ?pStart:UInt = 0): Void {\r\n\t\tvar lAnim:FlumpMovie = cast(anim, FlumpMovie);\r\n\t\t\r\n\t\tif (lAnim.totalFrames > 1) {\r\n\t\t\tif (pAutoPlay) lAnim.gotoAndPlay(pStart);\r\n\t\t\telse lAnim.gotoAndStop(pStart);\r\n\t\t}\r\n\t\telse if (!pAutoPlay) lAnim.stop();\r\n\t}\r\n\r\n}","package com.isartdigital.utils.game.factory;\r\n\r\nimport pixi.core.display.Container;\r\nimport pixi.display.FlumpSprite;\r\n\r\n\t\r\n/**\r\n * ...\r\n * @author Mathieu Anthoine\r\n */\r\nclass FlumpSpriteAnimFactory extends AnimFactory \r\n{\r\n\t\r\n\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t}\r\n\t\r\n\toverride public function getAnim ():Container {\r\n\t\tif (anim !=null) {\r\n\t\t\tanim.parent.removeChild(anim);\r\n\t\t\tanim.destroy();\r\n\t\t\tanim = null;\r\n\t\t}\r\n\t\treturn super.getAnim();\r\n\t}\r\n\t\r\n\toverride public function create (pID:String):Container {\r\n\t\tanim = new FlumpSprite(pID);\r\n\t\treturn anim;\r\n\t}\r\n\t\r\n\toverride public function setFrame (?pAutoPlay:Bool=true, ?pStart:UInt = 0): Void {\r\n\t}\r\n\r\n}","package com.isartdigital.utils.game.factory;\r\nimport haxe.Json;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.textures.Texture;\r\nimport pixi.extras.MovieClip;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu Anthoine\r\n */\r\nclass MovieClipAnimFactory extends AnimFactory\r\n{\r\n\r\n\t/**\r\n\t * longueur de la numérotation des textures\r\n\t */\r\n\tpublic static var textureDigits (default, set) :UInt = 4;\r\n\t\r\n\tprivate static function set_textureDigits (pDigits:UInt) : UInt {\r\n\t\tdigits = \"\";\r\n\t\tfor (i in 0...pDigits) digits += \"0\";\r\n\t\treturn textureDigits = pDigits;\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * définition des textures (nombre d'images)\r\n\t */\r\n\tprivate static var texturesDefinition:Map<String,Int>;\r\n\t\r\n\t/**\r\n\t * définition des ancres des textures\r\n\t */\r\n\tprivate static var texturesAnchor:Map<String,Point>;\r\n\t\r\n\t/**\r\n\t * cache des textures de tous les StateGraphic\r\n\t */\r\n\tprivate static var texturesCache:Map<String,Array<Texture>>;\r\n\t\r\n\t/**\r\n\t * nombre de zéro à ajouter pour construire un nom de frame\r\n\t */\r\n\tprivate static var digits:String;\t\r\n\t\r\n\t/**\r\n\t * Analyse et crée les définitions de textures\r\n\t * @param\tpJson objet contenant la description des assets\r\n\t */\r\n\tstatic public function addTextures (pJson:Json): Void {\r\n\t\t\r\n\t\tvar lFrames:Dynamic = Reflect.field(pJson, \"frames\");\r\n\t\t\r\n\t\tif (texturesDefinition == null) texturesDefinition = new Map<String,Int>();\r\n\t\tif (texturesAnchor == null) texturesAnchor = new Map<String,Point>();\r\n\t\tif (texturesCache == null) texturesCache = new Map<String,Array<Texture>>();\r\n\t\tif (digits == null) textureDigits = textureDigits;\r\n\t\t\r\n\t\tvar lID:String;\r\n\t\tvar lNum:Int;\r\n\t\t\r\n\t\tfor (lName in Reflect.fields(lFrames)) {\r\n\t\t\t\r\n\t\t\tlID = lName.split(\".\")[0];\r\n\t\t\tlNum = Std.parseInt(lID.substr(-1*textureDigits));\r\n\t\t\tif (lNum != null) lID = lID.substr(0, lID.length - textureDigits);\r\n\t\t\t\r\n\t\t\tif (texturesDefinition[lID] == null) texturesDefinition[lID] = lNum == null ? 1 : lNum;\r\n\t\t\telse if (lNum > texturesDefinition[lID]) texturesDefinition[lID] = lNum;\r\n\t\t\t\r\n\t\t\tif (texturesAnchor[lID] == null) texturesAnchor[lID] = Reflect.field(lFrames, lName).pivot;\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Vide le cache de textures correspondant à la description passée en paramètres\r\n\t * @param\tpJson objet contenant la description des assets\r\n\t */\r\n\tstatic public function clearTextures (pJson:Json): Void {\r\n\t\t\r\n\t\tvar lFrames:Dynamic = Reflect.field(pJson, \"frames\");\r\n\t\t\r\n\t\tif (texturesDefinition == null) return;\r\n\t\t\r\n\t\tvar lID:String;\r\n\t\tvar lNum:Int;\r\n\t\t\r\n\t\tfor (lID in Reflect.fields(lFrames)) {\r\n\t\t\t\r\n\t\t\tlID = lID.split(\".\")[0];\r\n\t\t\tlNum = Std.parseInt(lID.substr(-1*textureDigits));\r\n\t\t\tif (lNum != null) lID = lID.substr(0, lID.length - textureDigits);\r\n\t\t\t\r\n\t\t\ttexturesDefinition[lID] = null;\r\n\t\t\ttexturesAnchor[lID] = null;\r\n\t\t\ttexturesCache[lID] = null;\r\n\t\t}\r\n\t}\t\r\n\t\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsuper();\r\n\t\t\r\n\t}\r\n\t\r\n\toverride public function create (pID:String):Container {\r\n\t\tanim = new MovieClip(getTextures(pID));\r\n\t\tcast (anim,MovieClip).anchor = texturesAnchor[pID];\r\n\t\treturn anim;\r\n\t}\r\n\t\r\n\toverride public function update (pID:String):Void {\r\n\t\tvar lAnim:MovieClip = cast(anim, MovieClip);\r\n\t\tlAnim.textures = getTextures(pID);\r\n\t\tlAnim.anchor = texturesAnchor[pID];\r\n\t}\r\n\t\r\n\toverride public function setFrame (?pAutoPlay:Bool=true, ?pStart:UInt = 0): Void {\r\n\t\tvar lAnim:MovieClip = cast(anim, MovieClip);\t\t\r\n\t\tlAnim.gotoAndStop(pStart);\r\n\t\tif (pAutoPlay) lAnim.play();\r\n\t}\r\n\t\r\n\t/**\r\n\t * Cherche dans le cache général de textures le tableau de textures correspondant au state et le retourne.\r\n\t * Si le tableau de texture n'éxiste pas, il le crée et le stocke dans le cache\r\n\t * @param\tpID ID complet de l'anim\r\n\t * @return\tle tableau de texture correspondant au state de l'instance\r\n\t */\r\n\tprivate function getTextures(pID:String):Array<Texture> {\r\n\t\t\r\n\t\tif (texturesCache[pID] == null) {\r\n\t\t\tvar lFrames:UInt = texturesDefinition[pID];\r\n\t\t\tif (lFrames == 1) texturesCache[pID] =[Texture.fromFrame(pID+\".png\")];\r\n\t\t\telse {\r\n\t\t\t\ttexturesCache[pID] = new Array<Texture>();\r\n\t\t\t\tfor (i in 1...lFrames+1) texturesCache[pID].push(Texture.fromFrame(pID+(digits + i).substr(-1*textureDigits) + \".png\"));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn texturesCache[pID];\r\n\t}\r\n\t\r\n}","package com.isartdigital.utils.loader;\r\nimport com.isartdigital.utils.events.LoadEventType;\r\nimport com.isartdigital.utils.sounds.SoundDef;\r\nimport com.isartdigital.utils.sounds.SoundManager;\r\nimport com.isartdigital.utils.system.DeviceCapabilities;\r\nimport haxe.Json;\r\nimport howler.Howl;\r\nimport howler.Howler;\r\nimport pixi.loaders.FlumpParser;\r\nimport pixi.loaders.Loader;\r\nimport pixi.loaders.Resource;\r\nimport pixi.loaders.ResourceLoader;\r\nimport webfont.WebFontLoader;\r\n\r\n/**\r\n * Classe de chargement\r\n * Cette classe permet de gérer des chargements par lot aussi bien de fichiers textes que de ressources graphiques ou du son\r\n * @author Mathieu ANTHOINE\r\n * @version 0.3.1\r\n */\r\nclass GameLoader extends Loader\r\n{\r\n\r\n\t/**\r\n\t * liste des fichiers sons à charger\r\n\t */\r\n\tprivate var soundsList:Array<String>;\r\n\t\r\n\tprivate var soundsSpecs:Map<String,HowlOptions>;\r\n\t\r\n\t/**\r\n\t * liste des fichiers chargés\r\n\t */\r\n\tprivate static var txtLoaded:Map<String,Dynamic> = new Map<String,Dynamic>();\r\n\t\r\n\t/**\r\n\t* retourne le contenu chargé pour le chemin de fichier passé en paramètre\r\n\t* @param\tpFile chemin du fichier\r\n\t* @return\tfichier Json\r\n\t*/\r\n\tpublic static function getContent (pFile:String):Json {\r\n\t\treturn txtLoaded[Config.txtsPath+pFile];\r\n\t}\r\n\t\r\n\tpublic function new() \r\n\t{\r\n\t\tsoundsList = [];\r\n\t\tsoundsSpecs = new Map();\r\n\t\tsuper();\r\n\t\tonce(LoadEventType.COMPLETE, onComplete);\r\n\t}\r\n\r\n\t/**\r\n\t* ajoute un fichier de type texte à la liste de chargement (actuellement seuls les JSon sont supportés)\r\n\t* @param\tpUrl chaine de caractères spécifiant le chemin vers le fichier\r\n\t*/\r\n\tpublic function addTxtFile (pUrl:String):Void {\r\n\t\tvar lUrl:String = Config.txtsPath+pUrl;\r\n\t\tadd(Config.url(lUrl));\r\n\t}\t\r\n\t\r\n\t/**\r\n\t* ajoute un fichier d'assets à la liste de chargement\r\n\t* @param\tpUrl chaine de caractère spécifiant le nom du fichier\r\n\t*/\r\n\tpublic function addAssetFile (pUrl:String):Void {\t\r\n\t\tvar lUrl:String = Config.assetsPath + pUrl;\r\n\t\tadd(Config.url(lUrl));\t\t\r\n\t}\r\n\r\n\t/**\r\n\t* ajoute une liste de sons à la liste de chargement\r\n\t* @param\tpUrl chaine de caractère spécifiant le nom du fichier\r\n\t*/\r\n\tpublic function addSoundFile (pUrl:String):Void {\t\r\n\t\tvar lUrl:String = Config.soundsPath + pUrl;\r\n\t\tsoundsList.push(lUrl);\r\n\t\tadd(Config.url(lUrl));\r\n\t}\t\r\n\t\r\n\t/**\r\n\t* ajoute un fichier css de polices de caractère\r\n\t* @param\tpUrl chaine de caractère spécifiant le nom du fichier\r\n\t*/\r\n\tpublic function addFontFile (pUrl:String):Void {\t\r\n\t\tvar lUrl:String = Config.fontsPath + pUrl;\r\n\t\tadd(Config.url(lUrl));\t\t\r\n\t}\r\n\t\r\n\tprivate function parseData (pResource:Resource, pNext:Void->Void): Void {\r\n\t\t\r\n\t\ttrace (pResource.url + \" loaded\");\r\n\t\t\r\n\t\tvar lUrl:String = pResource.url.split(\"?\")[0];\r\n\t\t\r\n\t\tif (lUrl.indexOf(\".css\") > 0 && !DeviceCapabilities.isCocoonJS) {\r\n\t\t\t\r\n\t\t\tvar lData:Array<String> = pResource.data.split(\";\");\r\n\t\t\tvar lFamilies:Array<String> = [];\r\n\t\t\tvar lReg:EReg = ~/font-family:\\s?(.*)/; \r\n\t\t\t\r\n\t\t\tfor (i in 0...lData.length) {\r\n\t\t\t\tif (lReg.match(lData[i])) lFamilies.push(lReg.matched(1));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar lWebFontConfig = {\r\n\t\t\t\tcustom: {\r\n\t\t\t\t\tfamilies: lFamilies,\r\n\t\t\t\t\turls: [Config.fontsPath+\"fonts.css\"],\r\n\t\t\t\t},\r\n\r\n\t\t\t\tactive: pNext\r\n\t\t\t};\r\n\t\t   \r\n\t\t\tWebFontLoader.load(lWebFontConfig);\t\t\t\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tif (pResource.isJson) {\t\t\t\r\n\t\t\ttxtLoaded[lUrl] = pResource.data;\r\n\t\t\t\r\n\t\t\tif(lUrl.substr(-12,12)==\"library.json\" && Reflect.hasField(pResource.data,\"md5\") && Reflect.hasField(pResource.data,\"movies\") && Reflect.hasField(pResource.data,\"textureGroups\") && Reflect.hasField(pResource.data,\"frameRate\")) {\r\n\t\t\t\tFlumpParser.flumpParser(1,Config.cache)(pResource, pNext);\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\telse if (soundsList.length>0) { \r\n\t\t\t\r\n\t\t\t\tvar lData:SoundDef;\r\n\t\t\t\t\r\n\t\t\t\tfor (i in 0...soundsList.length) {\r\n\t\t\t\t\tif (lUrl == soundsList[i]) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsoundsList.splice(i, 1);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlData = pResource.data;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (DeviceCapabilities.isCocoonJS) {\r\n\t\t\t\t\t\t\tif (lData.extensions.indexOf(\"ogg\") == -1) throw \"CocoonJs needs ogg sounds. No sound will be played in the application.\";\r\n\t\t\t\t\t\t\telse lData.extensions = [\"ogg\"];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\tfor (j in 0...lData.extensions.length) {\r\n\t\t\t\t\t\t\tif (Howler.codecs(lData.extensions[j])) {\r\n\t\t\t\t\t\t\t\taddSounds(lData.fxs,false,lData.extensions,lData.extensions[i]);\r\n\t\t\t\t\t\t\t\taddSounds(lData.musics,true,lData.extensions,lData.extensions[i]);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\tpNext();\r\n\t}\r\n\r\n\tprivate function manageCache (pResource:Resource, pNext:Void->Void): Void {\r\n\t\tif  (pResource.name != pResource.url) pResource.url = Config.url(pResource.url);\r\n\t\tpNext();\r\n\t}\t\r\n\t\r\n\tprivate function addSounds (pList:Dynamic, pLoop:Bool, pExtensions:Array<String>, pCodec:String): Void {\t\r\n\t\tvar lUrl:String;\r\n\t\tfor (lID in Reflect.fields(pList)) {\r\n\t\t\tlUrl = Config.url(Config.soundsPath + lID + \".\" + pCodec);\r\n\t\t\tsoundsSpecs.set(lID, {urls:[lUrl],volume:Reflect.field(pList, lID) / 100, loop:pLoop} );\r\n\t\t\tadd(lUrl);\r\n\t\t}\r\n\t}\r\n\r\n\toverride public function load (?cb:Void -> Void):ResourceLoader {\r\n\t\tbefore(manageCache);\r\n\t\tafter(parseData);\r\n\t\treturn super.load();\r\n\t}\r\n\t\r\n\tprivate function onComplete ():Void {\r\n\t\tfor (lID in soundsSpecs.keys()) {\r\n\t\t\tSoundManager.addSound(lID, new Howl (soundsSpecs[lID]));\r\n\t\t}\r\n\t}\r\n\t\r\n}","package com.isartdigital.utils.sounds;\r\n\r\nimport howler.Howl;\r\n\r\n\t\r\n/**\r\n * Manager centralisé de Sons Howler\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass SoundManager\r\n{\r\n\t/**\r\n\t * liste de tous les sons du jeu\r\n\t */\r\n\tprivate static var list (default,null):Map<String,Howl>;\r\n\t\r\n\tprivate function new() {\r\n\t}\r\n\t\r\n\t/**\r\n\t * ajoute un son à la liste\r\n\t * @param\tpName identifiant du son\r\n\t * @param\tpSound son\r\n\t */\r\n\tpublic static function addSound (pName:String,pSound:Howl):Void {\r\n\t\tif (list == null) list = new Map<String,Howl>();\r\n\t\tlist[pName] = pSound;\r\n\t}\r\n\t\r\n\t/**\r\n\t * retourne une référence vers le son par l'intermédiaire de son identifiant\r\n\t * @param\tpName identifiant du son\r\n\t * @return le son\r\n\t */\r\n\tpublic static function getSound(pName:String): Howl {\r\n\t\treturn list[pName];\r\n\t}\r\n\r\n}","package com.isartdigital.utils.system;\r\n\r\nimport com.isartdigital.utils.game.GameStage;\r\nimport js.Browser;\r\nimport js.html.Element;\r\nimport js.html.Event;\r\nimport js.html.Image;\r\nimport pixi.core.display.DisplayObject;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\t\r\n/**\r\n * Classe Utilitaire donnant accès à des propriétés du périphérique cible\r\n * Tous les périphériques ne se comportant pas comme on l'attend, DeviceCapabilities permet de\r\n * masquer les comportement différents et présenter une facade unique au reste du code\r\n * @version 0.4.0\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass DeviceCapabilities \r\n{\t\t\r\n\r\n\tpublic static inline var SYSTEM_ANDROID: String = \"Android\";\r\n\tpublic static inline var SYSTEM_IOS: String = \"iOS\";\r\n\tpublic static inline var SYSTEM_BLACKBERRY: String = \"BlackBerry\";\r\n\tpublic static inline var SYSTEM_BB_PLAYBOOK: String = \"BlackBerry PlayBook\";\r\n\tpublic static inline var SYSTEM_WINDOWS_MOBILE: String = \"IEMobile\";\r\n\tpublic static inline var SYSTEM_DESKTOP: String = \"Desktop\";\t\r\n\t\r\n\tprivate static var fullScreenButton:Image;\r\n\tprivate static inline var ICON_SIZE:Float = 0.075;\r\n\r\n\tpublic static inline var TEXTURE_NO_SCALE: String = \"\";\r\n\tpublic static inline var TEXTURE_HD: String = \"hd\";\r\n\tpublic static inline var TEXTURE_MD: String = \"md\";\r\n\tpublic static inline var TEXTURE_LD: String = \"ld\";\t\r\n\t\r\n\tprivate static var texturesRatios: Map<String,Float> = [\"hd\"=>1,\"md\"=>0.5,\"ld\"=>0.25];\r\n\t\r\n\tpublic static var textureRatio (default,null):Float = 1;\r\n\tpublic static var textureType (default,null):String = TEXTURE_NO_SCALE;\t\r\n\t\r\n\tprivate static var screenRatio:Float = 1;\r\n\t\r\n\t/**\r\n\t  * hauteur du Canvas (change avec l'orientation)\r\n\t  */\r\n\tpublic static var height (get, never) : UInt;\r\n\t\r\n\tprivate static function get_height () {\r\n\t\treturn Browser.window.innerHeight;\r\n\t}\r\n\t\r\n\t/**\r\n\t  * largeur du Canvas (change avec l'orientation)\r\n\t  */\r\n\tpublic static var width (get, never) : UInt;\r\n\t\r\n\tprivate static function get_width () {\r\n\t\treturn Browser.window.innerWidth;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Système d'exploitation du Device\r\n\t */\r\n\tpublic static var system (get, never) : String;\r\n\t\r\n\tprivate static function get_system( ) {\r\n\t\tif ( ~/IEMobile/i.match(Browser.navigator.userAgent)) return SYSTEM_WINDOWS_MOBILE;\t\r\n\t\telse if ( ~/iPhone|iPad|iPod/i.match(Browser.navigator.userAgent)) return SYSTEM_IOS;\r\n\t\telse if ( ~/BlackBerry/i.match(Browser.navigator.userAgent)) return SYSTEM_BLACKBERRY;\r\n\t\telse if ( ~/PlayBook/i.match(Browser.navigator.userAgent)) return SYSTEM_BB_PLAYBOOK;\r\n\t\telse if ( ~/Android/i.match(Browser.navigator.userAgent)) return SYSTEM_ANDROID;\r\n\t\telse return SYSTEM_DESKTOP;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Est-ce que le jeu est encapsulé dans CocoonJs\r\n\t */\r\n\tpublic static var isCocoonJS (get, never) : Bool;\r\n\t\r\n\tprivate static function get_isCocoonJS () {\r\n\t\treturn untyped Browser.navigator.isCocoonJS;\r\n\t}\r\n\t\r\n\t/**\r\n\t * affiche le bouton de fullscreen\r\n\t */\r\n\tpublic static function displayFullScreenButton ():Void {\r\n\t\tif (isCocoonJS) return;\r\n\t\t\r\n\t\tif (!~/(iPad|iPhone|iPod)/g.match(Browser.navigator.userAgent) && !~/MSIE/i.match(Browser.navigator.userAgent) /*&& !(Browser.window.location.hash = !!Browser.window.MSInputMethodContext)*/) {\r\n\r\n\t\t\tBrowser.document.onfullscreenchange = onChangeFullScreen;\r\n\t\t\tuntyped Browser.document.onwebkitfullscreenchange = onChangeFullScreen;\r\n\t\t\tuntyped Browser.document.onmozfullscreenchange = onChangeFullScreen;\r\n\t\t\tuntyped Browser.document.onmsfullscreenchange = onChangeFullScreen;\r\n\t\t\t//Browser.document.addEventListener(\"MSFullscreenChange\", onChangeFullScreen );\r\n\t\t\t\r\n\t\t\tfullScreenButton = new Image();\r\n\t\t\tfullScreenButton.style.position = 'absolute';\r\n\t\t\tfullScreenButton.style.right = '0px';\r\n\t\t\tfullScreenButton.style.top = '0px';\r\n\t\t\tfullScreenButton.style.cursor = \"pointer\";\r\n\t\t\tfullScreenButton.width = Std.int(getSizeFactor()*ICON_SIZE);\r\n\t\t\tfullScreenButton.height = Std.int(getSizeFactor()*ICON_SIZE);\r\n\t\t\tfullScreenButton.onclick = enterFullscreen;\r\n\t\t\tfullScreenButton.src = Config.assetsPath+\"fullscreen.png\";\r\n\t\t\t\r\n\t\t\tBrowser.document.body.appendChild(fullScreenButton);\r\n\r\n\t\t}\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * entre dans le mode fullscreen\r\n\t * @param\tpEvent\r\n\t */\r\n\tprivate static function enterFullscreen(pEvent:Event):Void {\r\n\t\tvar lDocElm:Element = Browser.document.documentElement;\r\n\t\tif (lDocElm.requestFullscreen!=null) lDocElm.requestFullscreen();\r\n\t\telse if (untyped lDocElm.mozRequestFullScreen!=null) untyped lDocElm.mozRequestFullScreen();\r\n\t\telse if (untyped lDocElm.webkitRequestFullScreen!=null) untyped lDocElm.webkitRequestFullScreen();\r\n\t\telse if (untyped lDocElm.msRequestFullscreen!=null) untyped lDocElm.msRequestFullscreen();\r\n\t\t\r\n\t}\r\n\r\n\t/**\r\n\t * sort du mode fullscreen\r\n\t */\r\n\tprivate static function exitFullscreen():Void {\r\n\t\tif (Browser.document.exitFullscreen!=null) Browser.document.exitFullscreen();\r\n\t\telse if (untyped Browser.document.mozCancelFullScreen!=null) untyped Browser.document.mozCancelFullScreen();\r\n\t\telse if (untyped Browser.document.webkitCancelFullScreen!=null) untyped Browser.document.webkitCancelFullScreen();\r\n\t\telse if (untyped Browser.document.msExitFullscreen) untyped Browser.document.msExitFullscreen();\r\n\t}\r\n\r\n\t/**\r\n\t * callback appelée sur changement d'état fullscreen\r\n\t * @param\tpEvent\r\n\t */\r\n\tprivate static function onChangeFullScreen (pEvent:Event):Void {\r\n\t\tif (untyped Browser.document.fullScreen || untyped Browser.document.mozFullScreen || untyped Browser.document.webkitIsFullScreen || untyped Browser.document.msFullscreenElement) {\r\n\t\t\tfullScreenButton.style.display = 'none';\r\n\t\t} else {\r\n\t\t\tfullScreenButton.style.display = 'block';\r\n\t\t}\r\n\t\tpEvent.preventDefault();\r\n\t}\r\n\r\n\t\r\n\t/**\r\n\t * Calcul la dimension idéale du bouton en fonction du device\r\n\t * @return fullscreen ideal size\r\n\t */\r\n\tpublic static function getSizeFactor ():Float {\r\n\t\tvar lSize:Float=Math.floor(Math.min(Browser.window.screen.width,Browser.window.screen.height));\r\n\t\tif (system==SYSTEM_DESKTOP) lSize/=3;\r\n\r\n\t\treturn lSize;\r\n\t}\r\n\t\t\r\n\t/**\r\n\t * retourne un objet Rectangle correspondant aux dimensions de l'écran dans le repère du DisplayObject passé en paramètre\r\n\t * @param pTarget repère cible\r\n\t * @return objet Rectangle\r\n\t */\r\n\tpublic static function getScreenRect(pTarget:DisplayObject):Rectangle {\r\n\r\n\t\tvar lTopLeft:Point = new Point (0, 0);\r\n\t\tvar lBottomRight:Point = new Point (width, height);\r\n\t\t\r\n\t\tlTopLeft = pTarget.toLocal(lTopLeft);\r\n\t\tlBottomRight = pTarget.toLocal(lBottomRight);\r\n\t\t\r\n\t\treturn new Rectangle(lTopLeft.x, lTopLeft.y, lBottomRight.x - lTopLeft.x, lBottomRight.y - lTopLeft.y);\r\n\t}\r\n\r\n\t/**\r\n\t * Calibre le viewport pour que le Browser affiche la résolution réeelle du Device\r\n\t */\r\n\tpublic static function scaleViewport (): Void {\r\n\t\t\r\n\t\t//TODO: COCOONJS\r\n\t\tif (system == SYSTEM_WINDOWS_MOBILE) return;\r\n\t\t\r\n\t\tscreenRatio = Browser.window.devicePixelRatio;\r\n\t\tif (!isCocoonJS) Browser.document.write('<meta name=\"viewport\" content=\"initial-scale=' + Math.round(100 / screenRatio) / 100 + ', user-scalable=no, minimal-ui\">');\t\t\t\t\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Défini les ratios de texture\r\n\t * @param\tpHd ratio texture pour HD\r\n\t * @param\tpMd ratio texture pour MD\r\n\t * @param\tpLd ratio texture pour LD\r\n\t */\r\n\tpublic static function init(?pHd:Float = 1, ?pMd:Float = 0.5, ?pLd:Float = 0.25):Void {\r\n\r\n\t\ttexturesRatios[TEXTURE_HD]=pHd;\r\n\t\ttexturesRatios[TEXTURE_MD]=pMd;\r\n\t\ttexturesRatios[TEXTURE_LD]=pLd;\r\n\t\t\r\n\t\tif (Config.data.texture != null && Config.data.texture != \"\") {\r\n\t\t\ttrace(Config.data.texture);\r\n\t\t\ttextureType = Config.data.texture;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar lRatio:Float = Math.min(Browser.window.screen.width * screenRatio / GameStage.getInstance().safeZone.width, Browser.window.screen.height * screenRatio / GameStage.getInstance().safeZone.height);\r\n\t\t\tif (lRatio <= 0.25) textureType = TEXTURE_LD;\r\n\t\t\telse if (lRatio <= 0.5) textureType = TEXTURE_MD;\r\n\t\t\telse textureType = TEXTURE_HD;\r\n\t\t}\r\n\t\ttextureRatio = texturesRatios[textureType];\r\n\t\t\r\n\t}\r\n\r\n}","package com.isartdigital.utils.ui;\r\n\r\nimport com.isartdigital.utils.game.factory.FlumpSpriteAnimFactory;\r\nimport com.isartdigital.utils.game.StateGraphic;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu Anthoine\r\n */\r\nclass UIAsset extends StateGraphic\r\n{\r\n\r\n\tpublic function new(pAssetName:String) \r\n\t{\r\n\t\tsuper();\r\n\t\tassetName = pAssetName;\r\n\t\tfactory = new FlumpSpriteAnimFactory();\r\n\t\tsetState(DEFAULT_STATE);\r\n\t}\r\n\t\r\n}","package com.isartdigital.utils.ui;\r\n\r\nimport com.isartdigital.utils.game.GameStage;\r\nimport com.isartdigital.utils.loader.GameLoader;\r\nimport com.isartdigital.utils.system.DeviceCapabilities;\r\nimport com.isartdigital.utils.ui.UIPosition;\r\nimport flump.json.FlumpJSON;\r\nimport haxe.Json;\r\nimport pixi.core.display.Container;\r\nimport pixi.core.math.Point;\r\nimport pixi.display.FlumpSprite;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu Anthoine\r\n */\r\nclass UIBuilder\r\n{\r\n\t\r\n\t/**\r\n\t * fichier de description des assets d'UI au format Flump\r\n\t */\r\n\tprivate static var description:Map<String,String>;\r\n\r\n\t/**\r\n\t * suffixe des FlumpSprite \"texte\"\r\n\t */\r\n\tprivate static inline var TXT_SUFFIX:String = \"_txt\";\r\n\t\r\n\t/**\r\n\t * suffixe des FlumpButton\r\n\t */\r\n\tprivate static inline var BTN_SUFFIX:String = \"Button\";\r\n\t\r\n\t/**\r\n\t * wrapper vers UIPosition\r\n\t */\r\n\tprivate static var uiPos:Map<String,String> =\r\n\t\t[\r\n\t\t\t\"L\" => UIPosition.LEFT,\r\n\t\t\t\"R\" => UIPosition.RIGHT,\r\n\t\t\t\"T\" => UIPosition.TOP,\r\n\t\t\t\"B\" => UIPosition.BOTTOM,\r\n\t\t\t\"TL\" => UIPosition.TOP_LEFT,\r\n\t\t\t\"TR\" => UIPosition.TOP_RIGHT,\r\n\t\t\t\"BL\" => UIPosition.BOTTOM_LEFT,\r\n\t\t\t\"BR\" => UIPosition.BOTTOM_RIGHT,\r\n\t\t\t\"FW\" => UIPosition.FIT_WIDTH,\r\n\t\t\t\"FH\" => UIPosition.FIT_HEIGHT,\r\n\t\t\t\"FS\" => UIPosition.FIT_SCREEN\r\n\t\t];\r\n\t\r\n\tprivate function new() {}\t\r\n\t\r\n\t/**\r\n\t * Initialise le parseur\r\n\t * @param\tpFile nom du fichier qui contient les données de mise en forme de l'UI\r\n\t * @param\tpPackage nom du package des boutons\r\n\t */\r\n\tpublic static function addDescriptions(pFile:String,pPackage:String):Void {\r\n\t\tif (description == null) description = new Map < String, String>();\r\n\t\tdescription.set(pFile, pPackage);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Crée les éléments composant un Screen\r\n\t * @param\tpId assetName de l'écran\r\n\t */\r\n\tpublic static function build (pId:String) : Array<UIPositionable> {\r\n\t\t\r\n\t\tvar lData:FlumpJSON;\r\n\t\tvar lObj:Container;\r\n\t\tvar lItem;\r\n\t\tvar lUIPos:Array<UIPositionable>=[];\r\n\t\t\r\n\t\tfor (lDescription in description.keys()) {\r\n\t\t\r\n\t\t\tlData= cast GameLoader.getContent(lDescription);\r\n\t\t\t\r\n\t\t\tfor (lMovie in lData.movies) {\r\n\t\t\t\tif (lMovie.id == pId) {\r\n\t\t\t\t\tfor (lItem in lMovie.layers) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (StringTools.endsWith(lItem.name,TXT_SUFFIX)) {\r\n\t\t\t\t\t\t\t//TODO: A vous de le coder pour remplacer le texte statique en un texte dynamique localisable\r\n\t\t\t\t\t\t\tlObj = new UIAsset(lItem.keyframes[0].ref);\r\n\t\t\t\t\t\t} else if (StringTools.endsWith(lItem.name,BTN_SUFFIX)) {\t\r\n\t\t\t\t\t\t\tlObj = Type.createInstance(Type.resolveClass(description.get(lDescription)+\".\" + lItem.keyframes[0].ref), []);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlObj = new UIAsset(lItem.keyframes[0].ref);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlObj.name = lItem.keyframes[0].ref;\r\n\t\t\t\t\t\tif (Reflect.hasField(lItem.keyframes[0],\"loc\")) lObj.position.set(lItem.keyframes[0].loc.x, lItem.keyframes[0].loc.y);\r\n\t\t\t\t\t\tif (Reflect.hasField(lItem.keyframes[0],\"scale\")) lObj.scale.set(lItem.keyframes[0].scale.x, lItem.keyframes[0].scale.y);\r\n\t\t\t\t\t\tif (Reflect.hasField(lItem.keyframes[0],\"skew\")) lObj.skew.set(lItem.keyframes[0].skew.x,lItem.keyframes[0].skew.y);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlUIPos.push(getUIPositionable(lObj,uiPos.get(lItem.name.split(\"_\")[0])));\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn lUIPos;\r\n\t\t\r\n\t}\r\n\t\r\n\tpublic static function getTextStyle(pId:String):UITextStyle {\r\n\t\tvar lData:Json;\r\n\t\t\r\n\t\tfor (lDescription in description.keys()) {\t\r\n\t\t\tlData = cast GameLoader.getContent(\"texts_\"+lDescription);\r\n\t\t\tif (Reflect.hasField(lData, pId)) return Reflect.field(lData, pId);\r\n\t\t}\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * retourne un UIPositionable correctement construit\r\n\t * @param\tpObj Item d'interface\r\n\t * @param\tpPosition ancrage \"UIPosition\"\r\n\t * @return un UIPositionable\r\n\t */\r\n\tprivate static function getUIPositionable (pObj:Container,pPosition:String):UIPositionable {\r\n\t\t\r\n\t\tvar lOffset:Point = new Point (0, 0);\r\n\t\t\r\n\t\tif (\r\n\t\t\tpPosition != UIPosition.BOTTOM &&\r\n\t\t\tpPosition != UIPosition.BOTTOM_LEFT &&\r\n\t\t\tpPosition != UIPosition.BOTTOM_RIGHT &&\r\n\t\t\tpPosition != UIPosition.FIT_HEIGHT &&\r\n\t\t\tpPosition != UIPosition.FIT_SCREEN &&\r\n\t\t\tpPosition != UIPosition.FIT_WIDTH &&\r\n\t\t\tpPosition != UIPosition.LEFT &&\r\n\t\t\tpPosition != UIPosition.RIGHT &&\r\n\t\t\tpPosition != UIPosition.TOP &&\r\n\t\t\tpPosition != UIPosition.TOP_LEFT &&\r\n\t\t\tpPosition != UIPosition.TOP_RIGHT\r\n\t\t) pPosition = \"\";\r\n\t\telse {\r\n\t\t\tif (pPosition == UIPosition.TOP || pPosition == UIPosition.TOP_LEFT || pPosition == UIPosition.TOP_RIGHT ||\r\n\t\t\t\tpPosition == UIPosition.BOTTOM || pPosition == UIPosition.BOTTOM_LEFT || pPosition == UIPosition.BOTTOM_RIGHT) lOffset.y = pObj.y;\r\n\t\t\tif (pPosition == UIPosition.LEFT || pPosition == UIPosition.TOP_LEFT || pPosition == UIPosition.BOTTOM_LEFT ||\r\n\t\t\t\tpPosition == UIPosition.RIGHT || pPosition == UIPosition.TOP_RIGHT || pPosition == UIPosition.BOTTOM_RIGHT) lOffset.x = pObj.x;\t\t\r\n\t\t}\r\n\t\t\r\n\t\treturn {item:pObj, align:pPosition, offsetX:lOffset.x, offsetY:lOffset.y, update:true};\r\n\t}\r\n\t\r\n}\r\n\r\n","package com.isartdigital.utils.ui;\r\nimport com.isartdigital.utils.system.DeviceCapabilities;\r\nimport pixi.core.display.DisplayObject;\r\nimport pixi.core.math.Point;\r\nimport pixi.core.math.shapes.Rectangle;\r\n\r\n/**\r\n * Classe utilitaire permettant de gérer le repositionnement des élements d'interface dans l'écran\r\n * @author Mathieu ANTHOINE\r\n */\r\n\r\nclass UIPosition \r\n{\r\n\tpublic static inline var LEFT:String=\"left\";\r\n\tpublic static inline var RIGHT:String=\"right\";\r\n\tpublic static inline var TOP:String=\"top\";\r\n\tpublic static inline var BOTTOM:String=\"bottom\";\r\n\tpublic static inline var TOP_LEFT:String=\"topLeft\";\r\n\tpublic static inline var TOP_RIGHT:String=\"topRight\";\r\n\tpublic static inline var BOTTOM_LEFT:String=\"bottomLeft\";\r\n\tpublic static inline var BOTTOM_RIGHT:String=\"bottomRight\";\r\n\t\r\n\tpublic static inline var FIT_WIDTH:String=\"fitWidth\";\r\n\tpublic static inline var FIT_HEIGHT:String=\"fitHeight\";\r\n\tpublic static inline var FIT_SCREEN:String = \"fitScreen\";\r\n\t\r\n\tprivate function new() {}\r\n\t\r\n\t/**\r\n\t* \r\n\t* @param\tpTarget DisplayObject à positionner\r\n\t* @param\tpPosition type de positionnement\r\n\t* @param\tpOffsetX décalage en X (positif si c'est vers l'interieur de la zone de jeu sinon en négatif)\r\n\t* @param\tpOffsetY décalage en Y (positif si c'est vers l'interieur de la zone de jeu sinon en négatif)\r\n\t*/\r\n\tstatic public function setPosition (pTarget:DisplayObject, pPosition:String, pOffsetX:Float = 0, pOffsetY:Float = 0): Void {\r\n\t\t\t\t\r\n\t\tvar lScreen:Rectangle = DeviceCapabilities.getScreenRect(pTarget.parent);\r\n\t\t\r\n\t\tvar lTopLeft:Point = new Point (lScreen.x, lScreen.y);\r\n\t\tvar lBottomRight:Point = new Point (lScreen.x+lScreen.width,lScreen.y+lScreen.height);\r\n\t\t\r\n\t\tif (pPosition == TOP || pPosition == TOP_LEFT || pPosition == TOP_RIGHT) pTarget.y = lTopLeft.y + pOffsetY;\r\n\t\tif (pPosition == BOTTOM || pPosition == BOTTOM_LEFT || pPosition == BOTTOM_RIGHT) pTarget.y = lBottomRight.y - pOffsetY;\r\n\t\tif (pPosition == LEFT || pPosition == TOP_LEFT || pPosition == BOTTOM_LEFT) pTarget.x = lTopLeft.x + pOffsetX;\r\n\t\tif (pPosition == RIGHT || pPosition == TOP_RIGHT || pPosition == BOTTOM_RIGHT) pTarget.x = lBottomRight.x - pOffsetX;\r\n\t\t\r\n\t\tif (pPosition == FIT_WIDTH || pPosition == FIT_SCREEN) {\r\n\t\t\tpTarget.x = lTopLeft.x;\r\n\t\t\tuntyped pTarget.width = lBottomRight.x - lTopLeft.x;\r\n\t\t}\r\n\t\tif (pPosition == FIT_HEIGHT || pPosition == FIT_SCREEN) {\r\n\t\t\tpTarget.y = lTopLeft.y;\r\n\t\t\tuntyped pTarget.height = lBottomRight.y - lTopLeft.y;\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n}\r\n","package flump;\n\nimport flump.library.Keyframe;\n\n\nclass DisplayObjectKey {\n\n\tpublic var symbolId:String;\n\n\n\tpublic function new(symbolId:String){\n\t\tthis.symbolId = symbolId;\n\t}\n\n}","package flump;\n\nimport flump.DisplayObjectKey;\nimport flump.IFlumpMovie;\nimport flump.library.MovieSymbol;\nimport flump.library.Layer;\nimport flump.library.Keyframe;\nimport flump.library.Label;\nusing Std;\n\n\nclass MoviePlayer{\n\n\tprivate var symbol:MovieSymbol;\n\tprivate var movie:IFlumpMovie;\n\n\tprivate var elapsed:Float = 0.0; // Total time that has elapsed\n\tprivate var previousElapsed:Float = 0.0;\n\tprivate var advanced:Float = 0.0; // Time advanced since the last frame\n\n\tpublic var independantTimeline:Bool = true;\n\tpublic var independantControl:Bool = true;\n\n\tprivate var state:String;\n\tprivate var STATE_PLAYING:String = \"playing\";\n\tprivate var STATE_LOOPING:String = \"looping\";\n\tprivate var STATE_STOPPED:String = \"stopped\";\n\t\t\n\tprivate var currentChildrenKey = new Map<Layer, DisplayObjectKey>();\n\tprivate var createdChildren = new Map<DisplayObjectKey, Bool>();\n\tprivate var childPlayers = new Map<DisplayObjectKey, MoviePlayer>();\n\n\tprivate var labelsToFire = new Array<Label>();\n\tprivate var dirty:Bool = false;\n\tprivate var fullyGenerated:Bool = false;\n\n\tprivate var resolution:Float;\n\n\tpublic function new(symbol:MovieSymbol, movie:IFlumpMovie, resolution:Float){\n\t\tthis.symbol = symbol;\n\t\tthis.movie = movie;\n\t\tthis.resolution = resolution;\n\n\t\tfor(layer in symbol.layers){\n\t\t\tmovie.createLayer(layer);\n\t\t}\n\n\t\tstate = STATE_LOOPING;\n\t\tadvanceTime(0);\n\t}\n\n\n\tpublic function getDisplayKey(layerId:String, keyframeIndex:UInt = 0):DisplayObjectKey{\n\t\tvar layer = symbol.getLayer(layerId);\n\t\tif(layer == null) throw(\"Layer \" + layerId + \" does not exist.\");\n\t\tvar keyframe = layer.getKeyframeForFrame(keyframeIndex);\n\t\tif(keyframe == null) throw(\"Keyframe does not exist at index \" + keyframeIndex);\n\t\tcreateChildIfNessessary(keyframe);\n\t\treturn keyframe.displayKey;\n\t}\n\n\n\tprivate function reset(){\n\t\telapsed = 0;\n\t\tpreviousElapsed = 0;\n\t}\n\n\n\tprivate var position(get, null):Float = 0.0;\n\tpublic function get_position():Float{\n\t\treturn (elapsed % symbol.duration + symbol.duration) % symbol.duration;\n\t}\n\n\n\tpublic var totalFrames (get, null) :UInt;\n\tprivate function get_totalFrames(){\n\t\treturn symbol.totalFrames;\n\t}\n\n\n\tpublic function play(){\n\t\tsetState(STATE_PLAYING);\n\t\treturn this;\n\t}\n\n\n\tpublic function loop(){\n\t\tsetState(STATE_LOOPING);\n\t\treturn this;\n\t}\n\n\n\tpublic function stop(){\n\t\tsetState(STATE_STOPPED);\n\t\treturn this;\n\t}\n\n\n\tpublic function goToLabel(label:String){\n\t\tif(!labelExists(label)) throw(\"Symbol \" + symbol.name + \" does not have label \" + label + \".\" );\n\t\tcurrentFrame = getLabelFrame(label);\n\t\treturn this;\n\t}\n\n\n\tpublic function goToFrame(frame:Int){\n\t\tcurrentFrame = frame;\n\t\treturn this;\n\t}\n\n\n\tpublic function goToPosition(time:Float){\n\t\telapsed = time;\n\t\tpreviousElapsed = time;\n\t\tclearLabels();\n\t\tfireLabels();\n\t\treturn this;\n\t}\n\n\n\tpublic var playing(get, null):Bool;\n\tprivate function get_playing(){\n\t\treturn state == STATE_PLAYING;\n\t}\n\n\n\tpublic var looping(get, null):Bool;\n\tprivate function get_looping(){\n\t\treturn state == STATE_LOOPING;\n\t}\n\n\n\tpublic var stopped(get, null):Bool;\n\tprivate function get_stopped(){\n\t\treturn state == STATE_STOPPED;\n\t}\n\n\n\tpublic function getLabelFrame(label:String):UInt{\n\t\tif(!labelExists(label)) throw(\"Symbol \" + symbol.name + \" does not have label \" + label + \".\" );\n\t\treturn symbol.labels.get(label).keyframe.index;\n\t}\n\t\n\n\tpublic var currentFrame(get, set):Int;\n\tprivate function get_currentFrame():Int{\n\t\treturn Std.int(position / symbol.library.frameTime);\n\t}\n\tprivate function set_currentFrame(value:Int):Int{\n\t\tgoToPosition( symbol.library.frameTime * value);\n\t\treturn value;\n\t}\n\n\n\tpublic function labelExists(label:String):Bool{\n\t\treturn symbol.labels.exists(label);\n\t}\n\n\n\tpublic function advanceTime(ms:Float):Void{\n\t\tif(state != STATE_STOPPED){\n\t\t\telapsed += ms;\n\t\t\twhile(elapsed < 0){\n\t\t\t\telapsed += symbol.duration;\n\t\t\t\tpreviousElapsed += symbol.duration;\n\t\t\t}\n\t\t}\n\t\tadvanced += ms;\n\n\t\tif(state != STATE_STOPPED) fireLabels();\n\t\trender();\n\t}\n\n\n\tprivate function clearLabels(){\n\t\twhile(labelsToFire.length > 0) labelsToFire.pop();\n\t}\n\n\n\tprivate function fireLabels(){\n\t\tif(symbol.firstLabel == null) return;\n\t\tif(previousElapsed > elapsed) return;\n\t\t\n\t\t\n\t\tvar label:Label = previousElapsed <= elapsed\n\t\t\t? symbol.firstLabel\n\t\t\t: symbol.lastLabel;\n\t\t\n\t\tvar checking = true;\n\t\twhile(checking){\n\t\t\tif(label.keyframe.time > previousElapsed%symbol.duration){\n\t\t\t\tchecking = false;\n\t\t\t\t//trace(label.keyframe.index);\n\t\t\t\t//label = label.prev;\n\t\t\t}else if(label.next.keyframe.index <= label.keyframe.index){\n\t\t\t\tchecking = false;\n\t\t\t\tlabel = label.next;\n\t\t\t}else{\n\t\t\t\tlabel = label.next;\n\t\t\t}\n\t\t}\n\t\t\n\n\n\t\tvar firstChecked = label;\n\n\t\twhile(label != null){\n\t\t\tvar checkFrom = previousElapsed % symbol.duration;\n\t\t\tvar checkTo = elapsed % symbol.duration;\n\t\t\tif(label.keyframe.insideRangeStart(checkFrom, checkTo)){\n\t\t\t\tlabelsToFire.push(label);\n\t\t\t\t//trace(\"pushed: \" + label.keyframe.index + \" || \" + (checkFrom/symbol.library.frameTime) + \" : \" + (checkTo/symbol.library.frameTime));\n\t\t\t}\n\n\t\t\tlabel = label.next;\n\t\t\tif(label == firstChecked) label = null;\n\t\t}\n\t\t\n\n\t\twhile(labelsToFire.length > 0){\n\t\t\tmovie.labelPassed(labelsToFire.shift());\n\t\t}\n\n\t}\n\n\n\n\tprivate function render():Void{\n\t\tif(state == STATE_PLAYING){\n\t\t\tif(position < 0){\n\t\t\t\telapsed = 0;\n\t\t\t\tstop();\n\t\t\t\tmovie.onAnimationComplete();\n\t\t\t}else if(position >= symbol.duration - symbol.library.frameTime){\n\t\t\t\telapsed = symbol.duration - symbol.library.frameTime;\n\t\t\t\tstop();\n\t\t\t\tmovie.onAnimationComplete();\n\t\t\t}\n\t\t}\n\n\t\twhile(position < 0) position += symbol.duration;\n\t\t\n\t\tfor(layer in symbol.layers){\n\t\t\tvar keyframe = layer.getKeyframeForTime(position);\n\n\t\t\tif(keyframe.isEmpty == true){\n\t\t\t\tremoveChildIfNessessary(keyframe);\n\t\t\t}else if(keyframe.isEmpty == false){\n\t\t\t\tvar interped = getInterpolation(keyframe, position);\n\t\t\t\tvar next = keyframe.next;\n\t\t\t\tif(next.isEmpty) next = keyframe; // NASTY! FIX THIS!!\n\n\t\t\t\tmovie.renderFrame(\n\t\t\t\t\tkeyframe,\n\t\t\t\t\t(keyframe.location.x + (next.location.x - keyframe.location.x) * interped),\n\t\t\t\t\t(keyframe.location.y + (next.location.y - keyframe.location.y) * interped),\n\t\t\t\t\t(keyframe.scale.x + (next.scale.x - keyframe.scale.x) * interped),\n\t\t\t\t\t(keyframe.scale.y + (next.scale.y - keyframe.scale.y) * interped),\n\t\t\t\t\tkeyframe.skew.x + (next.skew.x - keyframe.skew.x) * interped,\n\t\t\t\t\tkeyframe.skew.y + (next.skew.y - keyframe.skew.y) * interped,\n\t\t\t\t\tkeyframe.alpha + (next.alpha - keyframe.alpha) * interped\n\t\t\t\t);\n\n\n\t\t\t\tif(currentChildrenKey.get(layer) != keyframe.displayKey){\n\t\t\t\t\tcreateChildIfNessessary(keyframe);\n\t\t\t\t\tremoveChildIfNessessary(keyframe);\n\t\t\t\t\taddChildIfNessessary(keyframe);\n\t\t\t\t}\n\n\t\t\t\tif(keyframe.symbol.is(MovieSymbol)){\n\t\t\t\t\tvar childMovie = movie.getChildPlayer(keyframe);\n\n\t\t\t\t\tif(childMovie.independantTimeline){\n\t\t\t\t\t\tchildMovie.advanceTime(advanced);\n\t\t\t\t\t\tchildMovie.render();\n\t\t\t\t\t}else{\n\t\t\t\t\t\tchildMovie.elapsed = position;\n\t\t\t\t\t\tchildMovie.render();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tadvanced = 0;\n\t\tpreviousElapsed = elapsed;\n\t}\n\n\n\tprivate function createChildIfNessessary(keyframe:Keyframe){\n\t\tif(keyframe.isEmpty) return;\n\t\tif(createdChildren.exists(keyframe.displayKey) == false){\n\t\t\tmovie.createFlumpChild(keyframe.displayKey);\n\t\t\tcreatedChildren[keyframe.displayKey] = true;\n\t\t}\n\t}\n\n\n\tprivate function removeChildIfNessessary(keyframe:Keyframe){\n\t\tif(currentChildrenKey.exists(keyframe.layer)){\n\t\t\tmovie.removeFlumpChild(keyframe.layer, keyframe.displayKey);\n\t\t\tcurrentChildrenKey.remove(keyframe.layer);\n\t\t}\n\t}\n\n\n\tprivate function addChildIfNessessary(keyframe:Keyframe){\n\t\tif(keyframe.isEmpty) return;\n\t\tcurrentChildrenKey[keyframe.layer] = keyframe.displayKey;\n\t\tmovie.addFlumpChild(keyframe.layer, keyframe.displayKey);\n\t}\n\n\n\t\n\t//////////////////////////////////////////////////////////////\n\t//\n\t//  Utilities\n\t//\n\t//////////////////////////////////////////////////////////////\n\n\tprivate function setState(state:String){\n\t\tthis.state = state;\n\n\t\tfor(layer in symbol.layers){\n\t\t\tvar keyframe = layer.getKeyframeForTime(position);\n\t\t\tcreateChildIfNessessary(keyframe);\n\n\t\t\tif(keyframe.symbol.is(MovieSymbol)){\n\t\t\t\tvar childMovie = movie.getChildPlayer(keyframe);\n\t\t\t\tif(childMovie.independantControl == false){\n\t\t\t\t\tchildMovie.setState(state);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tadvanceTime(0);\n\t}\n\n\n\tprivate function timeForLabel(label:String):Float{\n\t\treturn symbol.labels[label].keyframe.time;\n\t}\n\n\n\tprivate function getInterpolation(keyframe:Keyframe, time:Float){\n\t\tif(keyframe.tweened == false) return 0.0;\n\t\t\n\t\tvar interped = (time - keyframe.time) / keyframe.duration;\n\t\tvar ease:Float = keyframe.ease;\n\t\tif (ease != 0) {\n\t\t\tvar t :Float;\n\t\t\tif (ease < 0) {\n\t\t\t\t// Ease in\n\t\t\t\tvar inv:Float = 1 - interped;\n\t\t\t\tt = 1 - inv * inv;\n\t\t\t\tease = -ease;\n\t\t\t} else {\n\t\t\t\t// Ease out\n\t\t\t\tt = interped * interped;\n\t\t\t}\n\t\t\tinterped = ease * t + (1 - ease) * interped;\n\t\t}\n\t\treturn interped;\n\t}\n\n\n}\n\n","package flump.json;\n\ntypedef FlumpJSON = {\n\tvar md5:String;\n\tvar movies:Array<MovieSpec>;\n\tvar textureGroups:Array<TextureGroupSpec>;\n\tvar frameRate: UInt;\n}\n\n\nabstract FlumpPointSpec(Array<Float>){\n\n\tpublic var x(get, never):Float;\n\tpublic var y(get, never):Float;\n\n\tinline public function get_x():Float{\n\t\treturn this[0];\n\t}\n\n\tinline public function get_y():Float{\n\t\treturn this[1];\n\t}\n}\n\n\nabstract FlumpRectSpec(Array<Float>){\n\n\tpublic var x(get, never):Float;\n\tpublic var y(get, never):Float;\n\tpublic var width(get, never):Float;\n\tpublic var height(get, never):Float;\n\n\tinline public function get_x():Float{\n\t\treturn this[0];\n\t}\n\n\tinline public function get_y():Float{\n\t\treturn this[1];\n\t}\n\n\tinline public function get_width():Float{\n\t\treturn this[2];\n\t}\n\n\tinline public function get_height():Float{\n\t\treturn this[3];\n\t}\n}\n\ntypedef MovieSpec = {\n\tvar layers:Array<LayerSpec>;\n\tvar id:ReferenceSpec;\n}\n\ntypedef ReferenceSpec = String;\n\ntypedef KeyframeSpec = {\n\tvar pivot:FlumpPointSpec;\n\tvar duration:UInt;\n\tvar loc:FlumpPointSpec;\n\tvar index:UInt;\n\tvar ref:ReferenceSpec;\n\tvar scale:FlumpPointSpec;\n\tvar skew:FlumpPointSpec;\n\tvar ease:Float;\n\tvar tweened:Bool;\n\tvar label:String;\n\tvar alpha:Float;\n}\n\n\ntypedef TextureSpec = {\n\tvar symbol:ReferenceSpec;\n\tvar rect:FlumpRectSpec;\n\tvar origin:FlumpPointSpec;\n}\n\n\ntypedef TextureGroupSpec = {\n\tvar atlases:Array<AtlasSpec>;\n\tvar scaleFactor:UInt;\n}\n\n\ntypedef AtlasSpec = {\n\tvar file:String;\n\tvar textures:Array<TextureSpec>;\n}\n\n\ntypedef LayerSpec = {\n\tvar name:String;\n\tvar keyframes:Array<KeyframeSpec>;\n}\n\n\n\n","package flump.library;\n\nimport flump.DisplayObjectKey;\nimport flump.json.FlumpJSON;\nimport flump.library.Label;\nusing Lambda;\n\n\nclass FlumpLibrary{\n\n\tpublic var movies = new Map<String, MovieSymbol>();\n\tpublic var sprites = new Map<String, SpriteSymbol>();\n\tpublic var atlases = new Array<AtlasSpec>();\n\tpublic var framerate:Float;\n\tpublic var frameTime:Float;\n\tpublic var md5:String;\n\tpublic var resolution:Float;\n\n\n\tfunction new(resolution:Float){\n\t\tthis.resolution = resolution;\n\t}\n\n\n\tpublic static function create(flumpData:Dynamic, resolution:Float):FlumpLibrary{\n\t\tvar lib:FlumpJSON = cast flumpData;\n\t\t\n\t\tvar spriteSymbols = new Map<String, SpriteSymbol>();\n\t\tvar movieSymbols = new Map<String, MovieSymbol>();\n\n\t\tvar flumpLibrary = new FlumpLibrary(resolution);\n\t\tflumpLibrary.sprites = spriteSymbols;\n\t\tflumpLibrary.movies = movieSymbols;\n\t\tflumpLibrary.framerate = lib.frameRate;\n\t\tflumpLibrary.frameTime = 1000/flumpLibrary.framerate;\t\t\n\t\tflumpLibrary.md5 = lib.md5;\n\n\t\tvar atlasSpecs = new Array<flump.json.FlumpJSON.AtlasSpec>();\n\t\tvar textureGroup = null;\n\n\t\t// Find best suited resolution from available textures\n\t\tfor(tg in lib.textureGroups){\n\t\t\tif(tg.scaleFactor >= resolution && textureGroup == null) textureGroup = tg;\n\t\t}\n\t\tif(textureGroup == null) textureGroup =  lib.textureGroups[lib.textureGroups.length-1];\n\n\n\t\tfor(atlas in textureGroup.atlases){\n\t\t\tflumpLibrary.atlases.push(atlas);\n\t\t\tatlasSpecs.push(atlas);\n\t\t}\n\n\n\t\tfor(spec in atlasSpecs){\t\t\t\n\t\t\tfor(textureSpec in spec.textures){\n\t\t\t\tvar frame = new Rectangle(textureSpec.rect.x, textureSpec.rect.y, textureSpec.rect.width, textureSpec.rect.height);\n\t\t\t\tvar origin = new Point(textureSpec.origin.x, textureSpec.origin.y);\n\t\t\t\n\t\t\t\tvar symbol = new SpriteSymbol();\n\t\t\t\tsymbol.name = textureSpec.symbol;\n\t\t\t\tsymbol.origin = origin;\n\t\t\t\tsymbol.texture = textureSpec.symbol;\n\t\t\t\tspriteSymbols[symbol.name] = symbol;\n\t\t\t}\n\t\t}\n\n\t\tvar pendingSymbolAttachments = new Map<Keyframe, String>();\n\t\tfor(movieSpec in lib.movies){\n\t\t\tvar symbol = new MovieSymbol();\n\t\t\tsymbol.name = movieSpec.id;\n\t\t\tsymbol.library = flumpLibrary;\n\t\t\tfor(layerSpec in movieSpec.layers){\n\t\t\t\tvar layer = new Layer(layerSpec.name);\n\t\t\t\tlayer.movie = symbol;\n\t\t\t\tvar layerDuration:Float = 0;\n\t\t\t\tvar previousKeyframe:Keyframe = null;\n\t\t\t\tfor(keyframeSpec in layerSpec.keyframes){\n\t\t\t\t\tvar keyframe = new Keyframe();\n\t\t\t\t\tkeyframe.prev = previousKeyframe;\n\t\t\t\t\tif(previousKeyframe != null) previousKeyframe.next = keyframe;\n\t\t\t\t\tkeyframe.layer = layer;\n\t\t\t\t\tkeyframe.numFrames = keyframeSpec.duration;\n\t\t\t\t\tkeyframe.duration = keyframeSpec.duration * flumpLibrary.frameTime;\n\t\t\t\t\tkeyframe.index = keyframeSpec.index;\n\n\t\t\t\t\tvar time = keyframe.index * flumpLibrary.frameTime;\n\t\t\t\t\ttime *= 10;\n\t\t\t\t\ttime = Math.floor(time);\n\t\t\t\t\ttime /= 10;\n\t\t\t\t\tkeyframe.time = time;\n\t\t\t\t\t\n\t\t\t\t\tif(keyframeSpec.ref == null){\n\t\t\t\t\t\tkeyframe.isEmpty = true;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tkeyframe.isEmpty = false;\n\t\t\t\t\t\tkeyframe.symbolId = keyframeSpec.ref;\n\t\t\t\t\t\tkeyframe.pivot = keyframeSpec.pivot == null ? new Point(0,0) : new Point( keyframeSpec.pivot.x * resolution, keyframeSpec.pivot.y * resolution);\n\t\t\t\t\t\tkeyframe.location = keyframeSpec.loc == null ? new Point(0,0) : new Point( keyframeSpec.loc.x * resolution, keyframeSpec.loc.y * resolution);\n\t\t\t\t\t\tkeyframe.tweened = keyframeSpec.tweened == false ? false : true;\n\t\t\t\t\t\tkeyframe.symbol = null;\n\t\t\t\t\t\tkeyframe.scale = keyframeSpec.scale == null ? new Point(1,1) : new Point(keyframeSpec.scale.x, keyframeSpec.scale.y);\n\t\t\t\t\t\tkeyframe.skew = keyframeSpec.skew == null ? new Point(0,0) : new Point(keyframeSpec.skew.x, keyframeSpec.skew.y);\n\t\t\t\t\t\tkeyframe.alpha = keyframeSpec.alpha == null ? 1 : keyframeSpec.alpha;\n\t\t\t\t\t\tkeyframe.ease = keyframeSpec.ease == null ? 0 : keyframeSpec.ease;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(layer.keyframes.length == 0) layer.firstKeyframe = keyframe;\n\n\t\t\t\t\tif(keyframeSpec.label != null){\n\t\t\t\t\t\tkeyframe.label = new Label();\n\t\t\t\t\t\tkeyframe.label.keyframe = keyframe;\n\t\t\t\t\t\tkeyframe.label.name = keyframeSpec.label;\n\t\t\t\t\t\tsymbol.labels.set(keyframe.label.name, keyframe.label);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(keyframe.time + keyframe.duration > layer.duration){\n\t\t\t\t\t\tlayerDuration = keyframe.time + keyframe.duration;\n\t\t\t\t\t}\n\n\t\t\t\t\tpendingSymbolAttachments[keyframe] = keyframeSpec.ref;\n\t\t\t\t\tlayer.keyframes.push(keyframe);\n\t\t\t\t\tpreviousKeyframe = keyframe;\n\t\t\t\t}\n\n\t\t\t\tlayer.lastKeyframe = layer.keyframes[layer.keyframes.length - 1];\n\t\t\t\tlayer.keyframes[0].prev = layer.lastKeyframe;\n\t\t\t\tlayer.lastKeyframe.next = layer.keyframes[0];\n\t\t\t\tsymbol.layers.push(layer);\n\n\t\t\t\tvar allAreEmpty = layer.keyframes.foreach(function(keyframe) return keyframe.isEmpty);\n\n\t\t\t\tif(allAreEmpty){\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tfor(keyframe in layer.keyframes){\n\t\t\t\t\t\tvar hasNonEmptySibling = layer.keyframes.exists(function(checkedKeyframe) return checkedKeyframe.isEmpty == false && checkedKeyframe != keyframe);\n\t\t\t\t\t\tif(hasNonEmptySibling){\n\t\t\t\t\t\t\tvar checked = keyframe.prev;\n\t\t\t\t\t\t\twhile(checked.isEmpty) checked = checked.prev;\n\t\t\t\t\t\t\tkeyframe.prevNonEmptyKeyframe = checked;\n\n\t\t\t\t\t\t\tchecked = keyframe.next;\n\t\t\t\t\t\t\twhile(checked.isEmpty) checked = checked.next;\n\t\t\t\t\t\t\tkeyframe.nextNonEmptyKeyframe = checked;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tkeyframe.prevNonEmptyKeyframe = keyframe;\n\t\t\t\t\t\t\tkeyframe.nextNonEmptyKeyframe = keyframe;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Set up diplay keys\n\t\t\t\t\tvar firstNonEmpty = layer.keyframes.find(function(checkedKeyframe) return checkedKeyframe.isEmpty == false);\n\t\t\t\t\tif(firstNonEmpty != null) firstNonEmpty.displayKey = new DisplayObjectKey(firstNonEmpty.symbolId);\n\t\t\t\t\tvar checked = firstNonEmpty.nextNonEmptyKeyframe;\n\t\t\t\t\twhile(checked != firstNonEmpty){\n\t\t\t\t\t\tif(checked.symbolId == checked.prevNonEmptyKeyframe.symbolId) checked.displayKey = checked.prevNonEmptyKeyframe.displayKey;\n\t\t\t\t\t\telse checked.displayKey = new DisplayObjectKey(checked.symbolId);\n\t\t\t\t\t\tchecked = checked.nextNonEmptyKeyframe;\n\t\t\t\t\t}\n\t\t\t\t}\t\t\n\t\t\t}\n\n\t\t\tfunction getHighestFrameNumber(layer:Layer, accum:UInt){\n\t\t\t\tvar layerLength = layer.lastKeyframe.index + layer.lastKeyframe.numFrames;\n\t\t\t\treturn layerLength > accum\n\t\t\t\t\t? layerLength\n\t\t\t\t\t: accum;\n\t\t\t}\n\n\t\t\tsymbol.totalFrames = symbol.layers.fold( getHighestFrameNumber, 0 );\n\t\t\tsymbol.duration = symbol.totalFrames * flumpLibrary.frameTime;\n\n\t\t\tvar labels = new Array<Label>();\n\t\t\tfor(layer in symbol.layers){\n\t\t\t\tfor(keyframe in layer.keyframes){\n\t\t\t\t\tif(keyframe.label != null){\n\t\t\t\t\t\tlabels.push(keyframe.label);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\thaxe.ds.ArraySort.sort(labels, sortLabel);\n\t\t\tfor(i in 0...labels.length){\n\t\t\t\tvar nextIndex = i+1;\n\t\t\t\tif(nextIndex >= labels.length) nextIndex = 0;\n\n\t\t\t\tvar label = labels[i];\n\t\t\t\tvar nextLabel = labels[nextIndex];\n\t\t\t\tlabel.next = nextLabel;\n\t\t\t\tnextLabel.prev = label;\n\t\t\t}\n\t\t\tsymbol.firstLabel = labels[0];\n\t\t\tsymbol.lastLabel = labels[labels.length-1];\n\t\t\t\n\t\t\tmovieSymbols[symbol.name] = symbol;\t\t\t\n\t\t}\n\n\t\tfor(keyframe in pendingSymbolAttachments.keys()){\n\t\t\tvar symbolId = pendingSymbolAttachments[keyframe];\n\t\t\tkeyframe.symbol = spriteSymbols[symbolId] != null ? spriteSymbols[symbolId] : movieSymbols[symbolId];\n\t\t}\n\n\t\treturn flumpLibrary;\n\t}\n\n\n\tprivate static function sortLabel(a:Label, b:Label):Int{\n\t\tif(a.keyframe.index < b.keyframe.index) return -1;\n\t\telse if(a.keyframe.index > b.keyframe.index) return 1;\n\t\treturn 0;\n\t}\n\n\n\n}","package flump.library;\n\n\nclass Keyframe{\n\n\tpublic var layer:Layer;\n\tpublic var symbolId:String;\n\tpublic var pivot:Point;\n\t\n\tpublic var location:Point;\n\tpublic var tweened:Bool;\n\n\tpublic var index:UInt;\n\tpublic var numFrames:UInt;\n\n\tpublic var time:Float;\n\tpublic var duration:Float;\n\t\n\tpublic var symbol:Symbol;\n\tpublic var scale:Point;\n\tpublic var skew:Point;\n\tpublic var ease:Float;\n\tpublic var label:Label;\n\tpublic var isEmpty:Bool;\n\tpublic var alpha:Float;\n\t\n\tpublic var next:Keyframe;\n\tpublic var prev:Keyframe;\n\tpublic var nextNonEmptyKeyframe:Keyframe;\n\tpublic var prevNonEmptyKeyframe:Keyframe;\n\tpublic var displayKey:DisplayObjectKey;\n\n\tpublic function new(){}\n\n\t// Does the time fall inside of the the keyframe frames\n\tpublic function timeInside(time:Float):Bool{\n\t\treturn (this.time <= time) && (this.time + duration) > time;\n\t}\n\n\t// Does the range fit inside of the keyframe frames\n\tpublic function rangeInside(from:Float, to:Float):Bool{\n\t\treturn timeInside(from) && timeInside(to);\n\t}\n\n\t// Does the range intersect with the keyframe frames\n\tpublic function rangeIntersect(from:Float, to:Float):Bool{\n\t\treturn timeInside(from) || timeInside(to);\n\t}\n\n\t// Does the start of the keyframe frames fall inside the range. (Checks for a range that wraps around)\n\tpublic function insideRangeStart(from:Float, to:Float):Bool{\n\t\tif(from == to && to == time) return true;\n\t\treturn from <= to \n\t\t\t? time > from && time <= to\n\t\t\t: time > from || time <= to;\n\t}\n\n\t// Does the end of the keyframe frames fall inside the range. (Checks for a range that wraps around, and assuming backward playback);\n\tpublic function insideRangeEnd(from:Float, to:Float):Bool{\n\t\tif(from == to && to == time + duration) return true;\n\t\treturn from > to\n\t\t\t? to <= time + duration && from > time + duration\n\t\t\t: to <= time + duration || from > time + duration;\n\t}\n\n}\n\n","package flump.library;\n\nclass Label{\n\n\tpublic var name:String;\n\tpublic var keyframe:Keyframe;\n\tpublic var next:Label;\n\tpublic var prev:Label;\n\n\tpublic static var LABEL_ENTER:String = \"labelEnter\";\n\tpublic static var LABEL_EXIT:String = \"labelExit\";\n\tpublic static var LABEL_UPDATE:String = \"labelUpdate\";\n\n\tpublic function new(){}\n\n}","package flump.library;\n\nclass Layer{\n\n\tpublic var keyframes = new Array<Keyframe>();\n\tpublic var duration:Float;\n\tpublic var name:String;\n\tpublic var movie:MovieSymbol;\n\tpublic var numFrames:UInt;\n\n\tpublic var firstKeyframe:Keyframe;\n\tpublic var lastKeyframe:Keyframe;\n\n\n\tpublic function new(name:String){\n\t\tthis.name = name;\n\t}\n\n\n\tpublic function getKeyframeForFrame(index:UInt):Keyframe{\n\t\tfor(keyframe in keyframes) if(keyframe.index == index) return keyframe;\n\t\treturn null;\n\t}\n\n\n\tpublic function getKeyframeForTime(time:Float){\n\t\tvar keyframe = lastKeyframe;\n\t\twhile(keyframe.time > time % movie.duration) keyframe = keyframe.prev;\n\t\treturn keyframe;\n\t}\n\n}","package flump.library;\n\n\nclass Symbol{\n\n\tpublic var name:String;\n\t\n\tpublic function new(){}\n\n}","package flump.library;\n\nimport flump.library.FlumpLibrary;\n\n\nclass MovieSymbol extends Symbol{\n\n\tpublic var layers = new Array<Layer>();\n\tpublic var labels = new Map<String, Label>();\n\tpublic var library:FlumpLibrary;\n\n\tpublic var duration:Float;\n\tpublic var totalFrames:UInt;\n\tpublic var firstLabel:Label;\n\tpublic var lastLabel:Label;\n\n\n\tpublic function new(){\n\t\tsuper();\n\t}\n\n\n\tpublic function getLayer(name:String):Layer{\n\t\tfor(layer in layers) if(layer.name == name) return layer;\n\t\treturn null;\n\t}\n\n\n\tpublic function debug(){\n\t\tvar largestLayerChars = Lambda.fold(layers, function(layer, result) return layer.name.length > result ? layer.name.length : result, 0);\n\n\t\tfunction repeat(character, amount){\n\t\t\tvar output = \"\";\n\t\t\twhile(amount > 0){\n\t\t\t\toutput += character;\n\t\t\t\tamount--;\n\t\t\t}\n\t\t\treturn output;\n\t\t}\n\n\t\t//◙◉◉◉◙◙○◌◌◌◙▸▸▸◙○◌◌\n\t\tvar output = \"asdfsadf\\n\";\n\n\t\toutput += repeat(\" \", largestLayerChars);\t\n\t\toutput += \"   \";\n\t\tfor(i in 0...totalFrames){\n\t\t\tif(i%5 == 0) output += i;\n\t\t\telse{\n\t\t\t\tif(i % 6 != 0 || i < 10) output += \" \";\n\t\t\t}\n\t\t}\n\t\toutput += \"\\n\";\n\n\t\toutput += repeat(\" \", largestLayerChars);\t\n\t\toutput += \"   \";\n\t\tfor(i in 0...totalFrames){\n\t\t\tif(i%5 == 0) output += \"▽\";\n\t\t\telse output += \" \";\n\t\t}\n\t\toutput += \"\\n\";\n\n\n\t\tfor(i in 0...layers.length){\n\t\t\tvar layer = layers[i];\n\n\t\t\toutput += layer.name + repeat(\" \", largestLayerChars-layer.name.length); \n\t\t\toutput += \" : \";\n\t\t\tfor(keyframe in layer.keyframes){\n\t\t\t\tif(keyframe.symbolId != null){\n\t\t\t\t\toutput += \"◙\";\n\t\t\t\t\tif(keyframe.tweened) output += repeat(\"▸\", keyframe.numFrames-1);\n\t\t\t\t\telse output += repeat(\"◉\", keyframe.numFrames-1) ;\n\t\t\t\t}else{\n\t\t\t\t\toutput += \"○\";\n\t\t\t\t\toutput += repeat(\"◌\", keyframe.numFrames-1);\n\t\t\t\t}\n\t\t\t}\n\t\t\toutput += '\\n';\n\t\t}\n\n\t\treturn output;\n\n\t}\n\n}","package flump.library;\n\nclass Point{\n\n\tpublic var x:Float;\n\tpublic var y:Float;\n\n\n\tpublic function new(x:Float, y:Float){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t}\n\n}","package flump.library;\n\nclass Rectangle{\n\n\tpublic var x:Float;\n\tpublic var y:Float;\n\tpublic var width:Float;\n\tpublic var height:Float;\n\n\n\tpublic function new(x:Float, y:Float, width:Float, height:Float){\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t}\n\n}","package flump.library;\n\nclass SpriteSymbol extends Symbol{\n\n\tpublic var texture:String;\n\tpublic var origin:Point;\n\n\n\tpublic function new(){\n\t\tsuper();\n\t}\n\n}","/*\n * Copyright (C)2005-2013 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe;\n\n/**\n\tThe Timer class allows you to create asynchronous timers on platforms that\n\tsupport events.\n\n\tThe intended usage is to create an instance of the Timer class with a given\n\tinterval, set its run() method to a custom function to be invoked and\n\teventually call stop() to stop the Timer.\n\n\tNote that a running Timer may or may not prevent the program to exit\n\tautomatically when main() returns.\n\n\tIt is also possible to extend this class and override its run() method in\n\tthe child class.\n**/\nclass Timer {\n\t#if (flash || js || java || python)\n\n\t#if (flash || js)\n\t\tprivate var id : Null<Int>;\n\t#elseif java\n\t\tprivate var timer : java.util.Timer;\n\t\tprivate var task : java.util.TimerTask;\n\t#end\n\n\t/**\n\t\tCreates a new timer that will run every `time_ms` milliseconds.\n\n\t\tAfter creating the Timer instance, it calls `this].run` repeatedly,\n\t\twith delays of `time_ms` milliseconds, until `this.stop` is called.\n\n\t\tThe first invocation occurs after `time_ms` milliseconds, not\n\t\timmediately.\n\n\t\tThe accuracy of this may be platform-dependent.\n\t**/\n\tpublic function new( time_ms : Int ){\n\t\t#if flash\n\t\t\tvar me = this;\n\t\t\tid = untyped __global__[\"flash.utils.setInterval\"](function() { me.run(); },time_ms);\n\t\t#elseif js\n\t\t\tvar me = this;\n\t\t\tid = untyped setInterval(function() me.run(),time_ms);\n\t\t#elseif java\n\t\t\ttimer = new java.util.Timer();\n\t\t\ttimer.scheduleAtFixedRate(task = new TimerTask(this), haxe.Int64.ofInt(time_ms), haxe.Int64.ofInt(time_ms));\n\t\t#end\n\t}\n\n\t/**\n\t\tStops `this` Timer.\n\n\t\tAfter calling this method, no additional invocations of `this.run`\n\t\twill occur.\n\n\t\tIt is not possible to restart `this` Timer once stopped.\n\t**/\n\tpublic function stop() {\n\t\t#if (flash || js)\n\t\t\tif( id == null )\n\t\t\t\treturn;\n\t\t\t#if flash\n\t\t\t\tuntyped __global__[\"flash.utils.clearInterval\"](id);\n\t\t\t#elseif js\n\t\t\t\tuntyped clearInterval(id);\n\t\t\t#end\n\t\t\tid = null;\n\t\t#elseif java\n\t\t\ttimer.cancel();\n\t\t\ttimer = null;\n\t\t\ttask = null;\n\t\t#end\n\t}\n\n\t/**\n\t\tThis method is invoked repeatedly on `this` Timer.\n\n\t\tIt can be overridden in a subclass, or rebound directly to a custom\n\t\tfunction:\n\t\t\tvar timer = new haxe.Timer(1000); // 1000ms delay\n\t\t\ttimer.run = function() { ... }\n\n\t\tOnce bound, it can still be rebound to different functions until `this`\n\t\tTimer is stopped through a call to `this.stop`.\n\t**/\n\tpublic dynamic function run() {\n\n\t}\n\n\t/**\n\t\tInvokes `f` after `time_ms` milliseconds.\n\n\t\tThis is a convenience function for creating a new Timer instance with\n\t\t`time_ms` as argument, binding its run() method to `f` and then stopping\n\t\t`this` Timer upon the first invocation.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function delay( f : Void -> Void, time_ms : Int ) {\n\t\tvar t = new haxe.Timer(time_ms);\n\t\tt.run = function() {\n\t\t\tt.stop();\n\t\t\tf();\n\t\t};\n\t\treturn t;\n\t}\n\n\t#end\n\n\t/**\n\t\tMeasures the time it takes to execute `f`, in seconds with fractions.\n\n\t\tThis is a convenience function for calculating the difference between\n\t\tTimer.stamp() before and after the invocation of `f`.\n\n\t\tThe difference is passed as argument to Log.trace(), with \"s\" appended\n\t\tto denote the unit. The optional `pos` argument is passed through.\n\n\t\tIf `f` is null, the result is unspecified.\n\t**/\n\tpublic static function measure<T>( f : Void -> T, ?pos : PosInfos ) : T {\n\t\tvar t0 = stamp();\n\t\tvar r = f();\n\t\tLog.trace((stamp() - t0) + \"s\", pos);\n\t\treturn r;\n\t}\n\n\t/**\n\t\tReturns a timestamp, in seconds with fractions.\n\n\t\tThe value itself might differ depending on platforms, only differences\n\t\tbetween two values make sense.\n\t**/\n\tpublic static function stamp() : Float {\n\t\t#if flash\n\t\t\treturn flash.Lib.getTimer() / 1000;\n\t\t#elseif (neko || php)\n\t\t\treturn Sys.time();\n\t\t#elseif js\n\t\t\treturn Date.now().getTime() / 1000;\n\t\t#elseif cpp\n\t\t\treturn untyped __global__.__time_stamp();\n\t\t#elseif sys\n\t\t\treturn Sys.time();\n\t\t#else\n\t\t\treturn 0;\n\t\t#end\n\t}\n\n}\n\n#if java\n@:nativeGen\nprivate class TimerTask extends java.util.TimerTask {\n\tvar timer:Timer;\n\tpublic function new(timer:Timer):Void {\n\t\tsuper();\n\t\tthis.timer = timer;\n\t}\n\n\t@:overload override public function run():Void {\n\t\ttimer.run();\n\t}\n}\n#end\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe.ds;\n\n/**\n\tArraySort provides a stable implementation of merge sort through its `sort`\n\tmethod. It should be used instead of `Array.sort` in cases where the order\n\tof equal elements has to be retained on all targets.\n**/\nclass ArraySort {\n\n\t/**\n\t\tSorts Array `a` according to the comparison function `cmp`, where\n\t\t`cmp(x,y)` returns 0 if `x == y`, a positive Int if `x > y` and a\n\t\tnegative Int if `x < y`.\n\n\t\tThis operation modifies Array `a` in place.\n\n\t\tThis operation is stable: The order of equal elements is preserved.\n\n\t\tIf `a` or `cmp` are null, the result is unspecified.\n\t**/\n\tstatic public function sort<T>(a:Array<T>, cmp:T -> T -> Int) {\n\t\trec(a, cmp, 0, a.length);\n\t}\n\n\tstatic function rec<T>(a:Array<T>, cmp, from, to) {\n\t\tvar middle = (from + to) >> 1;\n\t\tif (to - from < 12) {\n\t\t\tif (to <= from) return;\n\t\t\tfor (i in (from + 1)...to) {\n\t\t\t\tvar j = i;\n\t\t\t\twhile (j > from) {\n\t\t\t\t\tif (compare(a, cmp, j, j - 1) < 0)\n\t\t\t\t\t\tswap(a, j - 1, j);\n\t\t\t\t\telse\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tj--;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\trec(a, cmp, from, middle);\n\t\trec(a, cmp, middle, to);\n\t\tdoMerge(a, cmp, from, middle, to, middle - from, to - middle);\n\t}\n\n\tstatic function doMerge<T>(a:Array<T>, cmp, from, pivot, to, len1, len2) {\n\t\tvar first_cut, second_cut, len11, len22, new_mid;\n\t\tif (len1 == 0 || len2 == 0)\n\t\t\treturn;\n\t\tif (len1 + len2 == 2) {\n\t\t\tif (compare(a, cmp, pivot, from) < 0)\n\t\t\t\tswap(a, pivot, from);\n\t\t\treturn;\n\t\t}\n\t\tif (len1 > len2) {\n\t\t\tlen11 = len1 >> 1;\n\t\t\tfirst_cut = from + len11;\n\t\t\tsecond_cut = lower(a, cmp, pivot, to, first_cut);\n\t\t\tlen22 = second_cut - pivot;\n\t\t} else {\n\t\t\tlen22 = len2 >> 1;\n\t\t\tsecond_cut = pivot + len22;\n\t\t\tfirst_cut = upper(a, cmp, from, pivot, second_cut);\n\t\t\tlen11 = first_cut - from;\n\t\t}\n\t\trotate(a, cmp, first_cut, pivot, second_cut);\n\t\tnew_mid = first_cut + len22;\n\t\tdoMerge(a, cmp, from, first_cut, new_mid, len11, len22);\n\t\tdoMerge(a, cmp, new_mid, second_cut, to, len1 - len11, len2 - len22);\n\t}\n\n\tstatic function rotate<T>(a:Array<T>, cmp, from, mid, to) {\n\t\tvar n;\n\t\tif (from == mid || mid == to) return;\n\t\tn = gcd(to - from, mid - from);\n\t\twhile (n-- != 0) {\n\t\t\tvar val = a[from + n];\n\t\t\tvar shift = mid - from;\n\t\t\tvar p1 = from + n, p2 = from + n + shift;\n\t\t\twhile (p2 != from + n) {\n\t\t\t\ta[p1] = a[p2];\n\t\t\t\tp1 = p2;\n\t\t\t\tif (to - p2 > shift) p2 += shift;\n\t\t\t\telse p2 = from + (shift - (to - p2));\n\t\t\t}\n\t\t\ta[p1] = val;\n\t\t}\n\t}\n\n\tstatic function gcd(m, n) {\n\t\twhile (n != 0) {\n\t\t\tvar t = m % n;\n\t\t\tm = n;\n\t\t\tn = t;\n\t\t}\n\t\treturn m;\n\t}\n\n\tstatic function upper<T>(a:Array<T>, cmp, from, to, val) {\n\t\tvar len = to - from, half, mid;\n\t\twhile (len > 0) {\n\t\t\thalf = len >> 1;\n\t\t\tmid = from + half;\n\t\t\tif (compare(a, cmp, val, mid) < 0)\n\t\t\t\tlen = half;\n\t\t\telse {\n\t\t\t\tfrom = mid + 1;\n\t\t\t\tlen = len - half - 1;\n\t\t\t}\n\t\t}\n\t\treturn from;\n\t}\n\n\tstatic function lower<T>(a:Array<T>, cmp, from, to, val) {\n\t\tvar len = to - from, half, mid;\n\t\twhile (len > 0) {\n\t\t\thalf = len >> 1;\n\t\t\tmid = from + half;\n\t\t\tif (compare(a, cmp, mid, val) < 0) {\n\t\t\t\tfrom = mid + 1;\n\t\t\t\tlen = len - half - 1;\n\t\t\t} else\n\t\t\t\tlen = half;\n\t\t}\n\t\treturn from;\n\t}\n\n\tstatic function swap<T>(a:Array<T>, i, j) {\n\t\tvar tmp = a[i];\n\t\ta[i] = a[j];\n\t\ta[j] = tmp;\n\t}\n\n\tstatic inline function compare<T>(a:Array<T>, cmp, i, j) {\n\t\treturn cmp(a[i], a[j]);\n\t}\n}","/*\n * Copyright (C)2005-2013 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of h software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and h permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\n\npackage haxe.ds;\n\n@:coreApi\nclass ObjectMap<K:{ }, V> implements haxe.Constraints.IMap<K,V> {\n\n\tstatic var count = 0;\n\n\tstatic inline function assignId(obj: { } ):Int {\n\t\treturn untyped obj.__id__ = ++count;\n\t}\n\n\tstatic inline function getId(obj: { } ):Int {\n\t\treturn untyped obj.__id__;\n\t}\n\n\tvar h : { };\n\n\tpublic function new() : Void {\n\t\th = { };\n\t\tuntyped h.__keys__ = { };\n\t}\n\n\tpublic function set(key:K, value:V):Void untyped {\n\t\tvar id : Int = untyped key.__id__ || assignId(key);\n\t\th[id] = value;\n\t\th.__keys__[id] = key;\n\t}\n\n\tpublic inline function get(key:K):Null<V> {\n\t\treturn untyped h[getId(key)];\n\t}\n\n\tpublic inline function exists(key:K):Bool {\n\t\treturn untyped h.__keys__[getId(key)] != null;\n\t}\n\n\tpublic function remove( key : K ) : Bool {\n\t\tvar id = getId(key);\n\t\tif ( untyped h.__keys__[id] == null ) return false;\n\t\tuntyped  __js__(\"delete\")(h[id]);\n\t\tuntyped  __js__(\"delete\")(h.__keys__[id]);\n\t\treturn true;\n\t}\n\n\tpublic function keys() : Iterator<K> {\n\t\tvar a = [];\n\t\tuntyped {\n\t\t\t__js__(\"for( var key in this.h.__keys__ ) {\");\n\t\t\t\tif( h.hasOwnProperty(key) )\n\t\t\t\t\ta.push(h.__keys__[key]);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn a.iterator();\n\t}\n\n\tpublic function iterator() : Iterator<V> {\n\t\treturn untyped {\n\t\t\tref : h,\n\t\t\tit : keys(),\n\t\t\thasNext : function() { return __this__.it.hasNext(); },\n\t\t\tnext : function() { var i = __this__.it.next(); return __this__.ref[getId(i)]; }\n\t\t};\n\t}\n\n\tpublic function toString() : String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar it = keys();\n\t\tfor( i in it ) {\n\t\t\ts.add(Std.string(i));\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(i)));\n\t\t\tif( it.hasNext() )\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n}","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage haxe.ds;\n\nprivate class StringMapIterator<T> {\n\tvar map : StringMap<T>;\n\tvar keys : Array<String>;\n\tvar index : Int;\n\tvar count : Int;\n\tpublic inline function new(map:StringMap<T>, keys:Array<String>) {\n\t\tthis.map = map;\n\t\tthis.keys = keys;\n\t\tthis.index = 0;\n\t\tthis.count = keys.length;\n\t}\n\tpublic inline function hasNext() {\n\t\treturn index < count;\n\t}\n\tpublic inline function next() {\n\t\treturn map.get(keys[index++]);\n\t}\n}\n\n@:coreApi class StringMap<T> implements haxe.Constraints.IMap<String,T> {\n\n\tprivate var h : Dynamic;\n\tprivate var rh : Dynamic;\n\n\tpublic inline function new() : Void {\n\t\th = {};\n\t}\n\n\tinline function isReserved(key:String) : Bool {\n\t\treturn untyped __js__(\"__map_reserved\")[key] != null;\n\t}\n\n\tpublic inline function set( key : String, value : T ) : Void {\n\t\tif( isReserved(key) )\n\t\t\tsetReserved(key, value);\n\t\telse\n\t\t\th[cast key] = value;\n\t}\n\n\tpublic inline function get( key : String ) : Null<T> {\n\t\tif( isReserved(key) )\n\t\t\treturn getReserved(key);\n\t\treturn h[cast key];\n\t}\n\n\tpublic inline function exists( key : String ) : Bool {\n\t\tif( isReserved(key) )\n\t\t\treturn existsReserved(key);\n\t\treturn h.hasOwnProperty(key);\n\t}\n\n\tfunction setReserved( key : String, value : T ) : Void {\n\t\tif( rh == null ) rh = {};\n\t\trh[cast \"$\"+key] = value;\n\t}\n\n\tfunction getReserved( key : String ) : Null<T> {\n\t\treturn rh == null ? null : rh[cast \"$\"+key];\n\t}\n\n\tfunction existsReserved( key : String ) : Bool {\n\t\tif( rh == null ) return false;\n\t\treturn untyped rh.hasOwnProperty(\"$\"+key);\n\t}\n\n\tpublic function remove( key : String ) : Bool {\n\t\tif( isReserved(key) ) {\n\t\t\tkey = \"$\" + key;\n\t\t\tif( rh == null || !rh.hasOwnProperty(key) ) return false;\n\t\t\tuntyped __js__(\"delete\")(rh[key]);\n\t\t\treturn true;\n\t\t} else {\n\t\t\tif( !h.hasOwnProperty(key) )\n\t\t\t\treturn false;\n\t\t\tuntyped __js__(\"delete\")(h[key]);\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tpublic function keys() : Iterator<String> {\n\t\treturn arrayKeys().iterator();\n\t}\n\t\n\tfunction arrayKeys() : Array<String> {\n\t\tvar out = [];\n\t\tuntyped {\n\t\t\t__js__(\"for( var key in this.h ) {\");\n\t\t\t\tif( h.hasOwnProperty(key) )\n\t\t\t\t\tout.push(key);\n\t\t\t__js__(\"}\");\n\t\t}\n\t\tif( rh != null ) untyped {\n\t\t\t__js__(\"for( var key in this.rh ) {\");\n\t\t\t\tif( key.charCodeAt(0) == \"$\".code )\n\t\t\t\t\tout.push(key.substr(1));\n\t\t\t__js__(\"}\");\n\t\t}\n\t\treturn out;\n\t}\n\n\tpublic inline function iterator() : Iterator<T> {\n\t\treturn new StringMapIterator(this, arrayKeys());\n\t}\n\n\tpublic function toString() : String {\n\t\tvar s = new StringBuf();\n\t\ts.add(\"{\");\n\t\tvar keys = arrayKeys();\n\t\tfor( i in 0...keys.length ) {\n\t\t\tvar k = keys[i];\n\t\t\ts.add(k);\n\t\t\ts.add(\" => \");\n\t\t\ts.add(Std.string(get(k)));\n\t\t\tif( i < keys.length )\n\t\t\t\ts.add(\", \");\n\t\t}\n\t\ts.add(\"}\");\n\t\treturn s.toString();\n\t}\n\n\tstatic function __init__() : Void {\n\t\tuntyped __js__(\"var __map_reserved = {}\");\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage js;\n\nprivate class HaxeError extends js.Error {\n\n\tvar val:Dynamic;\n\n\tpublic function new(val:Dynamic) untyped {\n\t\tsuper();\n\t\tthis.val = __define_feature__(\"js.Boot.HaxeError\", val);\n\t\tthis.message = String(val);\n\t\tif (js.Error.captureStackTrace) js.Error.captureStackTrace(this, HaxeError);\n\t}\n}\n\n@:dox(hide)\nclass Boot {\n\n\tprivate static function __unhtml(s : String) {\n\t\treturn s.split(\"&\").join(\"&amp;\").split(\"<\").join(\"&lt;\").split(\">\").join(\"&gt;\");\n\t}\n\n\tprivate static function __trace(v,i : haxe.PosInfos) {\n\t\tuntyped {\n\t\t\tvar msg = if( i != null ) i.fileName+\":\"+i.lineNumber+\": \" else \"\";\n\t\t\t#if jsfl\n\t\t\tmsg += __string_rec(v,\"\");\n\t\t\tfl.trace(msg);\n\t\t\t#else\n\t\t\tmsg += __string_rec(v, \"\");\n\t\t\tif( i != null && i.customParams != null )\n\t\t\t\tfor( v in i.customParams )\n\t\t\t\t\tmsg += \",\" + __string_rec(v, \"\");\n\t\t\tvar d;\n\t\t\tif( __js__(\"typeof\")(document) != \"undefined\" && (d = document.getElementById(\"haxe:trace\")) != null )\n\t\t\t\td.innerHTML += __unhtml(msg)+\"<br/>\";\n\t\t\telse if( __js__(\"typeof console\") != \"undefined\" && __js__(\"console\").log != null )\n\t\t\t\t__js__(\"console\").log(msg);\n\t\t\t#end\n\t\t}\n\t}\n\n\tprivate static function __clear_trace() {\n\t\tuntyped {\n\t\t\t#if jsfl\n\t\t\tfl.outputPanel.clear();\n\t\t\t#else\n\t\t\tvar d = document.getElementById(\"haxe:trace\");\n\t\t\tif( d != null )\n\t\t\t\td.innerHTML = \"\";\n\t\t\t#end\n\t\t}\n\t}\n\n\tstatic inline function isClass(o:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isClass\", o.__name__);\n\t}\n\n\tstatic inline function isEnum(e:Dynamic) : Bool {\n\t\treturn untyped __define_feature__(\"js.Boot.isEnum\", e.__ename__);\n\t}\n\n\tstatic function getClass(o:Dynamic) : Dynamic {\n\t\tif (Std.is(o, Array))\n\t\t\treturn Array;\n\t\telse {\n\t\t\tvar cl = untyped __define_feature__(\"js.Boot.getClass\", o.__class__);\n\t\t\tif (cl != null)\n\t\t\t\treturn cl;\n\t\t\tvar name = __nativeClassName(o);\n\t\t\tif (name != null)\n\t\t\t\treturn __resolveNativeClass(name);\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t@:ifFeature(\"has_enum\")\n\tprivate static function __string_rec(o,s:String) {\n\t\tuntyped {\n\t\t\tif( o == null )\n\t\t\t    return \"null\";\n\t\t\tif( s.length >= 5 )\n\t\t\t\treturn \"<...>\"; // too much deep recursion\n\t\t\tvar t = __js__(\"typeof(o)\");\n\t\t\tif( t == \"function\" && (isClass(o) || isEnum(o)) )\n\t\t\t\tt = \"object\";\n\t\t\tswitch( t ) {\n\t\t\tcase \"object\":\n\t\t\t\tif( __js__(\"o instanceof Array\") ) {\n\t\t\t\t\tif( o.__enum__ ) {\n\t\t\t\t\t\tif( o.length == 2 )\n\t\t\t\t\t\t\treturn o[0];\n\t\t\t\t\t\tvar str = o[0]+\"(\";\n\t\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\t\tfor( i in 2...o.length ) {\n\t\t\t\t\t\t\tif( i != 2 )\n\t\t\t\t\t\t\t\tstr += \",\" + __string_rec(o[i],s);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tstr += __string_rec(o[i],s);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn str + \")\";\n\t\t\t\t\t}\n\t\t\t\t\tvar l = o.length;\n\t\t\t\t\tvar i;\n\t\t\t\t\tvar str = \"[\";\n\t\t\t\t\ts += \"\\t\";\n\t\t\t\t\tfor( i in 0...l )\n\t\t\t\t\t\tstr += (if (i > 0) \",\" else \"\")+__string_rec(o[i],s);\n\t\t\t\t\tstr += \"]\";\n\t\t\t\t\treturn str;\n\t\t\t\t}\n\t\t\t\tvar tostr;\n\t\t\t\ttry {\n\t\t\t\t\ttostr = untyped o.toString;\n\t\t\t\t} catch( e : Dynamic ) {\n\t\t\t\t\t// strange error on IE\n\t\t\t\t\treturn \"???\";\n\t\t\t\t}\n\t\t\t\tif( tostr != null && tostr != __js__(\"Object.toString\") && __typeof__(tostr) == \"function\" ) {\n\t\t\t\t\tvar s2 = o.toString();\n\t\t\t\t\tif( s2 != \"[object Object]\")\n\t\t\t\t\t\treturn s2;\n\t\t\t\t}\n\t\t\t\tvar k : String = null;\n\t\t\t\tvar str = \"{\\n\";\n\t\t\t\ts += \"\\t\";\n\t\t\t\tvar hasp = (o.hasOwnProperty != null);\n\t\t\t\t__js__(\"for( var k in o ) {\");\n\t\t\t\t\tif( hasp && !o.hasOwnProperty(k) )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( k == \"prototype\" || k == \"__class__\" || k == \"__super__\" || k == \"__interfaces__\" || k == \"__properties__\" )\n\t\t\t\t\t\t__js__(\"continue\");\n\t\t\t\t\tif( str.length != 2 )\n\t\t\t\t\t\tstr += \", \\n\";\n\t\t\t\t\tstr += s + k + \" : \"+__string_rec(o[k],s);\n\t\t\t\t__js__(\"}\");\n\t\t\t\ts = s.substring(1);\n\t\t\t\tstr += \"\\n\" + s + \"}\";\n\t\t\t\treturn str;\n\t\t\tcase \"function\":\n\t\t\t\treturn \"<function>\";\n\t\t\tcase \"string\":\n\t\t\t\treturn o;\n\t\t\tdefault:\n\t\t\t\treturn String(o);\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate static function __interfLoop(cc : Dynamic,cl : Dynamic) {\n\t\tif( cc == null )\n\t\t\treturn false;\n\t\tif( cc == cl )\n\t\t\treturn true;\n\t\tvar intf : Dynamic = cc.__interfaces__;\n\t\tif( intf != null )\n\t\t\tfor( i in 0...intf.length ) {\n\t\t\t\tvar i : Dynamic = intf[i];\n\t\t\t\tif( i == cl || __interfLoop(i,cl) )\n\t\t\t\t\treturn true;\n\t\t\t}\n\t\treturn __interfLoop(cc.__super__,cl);\n\t}\n\n\t@:ifFeature(\"typed_catch\") private static function __instanceof(o : Dynamic,cl : Dynamic) {\n\t\tif( cl == null )\n\t\t\treturn false;\n\t\tswitch( cl ) {\n\t\tcase Int:\n\t\t\treturn (untyped __js__(\"(o|0) === o\"));\n\t\tcase Float:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"number\";\n\t\tcase Bool:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"boolean\";\n\t\tcase String:\n\t\t\treturn (untyped __js__(\"typeof\"))(o) == \"string\";\n\t\tcase Array:\n\t\t\treturn (untyped __js__(\"(o instanceof Array)\")) && o.__enum__ == null;\n\t\tcase Dynamic:\n\t\t\treturn true;\n\t\tdefault:\n\t\t\tif( o != null ) {\n\t\t\t\t// Check if o is an instance of a Haxe class or a native JS object\n\t\t\t\tif( (untyped __js__(\"typeof\"))(cl) == \"function\" ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t\tif( __interfLoop(getClass(o),cl) )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if ( (untyped __js__(\"typeof\"))(cl) == \"object\" && __isNativeObj(cl) ) {\n\t\t\t\t\tif( untyped __js__(\"o instanceof cl\") )\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t// do not use isClass/isEnum here\n\t\t\tuntyped __feature__(\"Class.*\",if( cl == Class && o.__name__ != null ) return true);\n\t\t\tuntyped __feature__(\"Enum.*\",if( cl == Enum && o.__ename__ != null ) return true);\n\t\t\treturn o.__enum__ == cl;\n\t\t}\n\t}\n\n\t@:ifFeature(\"typed_cast\") private static function __cast(o : Dynamic, t : Dynamic) {\n\t\tif (__instanceof(o, t)) return o;\n\t\telse throw \"Cannot cast \" +Std.string(o) + \" to \" +Std.string(t);\n\t}\n\n\tstatic var __toStr = untyped __js__(\"{}.toString\");\n\t// get native JS [[Class]]\n\tstatic function __nativeClassName(o:Dynamic):String {\n\t\tvar name = untyped __toStr.call(o).slice(8, -1);\n\t\t// exclude general Object and Function\n\t\t// also exclude Math and JSON, because instanceof cannot be called on them\n\t\tif (name == \"Object\" || name == \"Function\" || name == \"Math\" || name == \"JSON\")\n\t\t\treturn null;\n\t\treturn name;\n\t}\n\n\t// check for usable native JS object\n\tstatic function __isNativeObj(o:Dynamic):Bool {\n\t\treturn __nativeClassName(o) != null;\n\t}\n\n\t// resolve native JS class in the global scope:\n\tstatic function __resolveNativeClass(name:String) untyped {\n\t\treturn untyped Function('return typeof $name != \"undefined\" ? $name : null')();\n\t}\n\n}\n","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage js;\n\nimport js.html.Storage;\nimport js.html.XMLHttpRequest;\n\nclass Browser {\n\t/** The global window object. */\n\tpublic static var window(get, never):js.html.Window;\n\tinline static function get_window() return untyped __js__(\"window\");\n\n\t/** Shortcut to Window.document. */\n\tpublic static var document(get, never):js.html.HTMLDocument;\n\tinline static function get_document() return untyped __js__(\"window.document\");\n\n\t/** Shortcut to Window.location. */\n\tpublic static var location(get, never):js.html.Location;\n\tinline static function get_location() return untyped __js__(\"window.location\");\n\n\t/** Shortcut to Window.navigator. */\n\tpublic static var navigator(get, never):js.html.Navigator;\n\tinline static function get_navigator() return untyped __js__(\"window.navigator\");\n\n\t/** Shortcut to Window.console. */\n\tpublic static var console(get, never):js.html.Console;\n\tinline static function get_console() return untyped __js__(\"window.console\");\n\n\t/**\n\t * True if a window object exists, false otherwise.\n\t *\n\t * This can be used to check if the code is being executed in a non-browser\n\t * environment such as node.js.\n\t */\n\tpublic static var supported(get, never):Bool;\n\tinline static function get_supported() return untyped __typeof__(window) != \"undefined\";\n\n\t/**\n\t * Safely gets the browser's local storage, or returns null if localStorage is unsupported or\n\t * disabled.\n\t */\n\tpublic static function getLocalStorage() : Storage\n\t{\n\t\ttry {\n\t\t\tvar s = window.localStorage;\n\t\t\ts.getItem(\"\");\n\t\t\treturn s;\n\t\t} catch( e : Dynamic ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Safely gets the browser's session storage, or returns null if sessionStorage is unsupported\n\t * or disabled.\n\t */\n\tpublic static function getSessionStorage() : Storage\n\t{\n\t\ttry {\n\t\t\tvar s = window.sessionStorage;\n\t\t\ts.getItem(\"\");\n\t\t\treturn s;\n\t\t} catch( e : Dynamic ) {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/**\n\t * Creates an XMLHttpRequest, with a fallback to ActiveXObject for ancient versions of Internet\n\t * Explorer.\n\t */\n\tpublic static function createXMLHttpRequest() : XMLHttpRequest\n\t{\n\t\tif( untyped __js__(\"typeof XMLHttpRequest\") != \"undefined\" ) {\n\t\t\treturn new XMLHttpRequest();\n\t\t}\n\t\tif( untyped __js__(\"typeof ActiveXObject\") != \"undefined\" ) {\n\t\t\treturn untyped __new__(\"ActiveXObject\",\"Microsoft.XMLHTTP\");\n\t\t}\n\t\tthrow \"Unable to create XMLHttpRequest object.\";\n\t}\n\n\t/**\n\t\tDisplay an alert message box containing the given message. See also `Window.alert()`.\n\t**/\n\tpublic static function alert( v : Dynamic ) {\n\t\t@:privateAccess window.alert(Boot.__string_rec(v,\"\"));\n\t}\n}\n","package pixi.display;\n\nimport flump.*;\nimport flump.DisplayObjectKey;\nimport flump.library.*;\nimport flump.library.MovieSymbol;\nimport pixi.core.sprites.Sprite;\nimport pixi.display.FlumpResource;\nimport pixi.extras.MovieClip;\nimport pixi.core.display.Container;\nimport pixi.core.display.DisplayObject;\nimport pixi.core.math.Point;\nimport pixi.core.ticker.Ticker;\n\n\n@:access(pixi.display.FlumpResource)\nclass FlumpMovie extends Container implements IFlumpMovie {\n\n\tpublic var player:MoviePlayer;\n\tprivate var symbol:MovieSymbol;\n\tprivate var layers = new Map<Layer, Container>();\n\tprivate var layerLookup = new Map<String, Container>();\n\tprivate var movieChildren = new Map<DisplayObjectKey, DisplayObject>();\n\tprivate var displaying = new Map<Layer, DisplayObjectKey>();\n\tprivate var ticker:Ticker = untyped __js__ (\"PIXI.ticker.shared\");\n\tprivate var master:Bool;\n\n\tprivate var resolution:Float;\n\tprivate var resource:FlumpResource;\n\tprivate var resourceId:String;\n\n\tpublic function new(symbolId:String, resourceId:String = null){\n\t\tsuper();\n\t\tthis.resourceId = resourceId;\n\n\t\tif(resourceId == null){\n\t\t\tresource = FlumpResource.getResourceForMovie(symbolId);\n\t\t\tif(resource == null) throw(\"Flump movie does not exist: \" + symbolId);\n\t\t}else{\n\t\t\tresource = FlumpResource.get(resourceId);\n\t\t\tif(resource == null) throw(\"Flump resource does not exist: \" + resourceId);\n\t\t}\n\n\t\tthis.resolution = resource.resolution;\n\n\t\tthis.symbol = resource.library.movies.get(symbolId);\n\t\t\n\t\tplayer = new MoviePlayer(symbol, this, resolution);\t\n\t\tthis.loop = true;\n\n\t\tmaster = true;\n\t\tonce(\"added\", onAdded);\n\t}\n\n\n\tprivate function disableAsMaster(){\n\t\tmaster = false;\n\t\toff(\"added\", onAdded);\n\t}\n\n\n\t/////////////////////////////////////////////////////\n\t//\n\t//   API\n\t//\n\t/////////////////////////////////////////////////////\n\n\tpublic var animationSpeed(default, default):Float = 1.0;\n\n\tpublic var resX(get, set):Float;\n\tpublic function get_resX():Float{\n\t\treturn x / resolution;\n\t}\n\tpublic function set_resX(value:Float):Float{\n\t\tx = value * resolution;\n\t\treturn value;\n\t}\n\n\tpublic var resY(get, set):Float;\n\tpublic function get_resY():Float{\n\t\treturn y / resolution;\n\t}\n\tpublic function set_resY(value:Float):Float{\n\t\ty = value * resolution;\n\t\treturn value;\n\t}\n\n\tpublic var resScaleX(get, set):Float;\n\tpublic function get_resScaleX():Float{\n\t\treturn scale.x / resolution;\n\t}\n\tpublic function set_resScaleX(value:Float):Float{\n\t\tscale.x = value * resolution;\n\t\treturn value;\n\t}\n\n\tpublic var resScaleY(get, set):Float;\n\tpublic function get_resScaleY():Float{\n\t\treturn scale.y / resolution;\n\t}\n\tpublic function set_resScaleY(value:Float):Float{\n\t\tscale.y = value * resolution;\n\t\treturn value;\n\t}\n\n\t\n\tpublic function getLayer(layerId:String):Container{\n\t\tif(layerLookup.exists(layerId) == false) throw(\"Layer \" + layerId + \"does not exist\");\n\t\treturn layerLookup[layerId];\n\t}\n\n\n\tpublic function getChildDisplayObject(layerId:String, keyframeIndex:UInt = 0):DisplayObject{\n\t\tvar key = player.getDisplayKey(layerId, keyframeIndex);\n\t\treturn movieChildren[key];\n\t}\n\n\n\tpublic function getChildMovie(layerId, keyframeIndex:UInt = 0):FlumpMovie{\n\t\tvar child = getChildDisplayObject(layerId, keyframeIndex);\n\t\tif(Std.is(child, FlumpMovie) == false) throw(\"Child on layer \" + layerId + \" at keyframeIndex \" + keyframeIndex + \" is not of type FlumpMovie!\");\n\t\treturn cast child;\n\t}\n\n\n\tpublic var symbolId(get, null):String;\n\tprivate function get_symbolId(){\n\t\treturn symbol.name;\n\t}\n\n\tpublic var loop(default, set):Bool;\n\tprivate function set_loop(value){\n\t\tif(value && player.playing) player.loop();\n\t\telse if(value == false && player.looping) player.play();\n\t\treturn loop = value;\n\t}\n\n\n\tpublic var onComplete(default, set):Void -> Void;\n\tprivate function set_onComplete(value){\n\t\treturn onComplete = value;\n\t}\n\n\tpublic var currentFrame(get, set):Int;\n\tprivate function set_currentFrame(value){\n\t\tplayer.currentFrame = value;\n\t\treturn value;\n\t}\n\tprivate function get_currentFrame():Int{\n\t\treturn player.currentFrame;\n\t}\n\n\tpublic var playing(get, null):Bool;\n\tprivate function get_playing(){\n\t\treturn player.playing || player.looping;\n\t}\n\n\n\tpublic var independantTimeline(get, set):Bool;\n\tprivate function get_independantTimeline(){\n\t\treturn player.independantTimeline;\n\t}\n\tprivate function set_independantTimeline(value:Bool){\n\t\tplayer.independantTimeline = value;\n\t\treturn value;\n\t}\n\n\n\tpublic var independantControl(get, set):Bool;\n\tprivate function get_independantControl(){\n\t\treturn player.independantControl;\n\t}\n\tprivate function set_independantControl(value:Bool){\n\t\tplayer.independantControl = value;\n\t\treturn value;\n\t}\n\n\n\tpublic var totalFrames(get, null):Int;\n\t\n\tpublic var tint(default, set):Int;\n\t\n\tprivate function get_totalFrames() {\n\t\treturn player.totalFrames;\n\t}\n\t\n\tprivate function set_tint(pTint:Int):Int {\n\t\tfor (child in movieChildren) {\n\t\t\tif (Std.is(child, FlumpSprite)) {\n\t\t\t\tcast(child, FlumpSprite).tint = pTint;\n\t\t\t} else if (Std.is(child, FlumpMovie)) {\n\t\t\t\tcast(child, FlumpMovie).tint = pTint;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn tint = pTint;\n\t}\n\n\n\tpublic function stop():Void{\n\t\tplayer.stop();\n\t}\n\n\n\tpublic function play():Void{\n\t\tif(loop) player.loop();\n\t\telse player.play();\n\t}\n\n\n\tpublic function gotoAndStop(frameNumber:Int):Void{\n\t\tif(!loop){\n\t\t\tif(frameNumber > player.totalFrames-1) frameNumber = player.totalFrames - 1;\n\t\t\telse if(frameNumber < 0) frameNumber = 0;\n\t\t}\n\t\tplayer.goToFrame(frameNumber).stop();\n\t}\n\n\n\tpublic function gotoAndPlay(frameNumber:Int):Void{\n\t\tif(!loop){\n\t\t\tif(frameNumber > player.totalFrames-1) frameNumber = player.totalFrames - 1;\n\t\t\telse if(frameNumber < 0) frameNumber = 0;\n\t\t}\n\t\tif(loop) player.goToFrame(frameNumber).loop();\n\t\telse player.goToFrame(frameNumber).play();\n\t}\n\n\n\tpublic function getLabelFrame(label:String):UInt{\n\t\treturn player.getLabelFrame(label);\n\t}\n\n\n\t/////////////////////////////////////////////////////\n\t//\n\t//   Other\n\t//\n\t/////////////////////////////////////////////////////\n\n\tprivate function tick(){\n\t\tplayer.advanceTime(ticker.elapsedMS * animationSpeed);\n\t}\n\n\n\tprivate function onAdded(to){\n\t\tonce(\"removed\", onRemoved);\n\t\tticker.add(tick);\n\t}\n\n\n\tprivate function onRemoved(from){\n\t\tonce(\"added\", onAdded);\n\t\tticker.remove(tick);\n\t}\n\n\n\n\t/////////////////////////////////////////////////////\n\t//\n\t//   IFlumpMovie\n\t//\n\t/////////////////////////////////////////////////////\n\n\t\n\t\n\tprivate function createLayer(layer:Layer):Void{\n\t\tlayers[layer] = new Container();\n\t\tlayers[layer].name = layer.name;\n\t\tlayerLookup[layer.name] = layers[layer];\n\t\taddChild(layers[layer]);\n\t}\n\n\n\tprivate function getChildPlayer(keyframe:Keyframe):MoviePlayer{\n\t\tvar movie:FlumpMovie = cast movieChildren[keyframe.displayKey];\n\t\treturn movie.player;\n\t}\n\n\n\tprivate function createFlumpChild(displayKey:DisplayObjectKey):Void{\n\t\tmovieChildren[displayKey] = resource.createDisplayObject(displayKey.symbolId);\n\t}\n\n\n\tprivate function removeFlumpChild(layer:Layer, displayKey:DisplayObjectKey):Void{\n\t\tvar layer = layers[layer];\n\t\tlayer.removeChildren();\n\t}\n\n\n\tprivate function addFlumpChild(layer:Layer, displayKey:DisplayObjectKey):Void{\n\t\tvar layer = layers[layer];\n\t\tlayer.addChild( movieChildren[displayKey] );\n\t}\n\n\n\tprivate function onAnimationComplete():Void{\n\t\tif(onComplete != null) onComplete();\n\t}\n\n\n\tprivate function renderFrame(keyframe:Keyframe, x:Float, y:Float, scaleX:Float, scaleY:Float, skewX:Float, skewY:Float, alpha:Float):Void{\n\t\tvar layer = layers[keyframe.layer];\n\t\tif (layer.pivot == null) return;\n\t\tlayer.pivot.x = keyframe.pivot.x;\n\t\tlayer.pivot.y = keyframe.pivot.y;\n\n\t\tif(Std.is(keyframe.symbol, SpriteSymbol)){\n\t\t\tvar spriteSymbol:SpriteSymbol = cast keyframe.symbol;\n\t\t\tlayer.pivot.x -= spriteSymbol.origin.x;\n\t\t\tlayer.pivot.y -= spriteSymbol.origin.y;\n\t\t}\n\n\t\tlayer.x = x;\n\t\tlayer.y = y;\n\t\tlayer.scale.x = scaleX;\n\t\tlayer.scale.y = scaleY;\n\t\tlayer.skew.x = skewX;\n\t\tlayer.skew.y = skewY;\n\t\tlayer.alpha  = alpha;\n\n\n\t\tif(master){\n\t\t\t//layer.pivot.x /= resolution;\n\t\t\t//layer.pivot.y /= resolution;\n\t\t\tlayer.x /= resolution;\n\t\t\tlayer.y /= resolution;\n\t\t\tlayer.scale.x /= resolution;\n\t\t\tlayer.scale.y /= resolution;\n\t\t}\n\t}\n\n\n\tprivate function labelPassed(label:Label){\n\t\temit(\"labelPassed\", label.name);\n\t}\n\t\n\n\toverride public function destroy(): Void {\n\t\tstop();\n\t\tonComplete = null;\n\t\tfor (layer in layers) layer.removeChildren();\n\t\tsymbol = null;\n\t\tplayer = null;\n\t\tsuper.destroy(true);\n\t}\n\n\n}","package pixi.display;\n\nimport flump.library.FlumpLibrary;\nimport flump.library.SpriteSymbol;\nimport flump.library.MovieSymbol;\nimport flump.library.Point;\nimport pixi.core.math.shapes.Rectangle;\nimport pixi.core.display.DisplayObject;\nimport pixi.core.sprites.Sprite;\nimport pixi.core.textures.BaseTexture;\nimport pixi.core.textures.Texture;\nimport pixi.core.ticker.Ticker;\nimport pixi.loaders.Resource;\nimport pixi.loaders.Loader;\n\nusing Type;\n\n\n@:access(pixi.display.FlumpMovie)\nclass FlumpResource{\n\t\n\tprivate var library:FlumpLibrary;\n\tprivate var textures:Map<String, Texture>;\n\tprivate var resourceId:String;\n\tprivate var resolution:Float;\n\n\tpublic static var flumpFactory:FlumpFactory;\n\n\n\n\tprivate static var resources = new Map<String, FlumpResource>();\n\n\n\tpublic static function exists(resourceName:String){\n\t\treturn resources.exists(resourceName);\n\t}\n\n\n\tpublic static function destroy(resourceName:String){\n\t\tif(resources.exists(resourceName) == false) throw(\"Cannot destroy FlumpResource: \" + resourceName + \" as it does not exist.\");\n\t\t\n\t\tvar resource = resources[resourceName];\n\t\tfor(texture in resource.textures)texture.destroy();\n\t\tresource.library = null;\n\t\tresources.remove(resourceName);\n\t}\n\n\n\tprivate static function get(resourceName:String){\n\t\tif(!resources.exists(resourceName)) throw(\"Flump resource: \" + resourceName + \" does not exist.\");\n\t\treturn resources[resourceName];\n\t}\n\n\t\n\tprivate static function getResourceForMovie(symbolId:String):FlumpResource{\n\t\tfor(resource in resources){\n\t\t\tif(resource.library.movies.exists(symbolId)){\n\t\t\t\treturn resource;\n\t\t\t}\n\t\t}\n\t\tthrow(\"Movie: \" + symbolId + \"does not exists in any loaded flump resources.\");\n\t}\n\n\n\tprivate static function getResourceForSprite(symbolId:String):FlumpResource{\n\t\tfor(resource in resources){\n\t\t\tif(resource.library.sprites.exists(symbolId)){\n\t\t\t\treturn resource;\n\t\t\t}\n\t\t}\n\t\tthrow(\"Sprite: \" + symbolId + \" does not exists in any loaded flump resources.\");\n\t}\n\t\n\n\n\tprivate function new(library:FlumpLibrary, textures:Map<String, Texture>, resourceId:String, resolution:Float){\n\t\tthis.library = library;\n\t\tthis.textures = textures;\n\t\tthis.resourceId = resourceId;\n\t\tthis.resolution = resolution;\n\t}\n\n\n\tprivate function createMovie(id:String):FlumpMovie{\n\t\tvar movie:FlumpMovie;\n\t\tif(flumpFactory != null && flumpFactory.displayClassExists(id)){\n\t\t\tmovie = flumpFactory.getMovieClass(id).createInstance([]);\n\t\t}else{\n\t\t\tmovie = new FlumpMovie(id, this.resourceId);\n\t\t}\n\n\t\tmovie.disableAsMaster();\n\t\treturn movie;\n\t}\n\n\n\tprivate function createSprite(id:String):Sprite{\n\t\tif(flumpFactory != null && flumpFactory.displayClassExists(id)){\n\t\t\treturn flumpFactory.getSpriteClass(id).createInstance([]);\n\t\t}else{\n\t\t\treturn new FlumpSprite(id, this.resourceId);\n\t\t}\n\t}\n\n\n\tprivate function createDisplayObject(id:String):DisplayObject {\n\t\tvar displayObject:DisplayObject = library.movies.exists(id)\n\t\t? createMovie(id)\n\t\t: createSprite(id);\n\t\t\n\t\tdisplayObject.name = id;\n\t\t\n\t\treturn displayObject;\n\t}\n\n}\n","package pixi.display;\n\nimport flump.library.FlumpLibrary;\nimport pixi.core.sprites.Sprite;\n\n\n@:access(pixi.display.FlumpResource)\nclass FlumpSprite extends Sprite{\n\n\tpublic var symbolId:String;\n\tpublic var resourceId:String;\n\tprivate var resolution:Float;\n\t\n\n\tpublic function new(symbolId:String, resourceId:String = null){\n\t\tthis.symbolId = symbolId;\n\t\tthis.resourceId = resourceId;\n\n\t\tvar resource:FlumpResource;\n\t\tif(resourceId != null){\n\t\t\tresource = FlumpResource.get(resourceId);\n\t\t\tif(resource == null) throw(\"Library: \" + resourceId + \"does has not been loaded.\");\n\t\t}else{\n\t\t\tresource = FlumpResource.getResourceForSprite(symbolId);\n\t\t}\n\t\tthis.resolution = resource.resolution;\n\n\t\tvar symbol = resource.library.sprites[symbolId];\n\t\tvar texture = resource.textures[symbol.texture];\n\t\tsuper(texture);\n\n\n\t\tanchor.x = symbol.origin.x / texture.width;\n\t\tanchor.y = symbol.origin.y / texture.height;\n\n\t\t//pivot.x = symbol.origin.x;\n\t\t//pivot.y = symbol.origin.y;\n\t}\n\t\n\tpublic var resX(get, set):Float;\n\t\n\tpublic function get_resX():Float{\n\t\treturn x / resolution;\n\t}\n\tpublic function set_resX(value:Float):Float{\n\t\tx = value * resolution;\n\t\treturn value;\n\t}\n\n\tpublic var resY(get, set):Float;\n\tpublic function get_resY():Float{\n\t\treturn y / resolution;\n\t}\n\tpublic function set_resY(value:Float):Float{\n\t\ty = value * resolution;\n\t\treturn value;\n\t}\n\n\tpublic var resScaleX(get, set):Float;\n\tpublic function get_resScaleX():Float{\n\t\treturn scale.x / resolution;\n\t}\n\tpublic function set_resScaleX(value:Float):Float{\n\t\tscale.x = value * resolution;\n\t\treturn value;\n\t}\n\n\tpublic var resScaleY(get, set):Float;\n\tpublic function get_resScaleY():Float{\n\t\treturn scale.y / resolution;\n\t}\n\tpublic function set_resScaleY(value:Float):Float{\n\t\tscale.y = value * resolution;\n\t\treturn value;\n\t}\n\n\n}","package pixi.loaders;\n\nimport flump.library.FlumpLibrary;\nimport pixi.display.FlumpResource;\nimport pixi.core.math.Point;\nimport pixi.core.math.shapes.Rectangle;\nimport pixi.core.textures.Texture;\nimport pixi.core.textures.BaseTexture;\nimport pixi.loaders.Loader;\nimport pixi.loaders.Resource;\n\nusing Reflect;\n\n\n@:access(pixi.display.FlumpResource)\nclass FlumpParser{\n\n\n\tpublic static function flumpParser(resolution:Float, ?loadFromCache:Bool = true){\n\t\treturn function(resource:Resource, next:Void->Void){\n\t\t\tif(resource.data == null || resource.isJson == false) return;\n\t\t\tif(!resource.data.hasField(\"md5\") || !resource.data.hasField(\"movies\") || !resource.data.hasField(\"textureGroups\") || !resource.data.hasField(\"frameRate\")) return;\n\t\t\t\n\t\t\tvar lib:FlumpLibrary = FlumpLibrary.create(resource.data, resolution);\n\t\t\tvar textures = new Map<String, Texture>();\n\t\t\t\n\t\t\tvar atlasLoader = new Loader();\n\t\t\tatlasLoader.baseUrl = ~/\\/(.[^\\/]*)$/i.replace(resource.url, \"\");\n\n\t\t\tfor(atlasSpec in lib.atlases){\n\t\t\t\tatlasSpec.file += loadFromCache ? '' : \"?\" + Date.now().getTime();\n\t\t\t\tatlasLoader.add(atlasSpec.file, function(atlasResource){\n\t\t\t\t\tvar atlasTexture = new BaseTexture(atlasResource.data);\n\t\t\t\t\tatlasTexture.resolution = resolution;\n\n\t\t\t\t\tfor(textureSpec in atlasSpec.textures){\n\t\t\t\t\t\tvar frame = new Rectangle(textureSpec.rect.x, textureSpec.rect.y, textureSpec.rect.width, textureSpec.rect.height);\n\t\t\t\t\t\tvar origin = new Point(textureSpec.origin.x, textureSpec.origin.y);\n\t\t\t\t\t\torigin.x = origin.x / frame.width;\n\t\t\t\t\t\torigin.y = origin.y / frame.height;\n\t\t\t\t\t\ttextures[textureSpec.symbol] = new Texture(atlasTexture, frame);\n\t\t\t\t\t};\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\n\t\t\tatlasLoader.once(\"complete\", function(loader:Loader){\n\t\t\t\tvar flumpResource = new FlumpResource(lib, textures, resource.name, resolution);\n\t\t\t\tif(resource.name != null) FlumpResource.resources[resource.name] = flumpResource;\n\t\t\t\tresource.data = flumpResource;\n\t\t\t\tnext();\n\t\t\t});\n\t\t\tatlasLoader.load();\n\t\t}\n\t}\n\n\n}","/*\n * Copyright (C)2005-2012 Haxe Foundation\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the \"Software\"),\n * to deal in the Software without restriction, including without limitation\n * the rights to use, copy, modify, merge, publish, distribute, sublicense,\n * and/or sell copies of the Software, and to permit persons to whom the\n * Software is furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\npackage;\n\n// Can't enable @:coreApi because some fields are now inline getters\n// @:coreApi\n@:keepInit\nextern class Math\n{\n\tstatic var PI(default,null) : Float;\n\n\tstatic var NEGATIVE_INFINITY(get, null) : Float;\n\tprivate static inline function get_NEGATIVE_INFINITY () : Float {\n\t\treturn -(untyped __js__(\"Infinity\"));\n\t}\n\n\tstatic var POSITIVE_INFINITY(get,null) : Float;\n\tprivate static inline function get_POSITIVE_INFINITY () : Float {\n\t\treturn (untyped __js__(\"Infinity\"));\n\t}\n\n\tstatic var NaN(get, null) : Float;\n\tprivate static inline function get_NaN () : Float {\n\t\treturn (untyped __js__(\"NaN\"));\n\t}\n\n\tstatic function abs(v:Float):Float;\n\tstatic function acos(v:Float):Float;\n\tstatic function asin(v:Float):Float;\n\tstatic function atan(v:Float):Float;\n\tstatic function atan2(y:Float, x:Float):Float;\n\tstatic function ceil(v:Float):Int;\n\tstatic function cos(v:Float):Float;\n\tstatic function exp(v:Float):Float;\n\tstatic function floor(v:Float):Int;\n\tstatic function log(v:Float):Float;\n\tstatic function max(a:Float, b:Float):Float;\n\tstatic function min(a:Float, b:Float):Float;\n\tstatic function pow(v:Float, exp:Float):Float;\n\tstatic function random() : Float;\n\tstatic function round(v:Float):Int;\n\tstatic function sin(v:Float):Float;\n\tstatic function sqrt(v:Float):Float;\n\tstatic function tan(v:Float):Float;\n\n\tstatic inline function ffloor( v : Float ) : Float {\n\t\treturn floor(v);\n\t}\n\n\tstatic inline function fceil( v : Float ) : Float {\n\t\treturn ceil(v);\n\t}\n\n\tstatic inline function fround( v : Float ) : Float {\n\t\treturn round(v);\n\t}\n\n\tstatic inline function isFinite( f : Float ) : Bool {\n\t\treturn (untyped __js__(\"isFinite\"))(f);\n\t}\n\n\tstatic inline function isNaN( f : Float ) : Bool {\n\t\treturn (untyped __js__(\"isNaN\"))(f);\n\t}\n\n\tstatic function __init__() : Void {\n\t\tuntyped __feature__(\"Type.resolveClass\", $hxClasses[\"Math\"] = Math);\n\t}\n}\n","package com.isartdigital.utils.events;\r\n\r\n/**\r\n * @author Mathieu ANTHOINE\r\n */\r\n\r\nclass EventType \r\n{\r\n\t\r\n\tpublic static inline var GAME_LOOP:String = \"gameLoop\";\r\n\tpublic static inline var RESIZE:String = \"resize\";\r\n\t\r\n\tpublic static inline var ADDED:String = \"added\";\r\n\tpublic static inline var REMOVED:String = \"removed\";\r\n\t\r\n}","package com.isartdigital.utils.events;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass LoadEventType extends EventType\r\n{\r\n\r\n\tpublic static inline var COMPLETE:String = \"complete\";\r\n\tpublic static inline var LOADED:String = \"load\";\r\n\tpublic static inline var PROGRESS:String = \"progress\";\r\n\tpublic static inline var ERROR:String = \"error\";\r\n\t\r\n}","package com.isartdigital.utils.events;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass MouseEventType extends EventType\r\n{\r\n\t\r\n\tpublic static inline var MOUSE_MOVE:String = \"mousemove\";\r\n\tpublic static inline var MOUSE_DOWN:String = \"mousedown\";\r\n\tpublic static inline var MOUSE_OUT:String = \"mouseout\";\r\n\tpublic static inline var MOUSE_OVER:String = \"mouseover\";\r\n\tpublic static inline var MOUSE_UP:String = \"mouseup\";\r\n\tpublic static inline var MOUSE_UP_OUTSIDE:String = \"mouseupoutside\";\r\n\tpublic static inline var CLICK:String = \"click\";\r\n\t\r\n\tpublic static inline var RIGHT_DOWN:String = \"rightdown\";\r\n\tpublic static inline var RIGHT_UP:String = \"rightup\";\r\n\tpublic static inline var RIGHT_UP_OUTSIDE:String = \"rightupoutside\";\r\n\tpublic static inline var RIGHT_CLICK:String = \"rightclick\";\r\n\t\r\n}","package com.isartdigital.utils.events;\r\n\r\n/**\r\n * ...\r\n * @author Mathieu ANTHOINE\r\n */\r\nclass TouchEventType extends EventType\r\n{\r\n\r\n\tpublic static inline var TOUCH_START:String = \"touchstart\";\r\n\tpublic static inline var TOUCH_MOVE:String = \"touchmove\";\r\n\tpublic static inline var TOUCH_END:String = \"touchend\";\r\n\tpublic static inline var TOUCH_END_OUTSIDE:String = \"touchendoutside\";\r\n\tpublic static inline var TAP:String = \"tap\";\r\n\t\r\n}"],
"names":[],
"mappings":"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"
}